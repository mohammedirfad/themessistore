(function(){var sl9={themes:{}};sl9.main={Data:{},Init:function(){},GetData:function(){for(var t=jQuery.extend({},sl9.main.Data),e=0,n=arguments.length;e<n;e++){if(!t||typeof t!="object")return null;t=t[arguments[e]]}return t},addCustomStyle:function(t){if(t){for(var e="",n=function(f,l){switch(f.split("_")[1]){case"ff":return"font-family: "+l+";";case"fs":return"font-size: "+l+"px !important;";case"fw":return"font-weight: "+l+" !important;"}return""},i=".tdf_container ",o=[{t:i+"*",k:["g_ff"]},{t:i+"h2,"+i+"h3,#tdf_wholesale h2",k:["m_ff","m_fs","m_fw"]},{t:i+"button",k:["b_ff","b_fs","b_fw"]}],r=0;r<o.length;r++){for(var c="",a=0;a<o[r].k.length;a++)t[o[r].k[a]]&&(c+=n(o[r].k[a],t[o[r].k[a]]));c&&(e+=o[r].t+"{"+c+"}")}t.c_cs&&(e+=t.c_cs),e&&jQuery("head").append("<style>"+e+"</style>")}},Start:function(){var handle=function(t,e,n,i,o){var r=sl9.struct.consta.SettingTypeBack,c=e.settings[sl9.struct.consta.SettingTypeTheme],a=c?c.theme_type_id:1;a&&(jQuery("body").addClass("tdf_theme_"+a),a!=1&&jQuery("body").addClass("tdf_theme_holiday"));var f=sl9.struct.consta.SettingTypeOther,l=sl9.struct.consta.SettingTypeUpsell,_=sl9.struct.consta.SettingTypeTrans;e.settings[f]||(e.settings[f]={}),e.settings[f].sale_place_id===void 0&&(e.settings[f].sale_place_id=sl9.struct.consta.SalePlaceNoti),e.settings[l]&&e.settings[l].cheap_mode&&(e.settings[f].cheap_mode=e.settings[l].cheap_mode);var u=window.location.href;if(u.indexOf("design_theme_id")==-1||u.indexOf("frame_token")==-1||!(6450<e.settings[r].id||e.settings[f].no_in_admin)){5100<e.settings[r].id&&(e.settings[f].no_giftable=1),5985<e.settings[r].id&&!e.settings[f].saving_show&&(e.settings[f].saving_hide=1);var p=null;e.settings[_].m_lang_on&&e.settings[_].m_lang&&(p=e.settings[_].m_lang.split(",")).length<2&&(p=null,e.settings[_].m_lang_on=!1),sl9.main.Data=e,sl9.nfec.manager.setting.AddBackSettings(e.settings[r],e.settings[f]),sl9.nfec.main.AddStyleVars(c),sl9.main.addCustomStyle(e.settings[11]);var h=nfec.platform.current.page.Detect(),m=nfec.platform.base.page.IsInCheckout(h.type);sl9.nfec.manager.product.AddFromJson(e.products),sl9.nfec.event_hub.Trigger("product_ready",{}),window["b"+n+"ShopSettings"]=function(j){if(!j||!j.settings||!j.settings.apps)return j;var L="xpired";return j.settings.apps["b"+i]&&(j.settings.apps["b"+i]["isE"+L]=!0),j.settings.apps["cb"+o]&&(j.settings.apps["cb"+o]["isE"+L]=!0),j};var g=!1;e.settings[f].d_mode==3&&(g=!0,nfec.IsDmodeNone=!0,jQuery("head").append("<style>.tdf_qv_gift button{display:none !important}</style>"),e.settings[f].saving_hide=1,e.settings[f].enable_cart_code=!1),e.settings[_]||(e.settings[_]={});var v=e.settings[_].ribbon_price;v&&v!="ribbon_price"||(e.settings[_].ribbon_price_default="1"),e.settings[_].copy=e.settings[_].copy||"Copy",e.settings[_].copied=e.settings[_].copied||"Copied";var y,w,T,q,S,k=e.settings[_].m_country,D=[];for(w in e.offers)if(e.offers.hasOwnProperty(w))for(T in e.offers[w])e.offers[w].hasOwnProperty(T)&&e.offers[w][T].trigger&&((q=e.offers[w][T].trigger.keyword_ids)&&(D=D.concat(q)),e.offers[w][T].trigger.country_codes&&(y=!0));for(S in e.schedules)e.schedules.hasOwnProperty(S)&&sl9.manager.schedule.SetFromJSON(e.schedules[S]);for(S in e.sgm)e.sgm.hasOwnProperty(S)&&sl9.manager.segment.SetFromJSON(e.sgm[S]);for(S in e.kwd)if(e.kwd.hasOwnProperty(S)){var I=sl9.manager.keyword.SetFromJSON(e.kwd[S]);if(D.indexOf(I.id)!=-1)if(I.check(location.href))sl9.manager.ckeyword.Set(I.id);else{var C=document.referrer;C&&I.check(C)&&sl9.manager.ckeyword.Set(I.id)}}var O=[];p?(sl9.nfec.sync.locale.Start(),O.push("locale_ready"),y=!0):sl9.nfec.manager.locale.Del(),e.settings[r].m_currency_on&&(y=!0),y&&O.push("country_ready");var P=!1,R=!1;if(e.settings[f].rchItg||(6197<e.settings[r].id||e.settings[f].rchUse)&&(P=!0),P){var A=document.documentElement.innerHTML;A&&(-1<A.indexOf("/js\\/recharge.js")||-1<A.indexOf("rechargecdn.com/"))&&(R=!0),R&&O.push("cart_synced")}var G=!1;(6440<e.settings[r].id||e.settings[f].boldSUse)&&window.BOLD&&(BOLD.recurring_orders||BOLD.subscriptions)&&(G=!0,R||O.push("cart_synced")),sl9.nfec.event_hub.ListenToMulti(O,function(){var j=sl9.nfec.manager.locale.Get()||"*";if(!(R&&sl9.nfec.manager.cart.Get().isRecharge())&&!(G&&sl9.nfec.manager.cart.Get().isBoldS())){var L=-1;if(p){for(var V=!1,U=j.split(","),H=0;H<U.length;H++){for(var Q=p.length-1;0<=Q;Q--)if(p[Q]&&U[H].indexOf(p[Q])!=-1){L=Q,V=!0;break}if(V)break}if(k&&!V){var B=sl9.nfec.manager.country.Get(),F=k.split(",");for(Q=0;Q<F.length;Q++)if(F[Q].split("-").indexOf(B)!=-1){L=Q;break}}if(e.settings[_].m_custom)for(var z=e.settings[_].m_custom.split("\n"),M=0;M<z.length;M++){for(var E=[],W=z[M].split("|"),Y=0;Y<W.length;Y++)E.push(W[Y].trim());E[0]&&sl9.nfec.util.tpl.CustomTrans.push(E)}}if(-1<L){var et;for(et in e.settings[_])if(e.settings[_].hasOwnProperty(et)){var rt=e.settings[_][et].split("|"),ot=rt[L];ot||(ot=rt[0]||""),e.settings[_][et]=ot.trim()}nfec.manager.locale.MyLang=p[L]}if(nfec.manager.transl=e.settings[_],sl9.nfec.util.tpl.LangOffset=L,sl9.manager.offer.Add(e.offers),h.type!=nfec.consta.PageTypePostCheckout){if(sl9.nfec.event_hub.ListenTo("cart_empty",function(N,J){sl9.manager.dcode.Remove()},!0),!g)try{sl9.dcode.main.Start()}catch(N){console.log(N)}try{sl9.wholesale.main.Start()}catch(N){console.log(N)}try{sl9.bundle.main.Start()}catch(N){console.log(N)}try{sl9.sale.main.Start()}catch(N){console.log(N)}try{sl9.upsell.main.Start(m)}catch(N){console.log(N)}try{sl9.motivator.main.Start()}catch(N){console.log(N)}if(!g)try{sl9.loyal.main.Start()}catch(N){console.log(N)}if(setTimeout(sl9.common.promor.Start,1),setTimeout(sl9.currency.main.Start,1),!m){setTimeout(sl9.quickview.main.Start,1),setTimeout(sl9.rec.main.Start,1),setTimeout(sl9.label.main.Start,1),setTimeout(sl9.notify.main.Start,1),setTimeout(sl9.discount.main.Start,1),setTimeout(sl9.common.checkout.Start,1),setTimeout(sl9.common.track.Start,2);var at=function(){jQuery(".tdf_adjh").attr("style",""),jQuery(".tdf_adjh button").closest("div").attr("style",""),jQuery(".tdf_adjhp").each(function(){sl9.common.tpl.AdjustH(jQuery(this),"tdf_adjh")})};sl9.nfec.event_hub.ListenTo("window_resize",function(){at()}),sl9.nfec.event_hub.ListenTo("re_adjust_h",function(){at()}),sl9.nfec.event_hub.ListenTo("promo_updated",function(N,J){var tt=sl9.manager.draft_order.Get();if(!((!tt||!tt.has_discount)&&(!window.actSegment||!tt.getTotalItems()))){var K='<input type="hidden" name="return_to" value="'+nfec.main.PRo+'cart" />',nt=jQuery("#g-recaptcha");nt.length&&nt.after(K);var X=jQuery('form[action*="/account"]');if(X.length){X.find('[name="checkout_url"]').remove();var Z=X.find('[name="return_to"]'),it=Z.val();it&&it.indexOf("checkout")==-1||(Z.remove(),X.append(K))}}},!0),sl9.nfec.event_hub.ListenTo("select_variant",function(N,J){var tt=parseInt(J.els.val()),K=J.productels,nt=parseInt(K.data("product-id"));sl9.common.util.AddTrackFlag(K);var X=sl9.nfec.manager.product.FindByID(nt),Z=X.getVariantByID(tt);nfec.util.tool.SetAtt(K,"variant-id",Z.id),nfec.util.tool.SetAtt(K.find(".tdf_img_parent"),"vid",Z.id),K.find(".tdf_vertical_price").html(sl9.common.tpl.Render(sl9.common.snippet_pricehtm,{current_variant:Z})),sl9.common.product.CleanSoldout(K.find("button")),sl9.nfec.manager.product.GetByHandle(X.handle,function(it){var ft=parseInt(J.els.val()),ct=it.getVariantByID(ft);if(ct){var st=ct.image.mediumSrc();st&&K.find(".tdf_vertical_img").css("background-image","url("+st+")")}})}),setTimeout(function(){R&&sl9.nfec.event_hub.ListenTo("cart_updated",function(N,J){J.cart.isRecharge()&&nfec.platform.current.redirect.GoToCartPage()}),navigator.connection&&navigator.connection.saveData&&jQuery(".tdf_discount_icon").each(function(){var N=jQuery(this),J=N.css("background-image");J&&J.indexOf("nfec")!=-1&&N.css("background-image",J)})},1e3)}}else sl9.psale.main.Start()}})}};tdfEventHub.ListenToEvent("data_app"+sl9.struct.app.id,function(ev,data){if(data.offers){var keyBack=sl9.struct.consta.SettingTypeBack;if(data.settings[keyBack]&&data.settings[keyBack].js)try{eval(data.settings[keyBack].js)}catch(t){console.log(t)}handle(ev,data,"kCustomize","sales","oost")}},!0)}},sl9.bundle={},sl9.bundle.bundle_pricehtm={m:'<div><span>{{sl9.data.settings.8.total_price}}:&nbsp;</span> {_ if compare_at_price _}0{_ endif _} <span class="{_ if compare_at_price _}1{_ endif _}">{{price.toCurrency}}</span></div>{_ if discountable _}2{_ endif _}',subs:['<span class="tdf_price_original">{{compare_at_price.toCurrency}} </span>',"tdf_price_sales","{{ include sl9.common.snippet_discountable }}"]},sl9.bundle.select_for_bundle_btnhtm={m:'<button type="button" class="tdf_cta_btn tdf_select_for_bundle tdfe" data-e="select_for_bundle" data-group="{{group_id}}" data-offer="{{offer_id}}"> {{sl9.data.settings.8.select_for_bundle}}</button>',subs:[]},sl9.bundle.snippet_bundle_producthtm={m:"{{ assign product = products.{{{product_id}}} }}{{ assign variant = product.variantMap.{{{variant_id}}} }}{_ if ! display_id _}7{_ endif _}{_ if display_id == sl9.struct.consta.BundleStyleDetail || display_id == sl9.struct.consta.BundleStyleScrolless _}8{_ endif _}{_ if display_id == sl9.struct.consta.BundleStyleAmz _}9{_ endif _}",subs:['checked="checked" ',"{{sl9.data.settings.8.more}}{_ else _}{{variant.getTitle}}","tdf_hidden",'selected="selected"','checked="checked" ',"tdfe{_ else _}tdf_current_item",' <option value="{{vardata.id}}" {_ if vardata.id == variant_id _}3{_ endif _}>{{vardata.getTitle}}</option> ','<div class="tdf_bundle_img tdfe" style="background-image:url({{variant.image.mediumSrc}})" data-handle="{{product.handle}}" data-v="{{variant_id}}" data-e="click_bundle_product" title="{{product.getTitle.toInput}}"></div><div class="tdf_checkbox_container"><label class="tdf_checkbox_wrapper"><input class="tdf_checkbox tdfe" data-e="check_bundle_product" data-et="change" type="checkbox" {_ if ! is_uncheck _}0{_ endif _}data-product-id="{{product_id}}" data-variant-id="{{variant_id}}"><span class="tdf_checkmark"></span></label></div><div class="tdf_bundle_more_option tdfe" data-handle="{{product.handle}}" data-v="{{variant_id}}" data-e="click_bundle_product"><a href="javascript:;">{_ if is_default_variant _}1{_ endif _}</a></div>','<div class="tdf_vertical_product" data-product-id="{{product_id}}"><div class="tdf_bundle_img tdfe" style="background-image:url({{variant.image.mediumSrc}})" data-handle="{{product.handle}}" data-v="{{variant_id}}" data-e="click_bundle_product" title="{{product.getTitle.toInput}}"></div><div class="tdf_vertical_name tdfe" data-handle="{{product.handle}}" data-v="{{variant_id}}" data-e="click_bundle_product"><h4 class="tdf_vertical_title" title="{{product.getTitle.toInput}}">{{product.getTitle}}</h4></div><div class="tdf_vertical_variants {_ if product.variants.length < 2 _}2{_ endif _}"><div class="tdf_select_box"><select class="tdf_select_input tdfe" data-e="bundle_select_variant" data-et="change"> {_ for v,vardata in variants _}6{_ endfor _} </select><span class="tdf_select_icon"></span><div class="tdf_select_backdrop"></div></div></div><div class="tdf_bundle_item_bottom"><div class="tdf_checkbox_container"><label class="tdf_checkbox_wrapper"><input class="tdf_checkbox tdfe" data-e="check_bundle_product" data-et="change" type="checkbox" {_ if ! is_uncheck _}4{_ endif _}data-product-id="{{product_id}}" data-variant-id="{{variant_id}}"><span class="tdf_checkmark"></span></label></div><div class="tdf_vertical_price"> {{variant.price.toCurrency}} </div></div></div>','<div class="tdf_bundle_img {_ if current_pid != product_id _}5{_ endif _}" style="background-image:url({{variant.image.mediumSrc}})" data-handle="{{product.handle}}" data-v="{{variant_id}}" data-e="go_bundle_product" title="{{product.getTitle.toInput}}"></div>']},sl9.bundle.snippet_bundle_titlehtm={m:'{{ assign product = products.{{{product_id}}} }}{{ assign variant = product.variantMap.{{{variant_id}}} }}<div class="tdf_vertical_product" data-product-id="{{product_id}}"><span class="tdf_checkbox_container"><label class="tdf_checkbox_wrapper"><input class="tdf_checkbox tdfe" data-e="check_bundle_product_amz" data-et="change" type="checkbox" {_ if ! is_uncheck _}0{_ endif _}data-product-id="{{product_id}}" data-variant-id="{{variant_id}}"><span class="tdf_checkmark"></span></label></span><span class="tdf_vertical_name {_ if current_pid != product_id _}1{_ endif _}" data-handle="{{product.handle}}" data-v="{{variant_id}}" data-e="go_bundle_product"><h4 class="" title="{{product.getTitle.toInput}}">{{product.getTitle}}</h4></span><span class="tdf_vertical_variants {_ if product.variants.length < 2 _}2{_ endif _}"><span><select class="tdf_select_input tdfe" data-e="bundle_select_variant" data-et="change"> {_ for v,vardata in variants _}4{_ endfor _} </select></span></span><span class="tdf_vertical_price">{{variant.price.toCurrency}}</span></div>',subs:['checked="checked" ',"tdfe{_ else _}tdf_current_item","tdf_hidden",'selected="selected"',' <option value="{{vardata.id}}" {_ if vardata.id == variant_id _}3{_ endif _}>{{vardata.getTitle}}</option> ']},sl9.bundle.tplhtm={m:'<hr><div class="tdf_bundle_content tdf_nonpopup tdf_bundle_style_{{display_id}}" data-id="{{id}}">	{_ if hasMessage _}0{_ endif _}	<div><div class="tdf_bundle_product"><div class="{_ if display_id != sl9.struct.consta.BundleStyleAmz _}1{_ endif _}"> {{ assign is_default_variant = 1 }} {_ for g,product_group in product_groups _}3{_ endfor _} </div></div><div class="tdf_bundle_left"><div class="tdf_bundle_price"></div><button type="button" class="tdf_normal_btn tdfe" data-e="bundle_add_all"> {{sl9.data.settings.8.add_all}} </button></div></div>	{_ if display_id == sl9.struct.consta.BundleStyleAmz _}5{_ endif _}</div>',subs:['	<div class="tdf_bundle_message"><h2>{{message.toTranslate}}</h2></div>	',"tdf_bundle_product_container",' <span class="tdf_plus_icon"></span> ',' {_ if g != 0 _}2{_ endif _} <div id="tdf_bundle_group_{{id}}_{{g}}" class="tdf_bundle_product_item tdf_bundle_product_item_1" data-product-group="{{g}}"> {{ assign product_id = product_group.product_id }} {{ assign variants = product_group.variants }} {{ assign variant_id = product_group.variants.0.id }} {{ include sl9.bundle.snippet_bundle_product }} </div> ',' <div class="tdf_bundle_product_item tdf_bundle_product_item_2" data-product-group="{{g}}"> {{ assign product_id = product_group.product_id }} {{ assign variants = product_group.variants }} {{ assign variant_id = product_group.variants.0.id }} {{ include sl9.bundle.snippet_bundle_title }} </div> ','	<div class="tdf_bundle_title"> {{ assign is_default_variant = 1 }} {_ for g,product_group in product_groups _}4{_ endfor _}	</div>	']},sl9.bundle.promo={AddBundle:function(t,e){if(t.discount.isValid()&&!(t.product_groups.length>e.length)){for(var n=sl9.manager.bundles.Get(),i=new sl9.model.bundle,o=0;o<e.length;o++){var r=new sl9.model.bundle_item;r.product_id=e[o].product_id,r.variant_id=e[o].variant_id,i.items.push(r)}i.offer_id=t.id;var c=n.addItem(i);return sl9.manager.bundles.Set(n),c}},Noti:function(t){var e=sl9.struct.consta.OfferTypeBundle;if(!sl9.manager.draft_order.Get().free_ship||t.discount.type_id!=sl9.nfec.consta.DiscountTypeFreeShip){e=sl9.struct.consta.OfferTypeBundle;var n=new sl9.model.promo_item;if(n.discount_type=t.discount.type_id,n.discount_value=t.discount.value,n.offer_type_id=e,n.offer_id=t.id,t.discount.type_id==sl9.nfec.consta.DiscountTypeFreeGift){var i=sl9.manager.promo.Get(),o=new sl9.manager.gifter;o.init(i),o.serve(e,t,n)}var r=sl9.common.tpl.Render(sl9.notify.snippet_product_discountinghtm,{promoItem:n,countBundleItems:t.product_groups.length});sl9.nfec.event_hub.Trigger("notify_discount_msg",{content:r,is_gifted:1})}},HandlePromo:function(t){var e,n,i=sl9.nfec.manager.cart.GetState(),o=sl9.nfec.manager.cart.GetState(),r=sl9.struct.consta.OfferTypeBundle,c=sl9.manager.promo.Get(),a=0,f=0,l=sl9.manager.bundles.Get(),_=sl9.manager.offer.List(r),u=i.getProductVariantMap(),p=i.getAllTrackVariantIDs(),h={};_.sort(function(j,L){return j.product_groups.length>L.product_groups.length?-1:j.product_groups.length<L.product_groups.length?1:0});t:for(var m=0;m<_.length;m++)if((e=_[m]).discount.isValid()&&!e.isAI()){h[e.id]=[];for(var g=0;g<e.product_groups.length;g++){var v=e.product_groups[g];if(h[e.id][g]=[],v.vids.length)for(var y=0;y<v.vids.length;y++)p.indexOf(v.vids[y])!=-1&&h[e.id][g].push(v.vids[y]);else for(y=0;y<v.ids.length;y++)u[v.ids[y]]&&(h[e.id][g]=h[e.id][g].concat(u[v.ids[y]]));if(!h[e.id][g].length){h[e.id]=null;continue t}}}t:for(m=l.items.length-1;0<=m;m--)if(n=l.items[m],e=sl9.manager.offer.Get(r,n.offer_id)){if(!n.is_auto)if(e.isAI()||n.isValid(h[n.offer_id])){var w=[];for(g=0;g<n.items.length;g++){if(k=n.items[g],!(T=i.findItemByVariant(k.product_id,k.variant_id))){for(y=0;y<w.length;y++)i.addOneItem(w[y]),o.addOneItem(w[y]);l.removeItem(n.id);continue t}(T=jQuery.extend({},T)).quantity=1,i.removeOneItem(T),o.removeOneItem(T),w.push(T)}}else l.removeItem(n.id)}else l.removeItem(n.id);t:for(m=l.items.length-1;0<=m;m--)if((n=l.items[m]).is_auto)if(n.isValid(h[n.offer_id])){for(w=[],g=0;g<n.items.length;g++){var T;if(k=n.items[g],!(T=o.findItemByVariant(k.product_id,k.variant_id))){for(y=0;y<w.length;y++)o.addOneItem(w[y]);l.removeItem(n.id);continue t}(T=jQuery.extend({},T)).quantity=1,o.removeOneItem(T),w.push(T)}a+=n.items.length}else l.removeItem(n.id);var q=function(){var j=new sl9.model.promo_item;return j.offer_type_id=r,j.offer_id=e.id,j.app_id=sl9.struct.app.id,j.quantity=1,j};p=i.getAllTrackVariantIDs();var S,k,D=function(j,L){var V,U=[],H=j.length;t:for(var Q=0;Q<H;Q++){V=Q,L&&(V=H-Q-1);for(var B=0;B<j[V].length;B++){var F=j[V][B],z=p.indexOf(F);if(z!=-1){U.push(i.findItemByVariantID(F)),p.splice(z,1);continue t}}for(var M=0;M<U.length;M++)p.push(U[M].variant_id);return}return L&&U.reverse(),U},I=[];if(!sl9.main.GetData("settings",sl9.struct.consta.SettingTypeBundle,"no_auto_bun")){for(m=0;m<_.length;m++)if(h[(e=_[m]).id]&&!(p.length<h[e.id].length)){var C=D(h[e.id]);if(C||(C=D(h[e.id],1)),C){for(f+=e.product_groups.length,(S=new sl9.model.bundle).offer_id=e.id,S.is_auto=1,g=0;g<C.length;g++)(k=new sl9.model.bundle_item).product_id=C[g].product_id,k.variant_id=C[g].variant_id,S.items.push(k);I.push(S),m--}}if(a<f){for(m=l.items.length-1;0<=m;m--)(n=l.items[m]).is_auto&&l.removeItem(n.id);for(m=0;m<I.length;m++)n=I[m],l.addItem(n),sl9.common.track.AddAction(sl9.struct.consta.ActionTrackAdd,r,n.offer_id,n.getVarIDs().join("_"),i.token,1)}}i=sl9.nfec.manager.cart.Get();var O=new sl9.manager.gifter;for(O.init(c),m=0;m<l.items.length;m++)if(n=l.items[m],(e=sl9.manager.offer.Get(r,n.offer_id)).discount.isValid())switch((G=q()).bundle_id=n.id,G.discount_type=e.discount.type_id,G.discount_value=e.discount.value,e.discount.type_id){case sl9.nfec.consta.DiscountTypeFreeShip:t.addItem(G);break;case sl9.nfec.consta.DiscountTypeFreeGift:if(O.serve(r,e,G))continue;t.addItem(G);break;case sl9.nfec.consta.DiscountTypeValue:var P=0;for(g=0;g<n.items.length;g++)k=n.items[g],P+=(A=i.findItemByVariant(k.product_id,k.variant_id)).price;var R=e.discount.value;for(g=0;g<n.items.length;g++){k=n.items[g];var A=i.findItemByVariant(k.product_id,k.variant_id);(G=q()).discount_type=e.discount.type_id,G.bundle_id=n.id,g==n.items.length-1?G.discount_value=R:(G.discount_value=Math.round(A.price*e.discount.value*100/P)/100,R-=G.discount_value),G.price=A.price,G.product_id=k.product_id,G.variant_id=k.variant_id,t.addItem(G)}break;case sl9.nfec.consta.DiscountTypePercent:for(g=0;g<n.items.length;g++){k=n.items[g];var G;A=i.findItemByVariant(k.product_id,k.variant_id),(G=q()).bundle_id=n.id,G.discount_type=e.discount.type_id,G.discount_value=e.discount.value,G.price=A.price,G.product_id=k.product_id,G.variant_id=k.variant_id,t.addItem(G)}}sl9.manager.bundles.Set(l)}},sl9.bundle.main={Start:function(){if(!(sl9.nfec.util.tool.IsTabletOrSmaller()&&sl9.main.GetData("settings",sl9.struct.consta.SettingTypeBundle,"no_mobile"))){var t=sl9.struct.consta.OfferTypeBundle;sl9.bundle.main.formatOffers();var e=function(c,a,f){var l=jQuery('.tdf_bundle_content[data-id="'+c+'"]');l.find('.tdf_bundle_product_item_1[data-product-group="'+a+'"]').html(sl9.common.tpl.Render(sl9.bundle.snippet_bundle_producthtm,f)),l.find('.tdf_bundle_product_item_2[data-product-group="'+a+'"]').html(sl9.common.tpl.Render(sl9.bundle.snippet_bundle_titlehtm,f))};sl9.nfec.event_hub.ListenTo("bundle_hide_variant_select",function(c,a){setTimeout(function(){jQuery(".tdf_bundle_content.tdf_bundle_style_1").each(function(){var f=jQuery(this).find(".tdf_vertical_product"),l=0;f.each(function(){var _=jQuery(this).height();l<_&&(l=_)}),l&&f.each(function(){var _=jQuery(this);_.height()<l&&_.css("height",l+24+"px")})}),jQuery(".tdf_bundle_content.tdf_bundle_style_5").each(function(){var f=jQuery(this),l=f.find(".tdf_vertical_product"),_={},u=f.attr("perow"),p=0,h=0;l.each(function(){var m=jQuery(this).height();(!_[h]||m>_[h])&&(_[h]=m),++p==u&&(h++,p=0)}),h=p=0,l.each(function(){var m=jQuery(this);m.height()<_[h]&&m.css("height",_[h]+24+"px"),++p==u&&(h++,p=0)})})},300)});var n=sl9.nfec.platform.current.page.Detect(),i=[];jQuery(".tdfPlaceBundle").each(function(){var c=jQuery(this).data("offer-id");c&&(c=parseInt(c),i.push(c))}),n.type!=sl9.nfec.consta.PageTypeProduct||i.length?sl9.bundle.main.run(i):sl9.nfec.event_hub.ListenTo("product_data_ava_synced",function(c,a){sl9.bundle.main.run([])},!0),sl9.nfec.event_hub.ListenTo("go_bundle_product",function(c,a){sl9.nfec.platform.current.redirect.GoToProductPage(a.els.data("handle"),a.els.data("v"))}),sl9.nfec.event_hub.ListenTo("click_bundle_product",function(c,a){var f=a.els.closest(".tdf_bundle_content"),l=parseInt(f.data("id")),_=a.els.closest(".tdf_bundle_product_item"),u=parseInt(_.data("product-group")),p=sl9.manager.offer.Get(t,l).product_groups[u];sl9.nfec.event_hub.Trigger("show_quick_view",{is_custom_cta:1,not_show_qty:1,not_show_normal_cta_if_premium:1,custom_cta:sl9.common.tpl.Render(sl9.bundle.select_for_bundle_btnhtm,{offer_id:l,group_id:u}),current_variant_id:parseInt(a.els.data("v")),handle:a.els.data("handle"),product_ids:p.ids,vids:p.vids})});var o=function(c,a,f,l){var _=sl9.manager.offer.Get(t,c),u=(jQuery('.tdf_bundle_content[data-id="'+c+'"]'),_.product_groups[a]),p=sl9.nfec.manager.product.FindByID(f);e(c,a,{product_id:f,variant_id:l,variant:p.getVariantByID(l),display_id:_.display_id,variants:p.filterVars(u.vids)}),sl9.bundle.main.renderBundlePrice(c)},r=function(c){var a=parseInt(c.data("offer")),f=parseInt(c.data("group")),l=c.closest(".tdf_qv_content");l.length||(l=c.closest(".tdf_products_vertical_content"));var _=parseInt(l.data("product-id")),u=parseInt(l.data("variant-id"));o(a,f,_,u)};sl9.nfec.event_hub.ListenTo("update_qv_variant",function(c,a){var f=a.els.closest(".tdf_qv_content").find(".tdf_select_for_bundle");f.length&&r(f)}),sl9.nfec.event_hub.ListenTo("bundle_select_variant",function(c,a){var f=a.els.closest(".tdf_bundle_content"),l=parseInt(f.data("id")),_=a.els.closest(".tdf_vertical_product"),u=a.els.closest(".tdf_bundle_product_item"),p=parseInt(_.data("product-id")),h=sl9.nfec.manager.product.FindByID(p);sl9.nfec.manager.product.GetByHandle(h.handle,function(m){o(l,parseInt(u.data("product-group")),p,parseInt(a.els.val()))})}),sl9.nfec.event_hub.ListenTo("select_for_bundle",function(c,a){r(a.els),sl9.nfec.event_hub.Trigger("bundle_hide_variant_select",{}),sl9.nfec.event_hub.Trigger("close_quick_view",{})}),sl9.nfec.event_hub.ListenTo("store_form_change_variant",function(c,a){if(a.variant_id){var f=sl9.nfec.manager.product.FindByID(a.product_id),l=f.getVariantByID(a.variant_id);l&&jQuery(".tdf_bundle_content").each(function(){var _=jQuery(this),u=parseInt(_.data("id")),p=sl9.manager.offer.Get(t,u),h=_.find(".tdf_checkbox"),m=!1;h.each(function(){var g=jQuery(this),v=g.closest(".tdf_bundle_product_item"),y=parseInt(v.data("product-group")),w=p.product_groups[y];w.vids&&w.vids.length&&w.vids.indexOf(a.variant_id)==-1||g.data("product-id")==a.product_id&&g.data("variant-id")!=a.variant_id&&(m=!0,e(u,y,{product_id:a.product_id,variant_id:a.variant_id,variant:l,display_id:p.display_id,variants:f.filterVars(w.vids)}))}),m&&sl9.bundle.main.renderBundlePrice(u)})}},!0,!0),sl9.nfec.event_hub.ListenTo("check_bundle_product_amz",function(c,a){var f=a.els.closest(".tdf_bundle_content"),l=a.els.closest(".tdf_bundle_product_item_2").data("product-group"),_=f.find('.tdf_bundle_product_item_1[data-product-group="'+l+'"]'),u=_.next(".tdf_plus_icon");u.length||(u=_.prev(".tdf_plus_icon")),a.els.is(":checked")?(_.fadeIn(),u.fadeIn()):(_.fadeOut(),u.fadeOut()),sl9.nfec.event_hub.Trigger("check_bundle_product",a)}),sl9.nfec.event_hub.ListenTo("check_bundle_product",function(c,a){var f=a.els.closest(".tdf_bundle_content"),l=parseInt(f.data("id"));sl9.bundle.main.renderBundlePrice(l)}),sl9.nfec.event_hub.ListenTo("bundle_add_all",function(c,a){for(var f=a.els.closest(".tdf_bundle_content"),l=parseInt(f.data("id")),_=sl9.bundle.main.getSelectingProductVariant(l),u=[],p=0,h=_.length;p<h;p++)_[p].quantity=1,u.push(_[p].variant_id);if(_.length){sl9.nfec.util.tpl.AddBtnLoading(a.els);var m=sl9.manager.offer.Get(t,l),g=m.discount.type_id==sl9.nfec.consta.DiscountTypeFreeGift,v=sl9.bundle.promo.AddBundle(m,_);v&&!g&&(window.lastBundleT=1),sl9.nfec.platform.base.cart_api.AddItems(_,function(y){if(y){v&&!g&&sl9.bundle.promo.Noti(m),sl9.nfec.util.tpl.RemoveBtnLoading(a.els),a.els.html(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"added_successfully")).attr("disabled","disabled");var w=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeBundle,"coa"),T=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"enable_gift_popup"),q=function(S){var k=!1;sl9.nfec.event_hub.ListenTo("close_popup",function(){S()}),sl9.nfec.event_hub.ListenTo("showing_gift",function(){k=!0}),setTimeout(function(){k||S()},2200)};switch(sl9.common.track.AddAction(sl9.struct.consta.ActionTrackAdd,sl9.struct.consta.OfferTypeBundle,l,u.join("_"),y.token,1,function(){},!0),w){case sl9.struct.consta.ClickGoCart:if(T)return sl9.nfec.start.redirect.Is2Cart=1,void q(sl9.nfec.platform.current.redirect.GoToCartPage);setTimeout(function(){sl9.nfec.platform.current.redirect.GoToCartPage()},2200);break;case sl9.struct.consta.ClickStay:if(setTimeout(function(){a.els.html(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"add_all")).removeAttr("disabled")},3e3),T)return void q(function(){});setTimeout(function(){sl9.nfec.event_hub.ListenTo("need_reload_page",function(){window.location.reload(!0)},!0)},3e3);break;default:if(T)return sl9.main.Data.settings[sl9.struct.consta.SettingTypeOther].enable_gift_ck=1,void q(sl9.common.checkout.Process);setTimeout(function(){sl9.common.checkout.Process()},2200)}}else sl9.nfec.util.tpl.RemoveBtnLoading(a.els),sl9.common.product.NotiSelectOther(),v&&sl9.manager.bundles.RemoveBunlde(v)})}}),sl9.nfec.event_hub.ListenTo("window_resize",function(){sl9.bundle.main.autosize()})}},formatOffers:function(){var t=sl9.struct.consta.OfferTypeBundle,e=sl9.manager.offer.List(t);e.sort(function(n,i){var o=n.trigger.compare(i.trigger);if(o)return o;if(n.discount.isValid()){if(!i.discount.isValid())return-1}else if(i.discount.isValid())return 1;return n.id>i.id?-1:1}),sl9.manager.offer.Set(t,e)},run:function(t){var e=sl9.nfec.platform.current.page.Detect(),n=0;e.type==sl9.nfec.consta.PageTypeProduct&&(n=e.payload.id);var i,o,r="tdfPlaceBundle",c=sl9.manager.offer.List(sl9.struct.consta.OfferTypeBundle),a=[],f=sl9.struct.consta.GroupPriority;t:for(v in c)if(c.hasOwnProperty(v)&&(i=c[v]).display_id!=sl9.struct.consta.BundleStyleNone){if(t.indexOf(i.id)==-1){if(n){for(var l=0;l<i.trigger.product_groups.length;l++)if(!(o=i.trigger.product_groups[l]).is_sub&&!(0<l&&o.type_id==sl9.struct.consta.GroupTypeAI)&&o.isIn(n)){i.trigger_type_id=o.type_id;break}}}else i.trigger_type_id=c[v].trigger.product_groups[0].type_id;if(i.trigger_type_id!==void 0){var _=!1;i.trigger_type_id==sl9.struct.consta.GroupTypeAI&&(_=!0);var u,p=(T=i.product_groups).length;for(l=0;l<p;l++){switch(u=!1,(o=T[l]).type_id){case sl9.struct.consta.GroupTypeManual:case sl9.struct.consta.GroupTypeAuto:i.product_groups[l].ids&&i.product_groups[l].ids.indexOf(n)!==-1&&(u=!0);break;default:_?(o.ids=sl9.common.rexy.GetSame(),_=!1):o.ids=sl9.common.rexy.GetCross(),u=!0,n&&o.ids.indexOf(n)===-1&&o.ids.push(n)}if(u||o.ids&&(o.ids=sl9.nfec.util.tool.Shuffle(o.ids)),!o.ids.length)continue t}a.push(c[v])}}if(a.length){a.sort(function(B,F){var z=t.indexOf(B.id),M=t.indexOf(F.id);if(z<M)return-1;if(M<z||!B.message)return 1;if(!F.message)return-1;var E=f.indexOf(B.trigger_type_id),W=f.indexOf(F.trigger_type_id);return W<E?-1:E<W?1:0});for(var h=a.length,m=[],g=[],v=0;v<h;v++)if(g.indexOf(a[v].id)==-1)for(m.push(a[v]),l=v+1;l<h;l++)a[v].message==a[l].message&&(a[l].message="",m.push(a[l]),g.push(a[l].id));30<h&&(h=30);var y=sl9.struct.consta.SettingTypeBundle;if(n){var w=sl9.main.GetData("settings",y,"per_page");w&&(h=w)}a=a.slice(0,h);var T,q=[],S=!1;for(v=0,h=a.length;v<h;v++){for(p=(T=a[v].product_groups).length,a[v].product_ids=[],l=0;l<p;l++){var k=T[l].ids.length,D=T[l].ids[0];if(T[l].ids.indexOf(n)!=-1&&a[v].product_ids.indexOf(n)==-1)D=n;else for(var I=0;I<7;I++){var C=Math.floor(Math.random()*k);if(D=T[l].ids[C],a[v].product_ids.indexOf(D)==-1)break}a[v].product_ids.push(D)}for(l=0;l<p;l++){var O=a[v].product_ids[l];T[l].product_id=O;var P=sl9.nfec.manager.product.FindByID(O);T[l].variants=P.filterVars(T[l].vids),T[l].vids&&T[l].vids.length&&q.push(a[v].id+"_"+l)}a[v].display_id==sl9.struct.consta.BundleStyleAmz&&(S=!0)}var R=[];if(jQuery("."+r).each(function(){var B=jQuery(this).data("offer-id");if(B&&(B=parseInt(B),R.indexOf(B)==-1))for(var F=0;F<a.length;F++)a[F].id==B&&(R.indexOf(B)==-1&&R.push(B),jQuery(this).after('<div class="tdf_bundle tdf_container">'+sl9.common.tpl.Render(sl9.bundle.tplhtm,a[F])+"</div>"))}),R.length&&jQuery(".tdf_bundle").last().append("<hr>"),jQuery("."+r).each(function(){if(!(jQuery(this).data("offer-id")||R.length>=a.length)){for(var B="",F=0;F<a.length;F++)R.indexOf(a[F].id)==-1&&(R.push(a[F].id),B+=sl9.common.tpl.Render(sl9.bundle.tplhtm,a[F]));jQuery(this).after('<div class="tdf_bundle tdf_container">'+B+"<hr></div>")}}),R.length<a.length){var A,G="",j="";for(I=0;I<a.length;I++)R.indexOf(a[I].id)==-1&&(R.push(a[I].id),A=sl9.common.tpl.Render(sl9.bundle.tplhtm,a[I]),a[I].display_id==sl9.struct.consta.BundleStyleAmz&&sl9.nfec.manager.setting.Data.id<6356?j+=A:G+=A);if(G){var L;(L=jQuery(".tdfBundleWrap").first()).length||(L=nfec.platform.current.element.GetAddCartForms(!0)),L.append('<div class="tdf_bundle tdf_container">'+G+"<hr></div>")}j&&(j='<div class="tdf_bundle tdf_container">'+j+"<hr></div>",(L=jQuery(".tdfBundleWrap").first()).length||(L=jQuery(".endOfLayoutContentX").first().parent()),L.append(j))}var V=function(B,F){for(var z=0,M=[],E=0;E<F.ids.length&&(F.ids[E]==F.product_id||(M.push(F.ids[E]),M.length!=2));E++);if(M.length){M.push(F.product_id);var W=function(){var Y=sl9.nfec.manager.product.FindByID(M[z]);B.css("background-image","url("+Y.image.mediumSrc()+")"),z?B.fadeIn(1300,function(){z>=M.length-1||B.fadeOut(1300,function(){z++,W()})}):B.fadeOut(1300,function(){z++,W()})};W()}},U=jQuery(".tdf_bundle_product_item .tdf_bundle_img"),H=0;if(!sl9.main.GetData("settings",y,"oneitem")&&!q.length&&!S)for(I=0;I<a.length;I++)for(var Q=0;Q<a[I].product_groups.length;Q++)V(U.eq(H),a[I].product_groups[Q]),H++;jQuery(".tdf_bundle_product_container").each(function(){sl9.nfec.util.tpl.AutoSlide(jQuery(this),"scrollLeft",!0)}),setTimeout(function(){for(var B=0;B<h;B++)sl9.bundle.main.renderBundlePrice(a[B].id),sl9.common.track.AddImpression(sl9.struct.consta.OfferTypeBundle,a[B].id);sl9.bundle.main.autosize()},60),setTimeout(function(){for(var B=0;B<q.length;B++)jQuery("#tdf_bundle_group_"+q[B]).find(".tdf_select_input").trigger("change");sl9.nfec.event_hub.Trigger("bundle_hide_variant_select",{})},600)}},autosize:function(){jQuery(".tdf_bundle_content.tdf_bundle_style_5").each(function(){for(var t=jQuery(this),e=t.find(".tdf_bundle_product_item"),n=t.width(),i=e.length,o=2,r=4;1<r;r--)if(!(i<r||i%r==1||n/r<120)){o=r;break}n-=20*o;var c=Math.floor(n/o);e.outerWidth(c),t.attr("perow",o)})},getSelectingProductVariant:function(t){var e=jQuery('.tdf_bundle_content[data-id="'+t+'"]'),n=[];return e.find(".tdf_bundle_product_item .tdf_checkbox").each(function(){var i=jQuery(this);if(i.is(":checked")){var o=parseInt(i.data("variant-id")),r=parseInt(i.data("product-id")),c=sl9.nfec.manager.product.FindByID(r);o||(o=c.variants[0].id),n.push({product:c,product_id:r,variant_id:o})}}),n},renderBundlePrice:function(t){for(var e,n=jQuery('.tdf_bundle_content[data-id="'+t+'"]'),i=sl9.bundle.main.getSelectingProductVariant(t),o=0,r=0,c=0,a=0,f=0,l=i.length;f<l;f++)r+=(e=i[f].product.getVariantByID(i[f].variant_id)).price,a+=e.display_old_price()||e.price;o=r;var _=null,u=null,p=sl9.manager.offer.Get(sl9.struct.consta.OfferTypeBundle,t);if(p.discount.isValid()&&p.product_groups.length==i.length){(_=new sl9.nfec.model.discountable).app_id=sl9.struct.app.id,_.discount_type=p.discount.type_id,_.discount_value=p.discount.value,_.is_cart=!1,_.offer_id=p.id,_.offer_type_id=sl9.struct.consta.OfferTypeBundle;var h=_.calculateDiscountedPrice(o);h<o&&(c=o-h,u=r,o=h)}if(r){var m=0,g=0;for(f=0,l=i.length;f<l;f++)g=(e=i[f].product.getVariantByID(i[f].variant_id)).price*c/r,moreD=e.price-e.display_price()-g,0<moreD&&(m+=moreD);m&&(u=r,o-=m)}o<a&&(!u||u<a)&&(u=a),n.find(".tdf_bundle_price").html(sl9.common.tpl.Render(sl9.bundle.bundle_pricehtm,{price:o,compare_at_price:u,discountable:_}))}},sl9.currency={},sl9.currency.main={Start:function(){var t=sl9.struct.consta.SettingTypeOther,e=function(n){for(var i=nfec.manager.setting.GetCurrency(),o=sl9.main.GetData("settings",t,"m_currency_codes"),r=nfec.manager.currency.GetSelected(),c=(o=r+","+i+","+o).split(","),a=[],f=[],l=0;l<c.length;l++){var _=sl9.nfec.manager.currency.GetFlag(c[l]);if(_&&a.indexOf(c[l])==-1){var u=c[l]==r?1:0;n&&!u||(a.push(c[l]),f.push({is_selected:u,code:c[l],flag:_}))}}return sl9.common.tpl.Render(sl9.currency.tplhtm,{currencies:f})};sl9.nfec.event_hub.ListenTo("currency_ready",function(){if(nfec.manager.currency.IsOn()&&sl9.main.GetData("settings",t,"m_currency_show")){var n=nfec.platform.current.page.Detect();if(!nfec.platform.base.page.IsInCheckout(n.type)){jQuery("body").first().append(e(!0));var i="#tdf_currency",o=jQuery(i)[0].offsetTop;jQuery(window).scroll(function(){window.pageYOffset>=o?jQuery(i).addClass("tdf_sticky"):jQuery(i).removeClass("tdf_sticky")})}}},!0),jQuery(document).on("click",function(n){if(!jQuery(n.target).closest("#tdf_currency").length){if(jQuery(".tdf_currency_div.tdf_hidden").length)return;jQuery(".tdf_currency_div").not(".tdf_currency_selected").addClass("tdf_hidden")}}),sl9.nfec.event_hub.ListenTo("currency_click",function(n,i){if(i.els.hasClass("tdf_currency_selected"))return jQuery(".tdf_currency_div").length==1&&jQuery("#tdf_currency").replaceWith(e()),jQuery(".tdf_currency_div.tdf_hidden").length?void jQuery(".tdf_currency_div").removeClass("tdf_hidden"):void jQuery(".tdf_currency_div").not(".tdf_currency_selected").addClass("tdf_hidden");for(var o=i.els.data("code"),r=[nfec.manager.setting.GetCurrency(),o],c=[],a=0;a<r.length;a++)sl9.nfec.manager.currency.Get(r[a],function(f){f.code&&(c.push(f.code),c.length==r.length&&(sl9.nfec.manager.currency.SetSelected(o),sl9.nfec.sync.currency.Render(1),jQuery("#tdf_currency").replaceWith(e())))})})}},sl9.currency.tplhtm={m:'<div id="tdf_currency" class="tdf_container"><div class="tdf_currency_container"> {_ for c,cur in currencies _}1{_ endfor _}	</div></div>',subs:["tdf_currency_selected{_ else _}tdf_hidden",' <div class="tdf_currency_div tdfe {_ if cur.is_selected _}0{_ endif _}" data-e="currency_click" data-code="{{cur.code}}"><a class="tdf_currency_item" href="javascript:;"><img src="{{cdnpath}}/fe/nfec/img/flag/{{cur.flag}}.png"><span class="tdf_currency_code">{{cur.code}}</span></a></div> ']},sl9.dcode={},sl9.dcode.cartlinkhtm={m:'<li class="breadcrumb__item breadcrumb__item--completed"><a class="breadcrumb__link" data-trekkie-id="breadcrumb_cart_link" href="{{proot}}cart">{{sl9.data.settings.8.cart}}</a><svg class="icon-svg icon-svg--color-adaptive-light icon-svg--size-10 breadcrumb__chevron-icon" aria-hidden="true" focusable="false"><use xlink:href="#chevron-right"></use></svg></li>',subs:[]},sl9.dcode.checkoutinputhtm={m:'<div class="order-summary__section order-summary__section--discount"><form class="edit_checkout animate-floating-labels" action="javascript:;" onsubmit="return"><div class="fieldset"><div class="field" id="tdf_ck_code_field"><div class="field__input-btn-wrapper"><label class="field__label field__label--visible" for="checkout_reduction_code">{{sl9.data.settings.8.input_discount_code}}</label><div class="field__input-wrapper"><input placeholder="{{sl9.data.settings.8.input_discount_code}}" class="field__input tdfe" data-et="input" data-e="ck_code_input" autocomplete="off" aria-required="true" size="30" type="text" id="tdf_extra_code"></div><button id="tdf_ck_code_btn" name="button" type="button" class="field__input-btn btn btn--disabled tdfe" aria-busy="false" disabled="disabled" data-e="ck_code_apply"><span class="btn__content visually-hidden-on-mobile" aria-hidden="true"> {{sl9.data.settings.8.apply}} </span><svg class="icon-svg icon-svg--size-16 btn__icon shown-on-mobile" aria-hidden="true" focusable="false"><svg id="arrow" width="100%" height="100%"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M16 8.1l-8.1 8.1-1.1-1.1L13 8.9H0V7.3h13L6.8 1.1 7.9 0 16 8.1z"></path></svg></svg></svg><svg class="icon-svg icon-svg--size-18 btn__spinner icon-svg--spinner-button" aria-hidden="true" focusable="false"><svg id="spinner-button" width="100%" height="100%"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M20 10c0 5.523-4.477 10-10 10S0 15.523 0 10 4.477 0 10 0v2c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8h2z"></path></svg></svg></svg></button></div></div></div></form> {_ if has_coupon _}0{_ endif _}</div>',subs:[' <div class="tags-list"><div class="tag"><form class="edit_checkout animate-floating-labels" accept-charset="UTF-8"><div class="tag__wrapper"><span class="tag__text"><span class="reduction-code"><svg class="icon-svg icon-svg--color-adaptive-light icon-svg--size-18 reduction-code__icon" aria-hidden="true" focusable="false"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"><path d="M17.78 3.09C17.45 2.443 16.778 2 16 2h-5.165c-.535 0-1.046.214-1.422.593l-6.82 6.89c0 .002 0 .003-.002.003-.245.253-.413.554-.5.874L.738 8.055c-.56-.953-.24-2.178.712-2.737L9.823.425C10.284.155 10.834.08 11.35.22l4.99 1.337c.755.203 1.293.814 1.44 1.533z" fill-opacity=".55"/><path d="M10.835 2H16c1.105 0 2 .895 2 2v5.172c0 .53-.21 1.04-.586 1.414l-6.818 6.818c-.777.778-2.036.782-2.82.01l-5.166-5.1c-.786-.775-.794-2.04-.02-2.828.002 0 .003 0 .003-.002l6.82-6.89C9.79 2.214 10.3 2 10.835 2zM13.5 8c.828 0 1.5-.672 1.5-1.5S14.328 5 13.5 5 12 5.672 12 6.5 12.672 8 13.5 8z"/></svg></svg><span class="reduction-code__text" style="text-transform:uppercase"> {{coupon_code}}</span></span></span> {{ include sl9.dcode.snippet_coderemove }} </div></form></div></div> ']},sl9.dcode.cartreturnhtm={m:'<a class="step__footer__previous-link" data-trekkie-id="previous_step_link" href="{{proot}}cart"><svg focusable="false" aria-hidden="true" class="icon-svg icon-svg--color-accent icon-svg--size-10 previous-link__icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="M8 1L7 0 3 4 2 5l1 1 4 4 1-1-4-4"></path></svg><span class="step__footer__previous-link-content">{{sl9.data.settings.8.cart}}</span></a>',subs:[]},sl9.dcode.invalidmessagehtm={m:'<form><div aria-atomic="true" aria-live="polite" class="notice notice--warning" role="status" tabindex="-1"><svg class="icon-svg icon-svg--size-24 notice__icon" aria-hidden="true" focusable="false"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 22"><path d="M15.286 2.386l7.91 13.857C25.01 19.423 23.65 22 20.16 22H3.84C.35 22-1.01 19.427.805 16.243l7.91-13.857c1.815-3.178 4.754-3.185 6.57 0zm-1.737.992c-1.05-1.838-2.05-1.837-3.1 0L2.54 17.235C1.468 19.122 1.93 20 3.84 20h16.32c1.91 0 2.374-.88 1.298-2.765l-7.91-13.857zM12 6.5c.552 0 1 .448 1 1V12c0 .552-.448 1-1 1s-1-.448-1-1V7.5c0-.552.448-1 1-1zm-1.5 10c0-.828.666-1.5 1.5-1.5.828 0 1.5.666 1.5 1.5 0 .828-.666 1.5-1.5 1.5-.828 0-1.5-.666-1.5-1.5z"></path></svg></svg><p class="notice__text">{{sl9.data.settings.8.email_no_match_code}}</p><button name="button" type="button" class="notice__close tdfe" data-e="ck_code_remove_warn"><svg class="icon-svg icon-svg--color-adaptive-lighter icon-svg--size-14 icon-svg--block" aria-hidden="true" focusable="false"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M15.1 2.3L13.7.9 8 6.6 2.3.9.9 2.3 6.6 8 .9 13.7l1.4 1.4L8 9.4l5.7 5.7 1.4-1.4L9.4 8"></path></svg></svg></button></div></form>',subs:[]},sl9.dcode.snippet_coderemovehtm={m:'<button type="button" class="tag__button tdfe" data-e="ck_code_remove"><svg class="icon-svg icon-svg--color-adaptive-dark icon-svg--size-12 icon-svg--block" aria-hidden="true" focusable="false"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"><path d="M1.5 1.5l10.05 10.05M11.5 1.5L1.45 11.55" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round"></path></svg></svg></button>',subs:[]},sl9.dcode.main={current:{},Start:function(){sl9.dcode.ckinput.Start()},save:function(){var t=new sl9.model.dcode;t.fromJSON(sl9.dcode.main.current),sl9.manager.dcode.Set(t)},HandleApply:function(t,e,n,i){sl9.nfec.util.request.Api({url:"2/dcode/find",method:"GET",data:{dcode:t},success:function(o){if(o.id){if(o.c=t,o.countries){var r=sl9.nfec.manager.country.Get();if(r!="*"){for(var c=!1,a=0;a<o.countries.length;a++){if(o.countries[a]=="*"){c=!0;break}if(r==o.countries[a]){c=!0;break}}if(!c)return void e();for(a=0;a<o.i_countries.length;a++)if(o.countries[a]==r)return void e()}}sl9.dcode.main.current=o,sl9.dcode.main.save(),n(o)}else e()},error:function(){e()},complete:function(){i()}},!0)}},sl9.dcode.snippet_invalidcodehtm={m:'<p class="field__message field__message--error tdf_invalid_message">{{sl9.data.settings.8.invalid_code}}</p>',subs:[]},sl9.dcode.ckinput={Start:function(){var t=sl9.nfec.platform.current.page.Detect();if(sl9.nfec.platform.base.page.IsInCheckout(t.type)){var e=jQuery(".logo"),n=jQuery(".step__footer__continue-btn");if(n.length){var i=window.location.href,o=i.indexOf("step=")!=-1;if(o&&i.indexOf("step=contact_information")!=-1&&i.indexOf("previous_step")==-1&&(o=!1),window.Shopify&&Shopify.Checkout&&Shopify.Checkout.step&&Shopify.Checkout.step!="contact_information"&&(o=!0),jQuery(".reduction-code").length||o||window.location.href.indexOf("is_tdf")!=-1||window.location.href.indexOf("step")!=-1){e.on("click",function(){window.location="/"}),e.css("cursor","pointer");var r=jQuery(".breadcrumb__link").first().attr("href");if((!r||r.indexOf("/cart")==-1)&&(sl9.nfec.event_hub.ListenTo("cart_synced",function(a,f){if(f.cart.getTotalAddeds()){var l=jQuery(".main__header .breadcrumb");if(l.length&&l.prepend(sl9.common.tpl.Render(sl9.dcode.cartlinkhtm,{})),!o){var _=n.closest(".step__footer");_.length&&_.append(sl9.common.tpl.Render(sl9.dcode.cartreturnhtm,{}))}}},!0),!o&&(jQuery("#checkout_buyer_accepts_marketing").prop("checked",!0),sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"enable_checkout_code")&&window.location.href.indexOf("is_tdf=2")==-1))){sl9.manager.dcode.Get(),sl9.nfec.event_hub.ListenTo("ck_code_remove",function(a,f){sl9.manager.dcode.Remove(1),sl9.common.checkout.Process()});var c=sl9.nfec.store.control.Get("ince");c&&(sl9.nfec.store.control.Remove("ince"),jQuery(".order-summary-toggle").click()),jQuery(".order-summary__section--discount").length?sl9.dcode.ckinput.handleGiftCart():sl9.dcode.ckinput.handleNone(),c&&jQuery(".order-summary__section--discount").prepend(sl9.common.tpl.Render(sl9.dcode.invalidmessagehtm,{})),sl9.nfec.event_hub.ListenTo("ck_code_remove_warn",function(a,f){jQuery(f.els).closest("form").remove()})}}else sl9.nfec.event_hub.ListenTo("cart_synced",function(a,f){f.cart.getTotalAddeds()&&sl9.manager.draft_order.Get().has_discount&&sl9.common.checkout.Process(!1,!0)},!0)}}},handleNone:function(){var t=sl9.manager.dcode.Get();sl9.nfec.event_hub.ListenTo("ck_code_input",function(e,n){var i=jQuery("#tdf_ck_code_btn"),o="btn--disabled",r="disabled";jQuery("#tdf_ck_code_field").removeClass("field--error"),jQuery(".tdf_invalid_message").remove(),jQuery(n.els).val()?i.removeClass(o).removeAttr(r):i.addClass(o).attr(r,r)}),jQuery(".order-summary__section.order-summary__section--product-list").after(sl9.common.tpl.Render(sl9.dcode.checkoutinputhtm,{has_coupon:t?1:0,coupon_code:t?t.code:""})),jQuery("#tdf_extra_code").on("keypress",function(e){e.keyCode==13&&(e.preventDefault(),sl9.nfec.event_hub.Trigger("ck_code_apply",{}))}),sl9.nfec.event_hub.ListenTo("ck_code_apply",function(e,n){var i=jQuery("#tdf_ck_code_btn"),o="btn--loading",r=jQuery("#tdf_extra_code").val()||"";if(r=r.trim()){i.addClass(o);var c=function(){jQuery("#tdf_ck_code_field").addClass("field--error").append(sl9.common.tpl.Render(sl9.dcode.snippet_invalidcodehtm,{}))};sl9.dcode.main.HandleApply(r,c,function(a){sl9.manager.dcode.PreCheckCode()?sl9.common.checkout.Process():c()},function(){i.removeClass(o)})}})},handleGiftCart:function(){var t=".edit_checkout .field__input-btn.btn",e=jQuery(t),n=e.closest(".field"),i=jQuery("#checkout_reduction_code"),o=jQuery('label[for="checkout_reduction_code"]'),r=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"input_discount_code");i.attr("placeholder",r),o.text(r);var c=sl9.manager.dcode.Get();c&&c.code&&jQuery(".tags-list>.tag").each(function(){var f=jQuery(this).find(".reduction-code__text");f.length&&(f.closest(".tag__wrapper").append(sl9.common.tpl.Render(sl9.dcode.snippet_coderemovehtm,{})),f.text(c.code))}),i.on("input",function(){var f="btn--disabled",l="disabled";n.removeClass("field--error"),jQuery(".tdf_invalid_message").remove(),jQuery(this).val()?e.removeClass(f).removeAttr(l):e.addClass(f).attr(l,l)});var a=function(){var f="btn--loading",l=i.val()||"";if(l=l.trim()){e.addClass(f);var _=function(){jQuery(t).closest("form").submit()};return sl9.dcode.main.HandleApply(l,_,function(u){sl9.manager.dcode.PreCheckCode()?sl9.common.checkout.Process():_()},function(){e.removeClass(f)}),!0}};e.attr("type","button"),e.on("click",function(){var f=jQuery(this).closest("form");a()||f.submit()}),i.on("keypress",function(f){if(f.keyCode==13){if(!a())return;f.preventDefault()}})}},sl9.common={},sl9.common.checkout={HasOffer:!1,CheckoutCurrency:"",IsCheckingOut:!1,BuyNow:!1,setCK:function(t,e){sl9.nfec.store.control.Set("ckf",t,186400,!0),e||(sl9.common.checkout.IsCKing=!0)},Start:function(){setTimeout(function(){sl9.common.checkout.handleBuyNow()},1),setTimeout(function(){sl9.common.checkout.handleBuyNow()},3e3),setTimeout(function(){sl9.common.checkout.handleBuyNow()},6e3),setTimeout(function(){sl9.common.checkout.handleBuyNow()},1e4),jQuery(document).ready(function(){sl9.common.checkout.handleBuyNow()}),sl9.nfec.event_hub.ListenTo("promo_updated",function(){sl9.common.checkout.handleCart(),sl9.common.checkout.handleScode(),sl9.common.checkout.handleRcode(),sl9.nfec.store.control.Get("rck")&&(sl9.nfec.store.control.Remove("rck"),sl9.common.checkout.Process())},!0,!0),sl9.nfec.event_hub.ListenTo("request_got_cart",function(){sl9.common.checkout.handleCart(),setTimeout(function(){sl9.common.checkout.handleCart()},900)});var t=!1,e=!1,n=function(){sl9.nfec.util.tool.WaitToLoad(["paypal"],function(){t||(t=!0,setTimeout(function(){sl9.common.checkout.handleCart()},200))})};n(),sl9.nfec.event_hub.ListenTo("cart_item_added_synced",function(i,o){e||t||(e=!0,n())}),sl9.nfec.event_hub.ListenTo("reload_cart",function(){setTimeout(function(){sl9.common.checkout.handleCart()},700)}),sl9.nfec.event_hub.ListenTo("cart_updated",function(){setTimeout(function(){sl9.common.checkout.handleCart()},750)}),sl9.common.checkout.prefillCartForm(),sl9.nfec.event_hub.ListenTo("cart_empty",function(i,o){sl9.nfec.store.control.Remove("ckf"),sl9.nfec.manager.gift.Remove()},!0),jQuery(".tdf-require-cb, .tdf-require-input").on("change",function(i){setTimeout(function(){sl9.common.checkout.handleBtn()},100)}),sl9.nfec.event_hub.ListenTo("ctotal_found",function(){sl9.common.checkout.handleCart()},!0),jQuery(document).on("click",".tdf_btn_ck",function(i){jQuery(i.target).data("ck_bound")||!jQuery(i.target).parent().length||jQuery(".tdf_upsell_checkout").length||sl9.common.checkout.preCheckout()}),jQuery(document).on("cart:rerendered",function(){sl9.common.checkout.handleCart()})},prefillCartForm:function(){var t=function(n){var i=sl9.nfec.manager.coupon.Get();if(i){var o=jQuery('input[name="discount"]');o.length?o.val(i):n.append('<input type="hidden" name="discount" value="'+i+'">')}},e=sl9.nfec.platform.current.element.GetCartForms();jQuery("body").on("submit",e,function(){t(jQuery(this))}),jQuery(document).on("click",".satcb_checkout_btn-holder,.tdf_discount_ck_btn",function(n){sl9.common.checkout.preCheckout()}),jQuery("body").on("click",'a[href*="/checkout"]:not(.tdf_btn_ck)',function(n){(sl9.manager.draft_order.Get().has_discount||sl9.common.checkout.HasOffer&&!sl9.common.checkout.IsClickedCheckoutBtn())&&(n.preventDefault(),sl9.common.checkout.preCheckout())}),t(jQuery(e))},preCheckout:function(t){var e=sl9.common.checkout.IsClickedCheckoutBtn(),n=nfec.manager.cart.Total||1;sl9.common.checkout.setCK(n),!sl9.common.checkout.HasOffer||e?sl9.common.checkout.Process(t,null,1):sl9.nfec.event_hub.Trigger("show_checkout_offer")},handleCart:function(){if(!nfec.IsDmodeNone){var t=jQuery(".additional-checkout-button,.dynamic-checkout__content"),e="additional-checkout-buttons";t.each(function(){var n=jQuery(this).parent();n.hasClass(e)||n.closest("."+e).length||n.find("form").length||n.addClass(e)}),jQuery("."+e).find(".paypalLight").each(function(){jQuery(this).siblings(".paypalLightBoxy").length||(jQuery(this).parent().css("position","relative"),jQuery(this).after('<div class="paypalLightBoxy"></div>'))}),sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"all_boxy")&&jQuery("."+e).each(function(){jQuery(this).find(".allLightBoxy").length||(jQuery(this).css("position","relative"),jQuery(this).prepend('<div class="allLightBoxy"></div>'))})}sl9.common.checkout.handleBtn(),sl9.common.checkout.handleCartPrice(),sl9.common.checkout.handleBuyNow()},handleBuyNow:function(){if(!nfec.IsDmodeNone){var t=sl9.nfec.platform.current.page.Detect();if(t.type==sl9.nfec.consta.PageTypeProduct){var e=t.payload.id;if(e){var n=function(o){if(!o.attr("tdf_fake")){o.attr("tdf_fake",1);var r,c=sl9.nfec.manager.product.FindByID(e);c&&(r=c.variants[0].id);for(var a=o.closest("form"),f=a.serializeArray(),l=r,_=1,u=0;u<f.length;u++)switch(f[u].name){case"quantity":_=parseInt(f[u].value);break;case"id":case"id[]":l=parseInt(f[u].value)}if(l){(!_||_<1)&&(_=1),sl9.common.checkout.IsCheckingOut=!0,sl9.common.checkout.IsCheckingOutStop=!1;var p=nfec.manager.cart.Total||1;sl9.common.checkout.setCK(p,1);var h=nfec.platform.current.element.GetItemProp(a);sl9.nfec.platform.current.cart_api.AddItem(l,_,function(m){if(!m)return sl9.common.checkout.IsCheckingOut=!1,void sl9.common.product.NotiSelectOther();nfec.start.redirect.Is2Cart=1;var g=function(){sl9.common.checkout.Process()},v=!1;sl9.nfec.event_hub.ListenTo("close_popup",function(){g()}),sl9.nfec.event_hub.ListenTo("showing_gift",function(){v=!0}),setTimeout(function(){sl9.common.checkout.IsCheckingOutStop||v||g()},600)},h)}else a.submit()}},i="tdf-ov-atc";sl9.nfec.util.btn.StopRedirect(i+"-fl",jQuery("form ."+i),function(o){o.on("click",function(){n(jQuery(this))})},!0),sl9.common.checkout.BuyNow||(sl9.common.checkout.BuyNow=1,jQuery("body").addClass("tdf-product-page"),jQuery(document).on("click","form .shopify-payment-button",function(o){var r=jQuery(o.target),c=!1,a=!1;r.find(".shopify-payment-button__button,.shopify-payment-button__more-options").each(function(){var f=jQuery(this),l=f.width(),_=f.offset();_&&o&&l&&_.left&&o.pageX&&(c=!0,_.left+l>=o.pageX&&(a=!0))}),c&&!a||n(r)}))}}}},handleCartPrice:function(){if(!nfec.IsDmodeNone){var t="tdf-priced",e=sl9.nfec.platform.current.page.Detect(),n=sl9.manager.draft_order.Get(),i=n.getTotalAmount(),o={current_price:i},r=sl9.nfec.manager.cart.Get();if(n.change_cart_price){var c=sl9.nfec.manager.cart.GetOldTotal();c&&i<c&&(o.origin_price=c)}var a=sl9.common.tpl.Render(sl9.common.snippet_cart_subtotalhtm,o),f=function(h,m){var g=h.find(".tdf_price_normal .tdf_money");if(g.length)return g.data("origin-value")==sl9.nfec.util.tpl.GetCent(m)||void 0},l="tdf-cart-total-parent";if(jQuery(".tdf-cart-total-flag").parent().addClass(l),jQuery(".ConversionDriverCart--totalPrice,.nt_header_cart .shopify-Price-amount").addClass(l),!jQuery("."+l).length){var _=sl9.nfec.manager.ctotal.Get(e);_&&_!="*"&&jQuery(_).addClass(l)}var u=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"cart_sel")||"";jQuery(u+='*[data-tdf-cart-total="1"],.tdf-cart-total-parent,.ajaxcart__footer>.grid--full>.text-right>.ajaxcart__subtotal,.text-right>.cart-subtotal>.h1.cart-subtotal--price,.ajaxcart__footer>.ajaxcart__subtotal>.grid--table>.text-right,.drawerAjaxFooter>.ajaxSubTotal>.cartSubtotal,.aod-total-amount,.atc-subtotal--price,.ucdcart__footer .subtotal-grid .money,.slidecart-subtotal').each(function(){var h=jQuery(this),m=sl9.manager.draft_order.GetTotalDiscount(n);if(n.has_discount&&!(m<=0)||h.hasClass(t)){if(h.hasClass(t)){if(f(h,o.current_price))return}else h.addClass(t);h.removeClass("money").html(a)}});var p=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"cart_price_force");jQuery(".tdf-cart-item-p").parent().addClass("tdf-cart-item-p-p"),jQuery(".tdf-cart-item-lp").parent().addClass("tdf-cart-item-lp-p"),(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"cart_multi")?jQuery(sl9.nfec.platform.current.element.GetCartForms()):sl9.nfec.platform.current.element.GetCartFormDom()).each(function(){(function(h){var m=h.find(".tdf-cart-item-p-p"),g=h.find(".tdf-cart-item-lp-p");if(m.length){if(m.length!=r.items.length)return}else if(!g.length||g.length!=r.items.length)return;for(var v,y,w=h.find(".tdf-cart-item-t"),T=w.length==r.items.length,q=0;q<r.items.length;q++){var S=m.eq(q);if(!(3<S.children().length)||p){var k=r.items[q],D=n.getItemDiscountValue(k.variant_id);if(D||S.hasClass(t)){var I,C={br:1,current_price:k.price-D},O={br:1,current_price:C.current_price*k.quantity};D&&((v=nfec.manager.product.FindByID(k.product_id))&&(I=v.getVariantByID(k.variant_id))&&(y=I.display_old_price())&&y>k.price&&(C.origin_price=y),C.origin_price=C.origin_price||k.price,O.origin_price=C.origin_price*k.quantity),S.hasClass(t)&&f(S,C.current_price)||S.addClass(t).html(sl9.common.tpl.Render(sl9.common.snippet_cart_subtotalhtm,C));var P=g.eq(q);if((!P.hasClass(t)||!f(P,O.current_price))&&(P.addClass(t).html(sl9.common.tpl.Render(sl9.common.snippet_cart_subtotalhtm,O)),T)){var R="";D&&(R=sl9.common.tpl.Render(sl9.common.snippet_item_savehtm,{save:O.origin_price-O.current_price})),w.eq(q).html(R)}}}}})(jQuery(this))})}},handleBtn:function(){var t="tdf_discount_ck_btn",e=jQuery(".tdf-require-cb"),n=jQuery(".tdf-require-input"),i=!0;if(e.length||n.length){var o=!1;e.each(function(){jQuery(this).is(":checked")&&(o=!0)}),n.each(function(){jQuery(this).val()&&(o=!0)}),o||(i=!1)}if(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"minmax")&&window.minMaxify&&minMaxify.checkLimits)try{minMaxify.checkLimits()||(i=!1)}catch(f){}if(!sl9.manager.draft_order.Get().has_discount&&(!sl9.common.checkout.HasOffer||sl9.common.checkout.IsClickedCheckoutBtn()))return sl9.nfec.util.btn.Revert("tdf_btn_ck"),void jQuery("."+t).removeClass(t);sl9.nfec.platform.current.page.Detect().type==sl9.nfec.consta.PageTypeCart&&jQuery("#buy-me-cart").hide(),jQuery(".additional-checkout-buttons").addClass(t),jQuery("button").each(function(){var f=jQuery(this);f.attr("onclick")=="window.location='/checkout'"&&(f.attr("onclick","javascript:;"),f.on("click",function(l){sl9.common.checkout.preCheckout()}))});var r=function(f){f.data("ck_bound")||(f.data("ck_bound",1),f.on("click",function(){if((!(window.ZapTree&&window.Zapiet&&Zapiet.Widget&&typeof Zapiet.Widget.checkoutEnabled=="function")||Zapiet.Widget.checkoutEnabled())&&f.hasClass("tdf_btn_ck")){var l=!1;f.attr("name")=="goto_pp"&&(l=!0),sl9.common.checkout.preCheckout(l)}}))};if(i){var c=jQuery(sl9.nfec.platform.current.element.GetCheckoutButton());sl9.nfec.util.btn.StopRedirect("tdf_btn_ck",c,r)}var a=jQuery(".ConversionDriverCart--checkout");sl9.nfec.util.btn.StopRedirect("tdf_btn_ck",a,r,!0)},fillCheckoutURLParams:function(t,e){for(var n=["[shipping_address][first_name]","[shipping_address][last_name]","[shipping_address][address1]","[shipping_address][address2]","[shipping_address][company]","[shipping_address][city]","[shipping_address][country]","[shipping_address][country_code]","[shipping_address][name]","[shipping_address][zip]","[shipping_address][url]","[shipping_address][street]","[shipping_address][province]","[shipping_address][province_code]","[shipping_address][phone]","locale"],i={is_tdf:e||"1",skip_shopify_pay:!0},o=0;o<n.length;o++){var r=n[o].indexOf("shipping_address")==-1?n[o]:"checkout"+n[o];jQuery('[name="'+r+'"]').each(function(){var l=jQuery(this).val();l&&(i[r]=l)})}var c,a=jQuery("#checkout_email_or_phone").val();a&&(i["checkout[email]"]=a),i.locale||!(c=jQuery('[action*="locale="]').attr("action"))||c.indexOf("/cart")==-1&&c.indexOf("/checkout")==-1||(c=c.substr(c.indexOf("locale=")+7,5))&&(c.indexOf("zh-")!==0&&(c=c.substr(0,2)),i.locale=c),i.locale||(c=sl9.nfec.manager.locale.GetCk())&&(i.locale=c);var f=jQuery.param(i);return t.indexOf("?")!=-1?t+="&":t+="?",t+f},handleScode:function(t){if(!sl9.manager.draft_order.Get().has_discount){var e=sl9.manager.scode.Get();if(e.id){var n=nfec.manager.cart.Total.toFixed(2);parseFloat(e.goal)>parseFloat(n)||(t?sl9.manager.scode.Del():setTimeout(function(){sl9.common.checkout.handleScode(1)},600))}}},handleRcode:function(){var t=sl9.manager.rcode.Get();if(t.id){var e=sl9.manager.draft_order.Get();if(e.has_discount){var n=nfec.manager.cart.Total.toFixed(2),i=nfec.main.TF(e.getTotalDiscount(),2,1);if(t.check(e.cart_token,i,n))return}sl9.nfec.util.request.Api({url:"2/rechargedcode/del",method:"POST",data:{rid:t.id,h:sl9.nfec.util.tool.H(t.id,"1",sl9.nfec.manager.setting.Data.id+"")},complete:function(o){sl9.manager.rcode.Del()}},!0)}},Process:function(t,e,n){nfec.start.redirect.IsProcessCheckout||(nfec.start.redirect.IsProcessCheckout=!0,sl9.nfec.loading.control.Start(),!n&&window.customTrackCkFunc&&setTimeout(window.customTrackCkFunc,1),setTimeout(function(){var i=sl9.manager.draft_order.Get();if(i.has_discount){sl9.manager.dcode.HandleDraftOrder(i),sl9.loyal&&sl9.loyal.util.HandleDraftOrder(i);var o=sl9.nfec.platform.current.element.GetCartForms(),r="attributes[";jQuery(o).each(function(){for(var a=jQuery(this).serializeArray(),f=0;f<a.length;f++)if(a[f].name!="note"){if(a[f].name.indexOf(r)===0){var l=a[f].name.slice(r.length,a[f].name.length-1)+"";i.notes[l]=a[f].value+""}}else i.notes.cart_note=a[f].value+""});var c=function(a){var f=function(){if(a){var w=sl9.nfec.platform.current.page.Detect();if(sl9.nfec.platform.base.page.IsInCheckout(w.type)||e)return;sl9.nfec.platform.current.redirect.GoToCheckoutPage()}else c(!0)},l=sl9.nfec.manager.cart.Get();if(l.isRecharge()&&typeof window.tdfRechargeSubmit=="function"){if(!i.getTotalDiscount())return void tdfRechargeSubmit();var _=sl9.manager.rcode.Get(),u=nfec.manager.cart.Total.toFixed(2),p=nfec.main.TF(i.getTotalDiscount(),2,1);return _.id&&_.check(i.cart_token,p,u)?void tdfRechargeSubmit(_.code):void sl9.nfec.util.request.Api({url:"2/rechargedcode/set",method:"POST",data:{rid:0,t:0,a:p,g:u,h:sl9.nfec.util.tool.H(sl9.nfec.manager.setting.Data.id,p,u),p:sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"scode_prefix")||""},success:function(w){w.c?(_.id=w.rid,_.code=w.c,_.token=i.cart_token,_.amount=p,_.goal=u,sl9.manager.rcode.Set(_),tdfRechargeSubmit(_.code)):f()},error:function(){f()}},a)}var h=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"d_mode"),m=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"extra_scopes"),g="2desta";if(h&&(4008<sl9.nfec.manager.setting.Data.id||m&&m.indexOf("write_price_rules")!=-1)&&i.checkScode()){var v=sl9.manager.scode.Get(),y=.96;return nfec.manager.currency.NotDefault&&(y=.93),u=(l.getTotalPrice(1)*y).toFixed(2),p=nfec.main.TF(i.getTotalDiscount(),2,1),v.id&&v.check(i.cart_token,p,u)?void(window.location.href=sl9.common.checkout.fillCheckoutURLParams("/checkout?discount="+v.code,"2")):void sl9.nfec.util.request.Api({url:g[0]+"/"+g[1]+"cod"+g[2]+"/"+g[3]+"et",method:"POST",data:{rid:v.id,t:i.getTotalDiscount()?0:1,a:p,g:u,h:sl9.nfec.util.tool.H(sl9.nfec.manager.setting.Data.id,p,u),p:sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"scode_prefix")||""},success:function(w){if(!w.c)return v.id&&sl9.manager.scode.Del(),void f();v.id=w.rid,v.code=w.c,v.token=i.cart_token,v.amount=p,v.goal=u,sl9.manager.scode.Set(v),window.location.href=sl9.common.checkout.fillCheckoutURLParams("/checkout?discount="+v.code,"2")},error:function(){f()}},a)}sl9.nfec.util.request.Api({url:g[0]+"/r"+g[5]+"ck"+g[0],method:"POST",data:i.toJSON(),success:function(w){if(w){if(!w.l)return w.r?(alert("Please retry after 1 minute"),void setTimeout(function(){sl9.nfec.store.control.Set("rck",1,60,!0),window.location.reload(!0)},55e3)):void f();sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"delay_ck")||w.dl?setTimeout(function(){window.location.href=sl9.common.checkout.fillCheckoutURLParams(w.l)},800):window.location.href=sl9.common.checkout.fillCheckoutURLParams(w.l)}else f()},error:function(){f()}},a)};c()}else sl9.nfec.platform.current.redirect.GoToCheckoutPage()},100))},IsClickedCheckoutBtn:function(){return sl9.nfec.store.control.Get("ckf")}},sl9.common.promor={Start:function(){sl9.nfec.event_hub.ListenTo("promo_update",function(t,e){e.compared&&e.compared.added&&e.compared.added.length?sl9.common.promor.addPromo(e):sl9.common.promor.handlePromo(),sl9.nfec.event_hub.Trigger("promo_updated",{})},!0,!0),sl9.nfec.event_hub.ListenTo("show_checkout_offer",function(t,e){sl9.common.promor.handlePromo(),sl9.nfec.event_hub.Trigger("promo_updated",{})},!0,!0)},addPromo:function(t){var e=!1;window.lastBundleT&&(e=!0);for(var n=sl9.manager.promo.Get(),i=sl9.common.promor.handlePromo(t).findAddedItems(n,e),o=sl9.nfec.manager.cart.Get(),r=0;r<i.length;r++){var c,a=i[r];if(a.offer_type_id!=sl9.struct.consta.OfferTypeUpsell||!jQuery("#tdf_upsell").length||a.discount_type==sl9.nfec.consta.DiscountTypeFreeGift){if(a.is_cart){c=sl9.common.tpl.Render(sl9.notify.snippet_cart_discountinghtm,{promoItem:a});var f=o.getLastItem();f&&sl9.common.track.AddAction(sl9.struct.consta.ActionTrackAdd,a.offer_type_id,a.offer_id,f.variant_id,o.token,1)}else c=sl9.common.tpl.Render(sl9.notify.snippet_product_discountinghtm,{promoItem:a});nfec.IsDmodeNone&&a.discount_type!=sl9.nfec.consta.DiscountTypeFreeShip||sl9.nfec.event_hub.Trigger("notify_discount_msg",{content:c,is_gifted:1})}}},handlePromo:function(t){sl9.nfec.manager.discountable.Reset();for(var e=new sl9.model.promo,n=sl9.nfec.manager.cart.Get(),i=0;i<n.items.length;i++){var o=n.items[i];if(o.title=="Item Customizations"&&1e3<o.quantity)(c=new sl9.model.promo_item).quantity=o.quantity,c.price=o.price,c.product_id=o.product_id,c.variant_id=o.variant_id,e.items.push(c);else for(var r=0;r<o.quantity;r++){var c;(c=new sl9.model.promo_item).quantity=1,c.price=o.price,c.product_id=o.product_id,c.variant_id=o.variant_id,e.items.push(c)}}var a=["wholesale","upsell","sale","bundle","motivator"];for(i=0;i<a.length;i++)sl9[a[i]].promo.HandlePromo(e,t);return sl9.manager.promo.Set(e),e}},sl9.common.product={HandleSoldout:function(t,e){if(!t.hasClass("unavailable")){t.attr("labl",t.html());var n=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"sold_out");t.html(n).addClass("unavailable").attr("disabled","disabled"),e||sl9.common.product.NotiSelectOther()}},CleanSoldout:function(t){t.html(t.attr("labl")).removeClass("unavailable").removeAttr("disabled")},NotiSelectOther:function(){var t=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"select_other_option");sl9.nfec.noti.control.Run(t,5e3)}},sl9.common.snippet_discountablehtm={m:"{_ if discountable.discount_type == consta.DiscountTypeFreeShip _}0{_ endif _}{_ if discountable.discount_type == consta.DiscountTypeFreeGift _}1{_ endif _}",subs:["{{ include sl9.notify.snippet_product_discountable }}","{{ assign show_gift_more = 1 }}{{ include sl9.notify.snippet_product_discountable }}"]},sl9.common.snippet_cart_subtotalhtm={m:'{_ if origin_price _}1{_ endif _}<span class="tdf_price_normal">{{current_price.toCurrency}}</span>',subs:["<br>",'<span class="tdf_price_original">{{origin_price.toCurrency}} </span>{_ if br _}0{_ endif _}']},sl9.common.snippet_discountable_gifthtm={m:'<div class="tdf_gift tdf_giftable" data-offer-type-id="{{discountable.offer_type_id}}" data-offer-id="{{discountable.offer_id}}"> {{ assign gift = products.{{{discountable.firstFreeGiftID}}} }} {_ if ! discountable.is_cart _}2{_ endif _} <div class="tdf_discount_text"><a href="javascript:;" class="tdf_gift_title tdfe" title="{{gift.title.toInput}}" data-e="show_free_gifts">{{gift.getTitle}} {_ if show_gift_more _}1{_ endif _}</a></div></div>',subs:["{{discountable.message.toTranslate}}{_ else _}{{sl9.data.settings.8.includes}} {{sl9.data.settings.8.free_gift}}","{{sl9.data.settings.8.more}}",' <div class="tdf_discount_tag"> {_ if discountable.hasMessage _}0{_ endif _} </div> ']},sl9.common.rexy={cached:{},getBest:function(){for(var t=sl9.main.GetData("rexy","best")||[],e=[],n=0;n<t.length;n++){var i=sl9.nfec.manager.product.FindByID(t[n]);!i||i.is_premium||i.isHidden()||e.push(t[n])}return e},GetSame:function(){var t=sl9.nfec.manager.current_product.Get();if(!t){var e=sl9.common.rexy.getBest();return e=e.slice(0,12),e=sl9.nfec.util.tool.Shuffle(e)}return sl9.common.rexy.findByHints(t,"same")},findByHints:function(t,e){var n=t.id?e+"_"+t.id:"";if(n&&sl9.common.rexy[n])return sl9.common.rexy[n];var i=sl9.common.rexy.getBest(),o=t.tags?t.tags.split(","):[],r=t.title?t.title.split(" "):[],c=t.product_type?t.product_type.split(" "):[],a=function(S,k,D){for(var I=S.split(D),C=v=0,O=I.length;C<O;C++)k.indexOf(I[C].trim())!=-1&&v++;return v},f=function(S){for(var k,D=0,I=0;I<S.variants.length;I++)D<(k=a(S.variants[I].getTitle(),t.variant_title," "))&&(D=k);return D},l=i.length,_={},u={vendor:20,ptype:10,tag:5,col:5,tit:5,vtit:3};switch(e){case"same":u.vendor=10}for(var p=0;p<l;p++){var h=i[p];if(_[h]={p:-1,tag:0,col:0,tit:0,vtit:0},h!=t.id){var m=sl9.nfec.manager.product.FindByID(h),g=0;m.hasImage()&&(g=10),sl9.nfec.manager.currency.NotDefault||e=="cross"&&t.price&&m.getMaxPrice()<=t.price&&(g+=5),m.product_type==t.product_type&&(g+=u.ptype),m.vendor==t.vendor&&(g+=u.vendor),_[h].p=g;var v=0;t.tags&&m.tags&&(v+=a(m.tags,o,",")),t.product_type&&m.product_type&&(v+=a(m.product_type,c," ")),_[h].tag=v,t.title&&m.title&&(_[h].tit+=a(m.title,r," ")),t.variant_title&&(_[h].vtit=f(m))}}for(var y=0,w=t.collections.length;y<w;y++){var T=sl9.main.GetData("rexy","collection_products",t.collections[y]);if(T){p=0;for(var q=T.length;p<q;p++)_[T[p]]!==void 0&&_[T[p]].col++}}return i.sort(function(S,k){var D=_[S],I=_[k],C=D.p,O=I.p;return D.col>I.col&&(C+=u.col),D.col<I.col&&(O+=u.col),D.tag>I.tag&&(C+=u.tag),D.tag<I.tag&&(O+=u.tag),D.tit>I.tit&&(C+=u.tit),D.tit<I.tit&&(O+=u.tit),D.vtit>I.vtit&&(C+=u.vtit),D.vtit<I.vtit&&(O+=u.vtit),C<O?1:-1}),n&&(sl9.common.rexy[n]=i.slice(0,12)),i.slice(0,12)},GetCross:function(){var t=sl9.nfec.manager.current_product.Get();if(!t){var e=sl9.common.rexy.getBest();return e=e.slice(0,12),e=sl9.nfec.util.tool.Shuffle(e)}for(var n=[],i=sl9.main.GetData("rexy","products")||[],o=0,r=i.length;o<r;o++)if(i[o].indexOf(t.id)!=-1){for(var c=0;c<i[o].length;c++)if(i[o][c]!=t.id){var a=sl9.nfec.manager.product.FindByID(i[o][c]);a&&!a.is_premium&&n.push(i[o][c])}}var f=t.tags?t.tags.split(","):[""],l=[],_=[],u="",p="";for(o=0,r=t.collections.length;o<r;o++){var h=sl9.main.GetData("rexy","collections",t.collections[o]);h&&l.push(h)}for(l.length||(l=t.collections),o=0,r=f.length;o<r;o++){var m=sl9.main.GetData("rexy","tags",f[o]);m&&_.push(m)}_.length||(_=f);var g=t.product_type||"";(p=sl9.main.GetData("rexy","product_types",g))||(p=g);var v=t.vendor||"";(u=sl9.main.GetData("rexy","vendor",v))||(u=v);var y=new sl9.nfec.model.current_product;y.id=t.id,y.vendor=u,y.product_type=p,y.tags=_.join(","),y.title=t.title,y.variant_title=t.variant_title,y.collections=l,y.price=t.price;var w=sl9.common.rexy.findByHints(y,"cross");for(o=0,r=w.length;o<r;o++)n.indexOf(w[o])==-1&&n.push(w[o]);return n.slice(0,12)}},sl9.common.tpl={Render:function(t,e,n){return(e=e||{}).sl9={},e.sl9.IsDmodeNone=nfec.IsDmodeNone||!1,e.sl9.struct=sl9.struct,e.sl9.data=sl9.main.Data,sl9.nfec.util.tpl.RenderTpl(t,e,!1,n)},Renders:function(t,e,n){for(var i="",o=0,r=e.length;o<r;o++)e[o].sl9={},e[o].sl9.struct=sl9.struct,e[o].sl9.data=sl9.main.Data,i+=sl9.nfec.util.tpl.RenderTpl(t,e[o],!0,n);return sl9.nfec.util.tpl.RunAfterRender(),i},AdjustH:function(t,e){var n=t.find("."+e),i=t.height(),o=n.width();t.addClass("tdf_adjhp"),n.height(i+"px").addClass("tdf_adjh"),n.find("button").closest("div").css({position:"absolute",bottom:0,width:o+"px"})}},sl9.common.snippet_pricehtm={m:'{_ if current_variant.display_old_price _}0{_ endif _}<span class="{_ if current_variant.display_old_price _}1{_ endif _}">{{current_variant.display_price.toCurrency}}</span> ',subs:['<span class="tdf_price_original">{{current_variant.display_old_price.toCurrency}} </span>',"tdf_price_sales"]},sl9.common.snippet_item_savehtm={m:'<span class="tdf_price_save">{{sl9.data.settings.8.you_save}} {{save.toCrcF}}</span>',subs:[]},sl9.common.util={AddTrackFlag:function(t){var e=parseInt(t.data("offer-id"));if(e){var n=parseInt(t.data("product-id"));sl9.manager.product_offer.AddRaw(parseInt(t.data("offer-type-id")),e,n)}}},sl9.common.track={queue:[],callbacks:[],tracked:[],isErr:!1,timeID:0,handleAddItemEvent:function(t,e){var n=e.added[0],i=n.product_id,o=sl9.manager.product_offer.FindByProduct(i,n.variant_id);if(o){var r=sl9.nfec.manager.cart.Get();r&&sl9.common.track.AddAction(sl9.struct.consta.ActionTrackAdd,o.offer_type_id,o.offer_id,n.variant_id,r.token,n.quantity_changed)}},Start:function(){sl9.nfec.event_hub.ListenTo("cart_item_added_synced",function(t,e){sl9.common.track.handleAddItemEvent(t,e)},!0,!0),setTimeout(function(){sl9.common.track.send()},3e3),setTimeout(function(){sl9.common.track.send()},5e3)},AddImpression:function(t,e){var n=sl9.struct.consta.ActionTrackImpression;if(!sl9.manager.session.FindItem(n,t,e)){var i=new sl9.model.session;i.action_id=n,i.offer_type_id=t,i.offer_id=e,sl9.manager.session.AddItem(i),sl9.common.track.queue.push(sl9.struct.consta.ActionTrackImpression+","+t+","+e)}},AddAction:function(t,e,n,i,o,r,c,a){if(t!=sl9.struct.consta.ActionTrackAdd){if(sl9.manager.session.FindItem(t,e,n))return void(c&&c());var f=new sl9.model.session;f.action_id=t,f.offer_type_id=e,f.offer_id=n,sl9.manager.session.AddItem(f)}var l=t+","+e+","+n;i&&(l+=","+i+","+o,r&&1<r&&(l+=","+r)),sl9.common.track.queue.push(l),c&&sl9.common.track.callbacks.push(c),sl9.common.track.timeID&&clearTimeout(sl9.common.track.timeID);var _=a?1:300;sl9.common.track.timeID=setTimeout(function(){sl9.common.track.send()},_)},send:function(t){if(!sl9.common.track.isErr){var e=[],n=sl9.common.track.queue,i=!1;sl9.common.track.queue=[];for(var o=0;o<n.length;o++)sl9.common.track.tracked.indexOf(n[o])==-1&&e.push(n[o]);if(e.length){var r=function(){var c=sl9.common.track.callbacks.length;if(c&&!i){i=!0;for(var a=0;a<c;a++)sl9.common.track.callbacks[a]();sl9.common.track.callbacks=[]}};setTimeout(function(){r()},3e3),sl9.nfec.util.request.Track({url:"2/1",data:{r:e.join("-")},success:function(){r()},error:function(){sl9.nfec.util.request.Track({url:"2/1",data:{r:e.join("-")},success:function(){r()},error:function(){sl9.common.track.isErr=!0}},!0)}})}}}},sl9.label={},sl9.label.discountablehtm={m:"{_ if discountable.discount_type == consta.DiscountTypeFreeShip _}0{_ endif _}{_ if discountable.discount_type == consta.DiscountTypeFreeGift _}1{_ endif _}{_ if discountable.discount_type == consta.DiscountTypeValue || discountable.discount_type == consta.DiscountTypePercent _}4{_ endif _}",subs:["{{sl9.data.settings.8.free_ship}}","+ {{sl9.data.settings.8.free_gift}}"," {{variant.display_price.toCurrency}} {_ else _} {{sl9.data.settings.8.ribbon_price}} "," {_ if sl9.data.settings.8.ribbon_price_default _}2{_ endif _}{_ else _}{{sl9.data.settings.8.sale}}","{_ if variant.is_discountable _}3{_ endif _}"]},sl9.label.tplhtm={m:'<div class="tdf_label {{place_class}}" {{div_style}}><span class="tdf_ribbon_span" {{span_style}}>{{message.toTranslate}}</span></div>',subs:[]},sl9.label.main={Data:{},Start:function(){sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"ribbon_off")||(sl9.nfec.event_hub.ListenTo("promo_updated",function(t,e){sl9.label.main.addLabel()},!0,!0),sl9.nfec.event_hub.ListenTo("quick_view_showed",function(t,e){sl9.label.main.addLabel()}),sl9.nfec.event_hub.ListenTo("update_label",function(t,e){sl9.label.main.addLabel()}),sl9.nfec.event_hub.ListenTo("select_variant",function(t,e){sl9.label.main.addLabel()}),setTimeout(function(){sl9.label.main.addLabel()},4e3),setTimeout(function(){sl9.label.main.addLabel()},8e3),sl9.nfec.event_hub.ListenTo("page_scroll",function(t,e){sl9.label.main.addLabel()}),sl9.nfec.event_hub.ListenTo("url_change",function(t,e){sl9.label.main.addLabel()}),jQuery(document).on("Searchanise.DataRequestEnd",function(){setTimeout(function(){sl9.label.main.addLabel()},300)}))},Add:function(t,e){sl9.label.main.Data[t]=e},addLabel:function(){var t=sl9.struct.consta.SettingTypeOther,e=sl9.main.GetData("settings",t,"ribbon_place_id"),n=sl9.main.GetData("settings",t,"label_min_img_h")||80,i=sl9.main.GetData("settings",t,"label_sel")||"img,._custom_theme_img,.grid-product__image-mask,.snize-item,.snize-overhidden,picture",o="",r="left";switch(e){case 2:case 3:case 4:case 5:o="tdf_label_v tdf_label_v"+e;break;case 1:o="tdf_ribbon tdf_ribbon_right",r="right";break;default:o="tdf_ribbon"}jQuery(".tdf_label").remove(),jQuery("body").find('a[href*="/products/"],.fakea[href*="/products/"]').each(function(){var c=jQuery(this),a=c.closest("form").attr("action");if(!a||a.indexOf("/cart")==-1&&a.indexOf("/checkout")==-1){var f=c.attr("href");if(f.indexOf(".shopify.com")==-1&&!c.closest(".slideshow").length){var l=sl9.nfec.platform.current.product.GetHandleFromHref(f),_=sl9.nfec.manager.product.FindByHandle(l);if(_){var u=parseInt(c.data("vid")),p=sl9.label.main.Data[_.id],h=_.variants[0];if(u&&(h=_.getVariantByID(u)),!p){var m=sl9.nfec.manager.discountable.Get(_.id,u);if(!m)return;p=sl9.common.tpl.Render(sl9.label.discountablehtm,{product:_,variant:h,discountable:m})}var g=sl9.nfec.util.tpl.ToCurrency(h.display_price());p=p.replace("{price}",g);var v,y=c.find(i);if(!y.length)if(c.hasClass("tdf_img_parent"))y=c.find(".tdf_img_fake"),v=!0;else{var w=c.closest(".ais-infinite-hits--item");if(!(y=w.length?w.find(".ais-hit--picture"):(w=c.parent()).find("img")).length)return}var T,q=0;if(y.each(function(){var I=jQuery(this),C=I.innerHeight();I.css("opacity")!=="0"&&I.parent().css("opacity")!=="0"&&q<C&&(T=I,q=C)}),v||!(q<n)){var S=T.hasClass("tdf_vertical_img")?T:T.parent();if(!v&&S.innerHeight()<.9*q&&((S=S.parent()).innerHeight()<.9*q||S.innerHeight()>1.4*q))return;var k=S.css("position");k&&k!="static"||S.css("position","relative");var D={};e<2&&(D=function(I){var C=I.innerHeight(),O=I.innerWidth(),P=O<C?O:C;if(700<P||P<120){var R=I.parent();C=R.innerHeight(),P=(O=R.innerWidth())<C?O:C}400<P&&(P=400),P<200&&(P=200);var A=P/200,G=parseInt(75*A),j=parseInt(19*A),L=parseInt(-21*A),V=parseInt(100*A),U=parseInt(20*A),H=parseInt(10*A),Q="width:"+V+"px;top:"+j+"px;"+r+":"+L+"px;line-height:"+U+"px;font-size:"+H+"px";return{div:'style="width:'+G+"px;height:"+G+'px"',span:'style="'+Q+'"',stl:Q}}(T)),S.prepend(sl9.common.tpl.Render(sl9.label.tplhtm,{message:p,div_style:D.div,span_style:D.span,place_class:o})),e<2&&S.find(".tdf_ribbon .tdf_money").attr("style",D.stl)}}}}})}},sl9.loyal={},sl9.loyal.acchtm={m:'<div class="tdf_loyal_discountable"><div>{{point_message}}</div><a href="javascript:;" class="tdfe" data-e="loyal_rewards_show">{{sl9.data.settings.8.lo_reward_view}}</a></div>',subs:[]},sl9.loyal.acc={Start:function(){sl9.loyal.point_s.Start(),sl9.nfec.event_hub.ListenTo("point_ready",function(t,e){sl9.notify.main.LoyalContent=!0,sl9.nfec.event_hub.Trigger("minicon_show");var n=function(r){return sl9.common.tpl.Render(sl9.loyal.acchtm,{point_message:sl9.loyal.util.GetPointMessage(r)})},i=!1,o=function(r){if(!i){var c=sl9.loyal.point_m.Get();if(c||r){var a=n(c);i=!0,sl9.loyal.point_noti_m.Set(1),sl9.nfec.event_hub.Trigger("notify_discount_msg",{content:a})}}};sl9.nfec.event_hub.ListenTo("customer_login",function(r,c){o(!0)},!0),sl9.loyal.point_noti_m.Get()||o(),sl9.nfec.event_hub.ListenTo("notify_discount_popup_discountable",function(){var r=sl9.loyal.point_m.Get(),c=n(r);sl9.nfec.event_hub.Trigger("notify_discount_popup_discountable_add",{content:c})})},!0)}},sl9.loyal.discountedhtm={m:'<div class="tdf_discounted_loyal"><div class="tdf_discount_icon tdf_discount_icon_9"></div><div class="tdf_discount_content"> {_ if promoItem.discount_type == consta.DiscountTypeFreeShip _}0{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypeFreeGift _}1{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypeValue _}2{_ endif _} </div></div>',subs:[" {{sl9.data.settings.8.free_ship}} {{ include sl9.loyal.snippet_close }} "," {{ include sl9.loyal.snippet_gift }} ",' {{promoItem.toCDsc}}{{ include sl9.loyal.snippet_close }} <div class="tdf_coupon_mess">{{sl9.data.settings.8.discount_cal_at_checkout}}</div> ']},sl9.loyal.main={Start:function(){sl9.main.GetData("settings",sl9.struct.consta.SettingTypeLoyal,"active")&&(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeLoyal,"online_off")||(sl9.loyal.main.formatOffers(),nfec.manager.customer.Get()?(sl9.loyal.acc.Start(),sl9.loyal.reward.Start()):sl9.loyal.welcome.Start()))},formatOffers:function(){var t=sl9.struct.consta.OfferTypeLoyal,e=sl9.manager.offer.List(t);e.sort(function(n,i){var o=n.trigger.compare(i.trigger);return o||(n.point<i.point?-1:n.point>i.point?1:n.id>i.id?-1:1)}),sl9.manager.offer.Set(t,e)}},sl9.loyal.discountinghtm={m:'<div class="tdf_discounting_loyal"><div class="tdf_discount_icon tdf_discount_icon_9"></div><div class="tdf_discount_content"> {_ if promoItem.discount_type == consta.DiscountTypeFreeShip _}0{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypeFreeGift _}1{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypeValue _}2{_ endif _} </div></div>',subs:[" {{sl9.data.settings.8.free_ship}}<br>{{sl9.data.settings.8.added}} "," {{ assign discounting = 1 }} {{ include sl9.loyal.snippet_gift }} "," {{promoItem.toCDsc}} {{sl9.data.settings.8.added}} "]},sl9.loyal.point_c=function(){this.point=0,this.parseState=function(t){var e=JSON.parse(t);this.point=e.p},this.toState=function(){var t={p:this.point};return JSON.stringify(t)}},sl9.loyal.point_m={Set:function(t){var e=new sl9.loyal.point_c;e.point=t,sl9.nfec.store.control.Set("lop",e.toState(),864e3,!0)},Get:function(){var t=nfec.store.control.Get("lop");if(!t)return null;var e=new sl9.loyal.point_c;return e.parseState(t),e.point},Remove:function(){sl9.nfec.store.control.Remove("lop")}},sl9.loyal.point_noti_m={Set:function(t){sl9.nfec.store.control.Set("pon",t,86400,!0)},Get:function(){return sl9.nfec.store.control.Get("pon")}},sl9.loyal.point_s={Start:function(){sl9.nfec.event_hub.ListenTo("customer_update",function(i,o){sl9.loyal.point_m.Remove()},!0);var t=nfec.manager.customer.Get(),e=sl9.loyal.point_m.Get(),n=function(){sl9.nfec.event_hub.Trigger("point_ready")};e?n():sl9.nfec.util.request.Api({url:"2/lo/p",method:"GET",timeout:1e4,data:{cid:t.id,vtx:sl9.nfec.util.tool.GetSecond()},success:function(i){i.p!==void 0&&(sl9.loyal.point_m.Set(i.p),n())},error:function(){}},!0)}},sl9.loyal.rewardshtm={m:'<div id="tdf_loyal_rewards"><div class="tdf_point_message">{{point_message}}</div><div class="tdf_loyal_earn">{{sl9.data.settings.8.lo_earn}}</div> {_ for r,offer in offers _}1{_ endfor _}</div>',subs:[" tdf_loyal_disable_btn {_ else _} tdfe ",' <div><div class="tdf_loyal_offer"><span class="tdf_loyal_offer_message">{{offer.message.toTranslate}}</span><br><span class="tdf_loyal_offer_point">{{offer.point}} {{sl9.data.settings.8.lo_points}}</span></div><button type="button" class="tdf_loyal_rewards_btn {_ if offer.point > point _}0{_ endif _}" data-e="loyal_reward_redeem" data-oid="{{offer.id}}">{{sl9.data.settings.8.lo_redeem}}</button></div> ']},sl9.loyal.reward_c=function(){this.id=0,this.offer_id=0,this.pid=null,this.vid=null,this.parseState=function(t){this.id=t.n,this.offer_id=t.r,this.pid=t.p,this.vid=t.v},this.toState=function(){return{n:this.id,r:this.offer_id,p:this.pid,v:this.vid}}},sl9.loyal.rewards_c=function(){this.items=[],this.find=function(t){for(var e=0;e<this.items.length;e++)if(this.items[e].id==t)return this.items[e];return null},this.removeItem=function(t){for(var e=[],n=0;n<this.items.length;n++)this.items[n].id!=t&&e.push(this.items[n]);this.items=e},this.addItem=function(t){this.items.push(t)},this.parseState=function(t){var e=JSON.parse(t);if(this.items=[],e.i)for(var n,i=0,o=e.i.length;i<o;i++)(n=new sl9.loyal.reward_c).parseState(e.i[i]),this.items.push(n)},this.toState=function(){for(var t={i:[]},e=0,n=this.items.length;e<n;e++)t.i.push(this.items[e].toState());return JSON.stringify(t)}},sl9.loyal.reward={Start:function(){var t=sl9.struct.consta.OfferTypeLoyal;sl9.nfec.event_hub.ListenTo("customer_update",function(i,o){sl9.loyal.rewards_m.Remove()},!0),sl9.nfec.event_hub.ListenTo("loyal_rewards_show",function(i,o){var r=sl9.manager.offer.List(t),c=sl9.loyal.point_m.Get(),a=sl9.common.tpl.Render(sl9.loyal.rewardshtm,{point:c,point_message:sl9.loyal.util.GetPointMessage(c),offers:r});sl9.nfec.modal.control.Run(a)});var e=function(){for(var i=sl9.loyal.rewards_m.Get(),o="",r=0;r<i.items.length;r++){var c=i.items[r],a=sl9.manager.offer.Get(t,c.offer_id);a&&(o+=sl9.common.tpl.Render(sl9.loyal.discountedhtm,{promoItem:{offer_id:a.id,offer_type_id:t,reward_id:c.id,discount_type:a.discount.type_id,discount_value:a.discount.value,product_id:c.pid,variant_id:c.vid}}))}return o};sl9.nfec.event_hub.ListenTo("select_reward_gift",function(i,o){var r=sl9.loyal.rewards_m.Get(),c=r.find(o.rid);c&&(c.pid=o.pid,c.vid=o.vid,sl9.loyal.rewards_m.Set(r),n())}),sl9.nfec.event_hub.ListenTo("notify_discount_popup_discountable",function(){var i=e();i&&sl9.nfec.event_hub.Trigger("notify_discount_popup_discountable_add",{content:i,append:1})});var n=function(){var i=e();sl9.manager.draft_order.IsLoyal=!!i,sl9.nfec.event_hub.Trigger("loyal_content_widget",{content:i})};n(),sl9.nfec.event_hub.ListenTo("loyal_reward_redeem",function(i,o){var r=parseInt(o.els.data("oid"));sl9.nfec.loading.control.Start();var c=nfec.manager.customer.Get();sl9.nfec.util.request.Api({url:"2/lo/rd",method:"POST",timeout:1e4,data:{rid:r,cid:c.id},success:function(a){if(a.i){sl9.nfec.loading.control.Stop(),sl9.loyal.point_m.Set(a.p);var f=sl9.manager.offer.Get(t,r),l=sl9.loyal.rewards_m.Get(),_=new sl9.loyal.reward_c;if(_.offer_id=r,f.discount.type_id==sl9.nfec.consta.DiscountTypeFreeGift)if(_.pid=f.discount.pids[0],f.discount.vids.length)_.vid=f.discount.vids[0];else{var u=sl9.nfec.manager.product.FindByID(_.pid);_.vid=u.variants[0].id}_.id=a.i,l.addItem(_),sl9.loyal.rewards_m.Set(l),sl9.nfec.modal.control.Close();var p=sl9.common.tpl.Render(sl9.loyal.discountinghtm,{promoItem:{offer_type_id:t,offer_id:f.id,discount_type:f.discount.type_id,discount_value:f.discount.value,product_id:_.pid,variant_id:_.vid}});sl9.nfec.event_hub.Trigger("notify_discount_msg",{content:p}),n(),sl9.common.checkout.handleCart()}},error:function(){sl9.nfec.loading.control.Stop()}},!0)}),sl9.nfec.event_hub.ListenTo("loyal_reward_revert",function(i,o){var r=parseInt(o.els.data("rid")),c=sl9.loyal.rewards_m.Get().find(r);if(c){sl9.nfec.loading.control.Start();var a=nfec.manager.customer.Get();sl9.nfec.util.request.Api({url:"2/lo/rv",method:"POST",timeout:1e4,data:{tid:c.id,cid:a.id},success:function(f){f.i&&(sl9.nfec.loading.control.Stop(),sl9.loyal.point_m.Set(f.p),sl9.loyal.rewards_m.RemoveByID(c.id),jQuery(".tdf_notify_minicon_close").trigger("click"),n())},error:function(){sl9.nfec.loading.control.Stop()}},!0)}})}},sl9.loyal.rewards_m={Set:function(t){nfec.store.control.Set("lor",t.toState(),864e3,!0)},Get:function(){var t=nfec.store.control.Get("lor"),e=new sl9.loyal.rewards_c;return t&&e.parseState(t),e},RemoveByID:function(t){var e=sl9.loyal.rewards_m.Get();e.removeItem(t),sl9.loyal.rewards_m.Set(e)},Remove:function(){sl9.nfec.store.control.Remove("lor")}},sl9.loyal.snippet_closehtm={m:'<span class="tdfe dcode_remove_btn" data-e="loyal_reward_revert" data-rid="{{promoItem.reward_id}}"> &#10005; </span>',subs:[]},sl9.loyal.util={GetPointMessage:function(t){var e=sl9.struct.consta.SettingTypeTrans,n='<span class="tdf_point">'+t+"</span> ";n+=1<t?sl9.main.GetData("settings",e,"lo_points"):sl9.main.GetData("settings",e,"lo_point");var i=sl9.main.GetData("settings",e,"lo_have");return i=i.replace("{point}",n)},HandleDraftOrder:function(t){for(var e=sl9.struct.consta.OfferTypeLoyal,n=sl9.loyal.rewards_m.Get(),i=0;i<n.items.length;i++){var o=n.items[i],r=sl9.manager.offer.Get(e,o.offer_id);if(r){var c=new sl9.model.draft_order_item,a=new sl9.model.draft_order_discount;switch(r.discount.type_id){case sl9.nfec.consta.DiscountTypeFreeShip:t.setFreeShip(1);break;case sl9.nfec.consta.DiscountTypeFreeGift:var f=sl9.nfec.manager.product.FindByID(o.pid).getVariantByID(o.vid);if(!f)break;a.fromFreeGift(f.price,1),c.variant_id=o.vid,c.quantity=1,c.discount=a,c.price=f.price,t.has_discount=!0,t.addItem(c);break;case sl9.nfec.consta.DiscountTypeValue:var l=t.getTotalAmountBeforeCartDiscount(),_=r.discount.value;t.discount&&(_+=t.discount.value),(a=new sl9.model.draft_order_discount).fromDiscount({discount_type:sl9.nfec.consta.DiscountTypeValue,discount_value:_},l),t.discount=a}t.setLoyal()}}}},sl9.loyal.welcomehtm={m:'<div id="tdf_loyal" class="tdf_container"><div class="tdf_loyal_container"><div>{{sl9.data.settings.8.lo_welcome}}</div><div>{{sl9.data.settings.8.lo_join}}</div><a class="tdf_loyal_login" href="/account/login">{{sl9.data.settings.8.lo_signin}}</a><a href="/account/register">{{sl9.data.settings.8.lo_signup}}</a></div></div>',subs:[]},sl9.loyal.snippet_gifthtm={m:'<div class="tdf_gift" data-offer-type-id="{{promoItem.offer_type_id}}" data-offer-id="{{promoItem.offer_id}}" data-promoitem-id="{{promoItem.reward_id}}"> {{ assign gift = products.{{{promoItem.product_id}}} }} <div class="tdf_discount_tag"> {{sl9.data.settings.8.free_gift}} {_ if discounting _}0{_ endif _} </div><div class="tdf_discount_text"><a href="javascript:;" class="tdf_gift_title tdfe" data-e="show_free_gifts" data-pid="{{promoItem.product_id}}" title="{{gift.title.toInput}}" data-vid="{{promoItem.variant_id}}">{{gift.getTitle}}</a></div></div>',subs:[" {{sl9.data.settings.8.added}} {_ else _} {{ include sl9.loyal.snippet_close }} "]},sl9.loyal.welcome={Start:function(){var t=nfec.platform.current.page.Detect();if([nfec.consta.PageTypeHome,nfec.consta.PageTypeProduct,nfec.consta.PageTypeCart,nfec.consta.PageTypeCollection].indexOf(t.type)!=-1){var e=sl9.common.tpl.Render(sl9.loyal.welcomehtm,{}),n=jQuery(".tdfPlaceLoyal");if(n.length)n.first().after(e);else{var i=jQuery(".endOfLayoutContentX").first().parent(),o=i.children("footer");o.length?o.first().before(e):i.append(e)}}}},sl9.discount={},sl9.discount.boxhtm={m:'<div id="tdf_discount_box" class="tdf_content_section_discounted tdf_container tdf_nonpopup"> {_ if coupon_added _}0{_ endif _} {_ if coupon_enable _}1{_ endif _}</div>',subs:[" {{ include sl9.discount.snippet_codeadded }} "," {{ include sl9.discount.snippet_codebox }} "]},sl9.discount.snippet_codeaddedhtm={m:'<div class="tdf_discounted_dcode"><div class="tdf_discount_icon tdf_discount_icon_{{consta.DiscountTypeCode}}"></div><div class="tdf_discount_content"> {{coupon_code}} <span class="tdfe dcode_remove_btn" data-e="dcode_remove"> &#10005; </span><div class="tdf_coupon_mess">{{sl9.data.settings.8.discount_cal_at_checkout}}</div></div></div>',subs:[]},sl9.discount.snippet_codeboxhtm={m:'<div class="tdf_input_form"><input type="text" class="tdf_input_discount" placeholder="{{sl9.data.settings.8.cart_discount_code}}"><button type="button" class="tdf_normal_btn tdfe" data-e="dcode_apply">{{sl9.data.settings.8.apply}}</button></div>',subs:[]},sl9.discount.select_gift_btnhtm={m:'<button type="button" class="tdf_cta_btn tdfe" data-e="select_gift" data-offer-type-id="{{offer_type_id}}" data-offer-id="{{offer_id}}" data-promoitem-id="{{promoItem_id}}"> {{sl9.data.settings.8.select_free_gift}}</button>{_ if sl9.data.settings.6.no_giftable _}0{_ endif _}',subs:['<button type="button" class="tdf_cta_btn tdfe tdf_no_gift" data-e="select_gift" data-offer-type-id="{{offer_type_id}}" data-offer-id="{{offer_id}}" data-promoitem-id="{{promoItem_id}}"> {{sl9.data.settings.8.no_thank}}</button>']},sl9.discount.widgethtm={m:'<div id="tdf_discount_widget" class="tdf_content_section_discounted tdf_container tdf_nonpopup"> {_ if is_moti _}0{_ endif _} {_ if discounteds.length _}5{_ endif _} {_ if coupon_added _}1{_ endif _} <div class="tdf_loyal_div"> {{loyal_content}} </div> {_ if is_moti_wsale _}2{_ endif _} {_ if coupon_enable _}3{_ endif _}</div>',subs:[" {{motivator}} "," {{ include sl9.discount.snippet_codeadded }} "," {{motiWholesale}} "," {{ include sl9.discount.snippet_codebox }} "," {{ include sl9.notify.snippet_product_discounted plus promoItem as promoItem }} "," <h3>{{sl9.data.settings.8.your_discount}}:</h3> {_ for i,promoItem in discounteds _}4{_ endfor _} "]},sl9.discount.main={Start:function(){sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"discount_widget")&&sl9.discount.widget.Start();var t=!1;sl9.nfec.event_hub.ListenTo("promo_updated",function(){t||(t=!0,sl9.discount.main.showProductDiscountable())},!0,!0),sl9.nfec.event_hub.ListenTo("notify_discount_popup_discountable",function(){switch(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"sale_place_id")){case sl9.struct.consta.SalePlaceNoti:var r=sl9.discount.main.buildCurrentDiscountable();if(!r)return;sl9.nfec.event_hub.Trigger("notify_discount_popup_discountable_add",{content:r})}});var e=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"enable_gift_popup"),n=!1,i=!1,o=0;e&&sl9.nfec.event_hub.ListenPast("notify_discount_msg",function(r,c){if(n=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"enable_gift_ck"),c.is_gifted){var a=new Date().getTime();if(!(a<o+1200)){var f=jQuery("#tdf_notify .tdf_gift_title");if(f.length){var l=!1;f.each(function(){if(!l){var _=jQuery(this),u=_.closest(".tdf_gift"),p=parseInt(u.data("offer-id")),h=parseInt(u.data("offer-type-id")),m=(parseInt(u.data("promoitem-id")),sl9.nfec.manager.gift.FindItem(sl9.struct.app.id,h,p),sl9.manager.offer.Get(h,p)),g=_.data("pids")||m.discount.value||"",v=m.discount.vids||[];if(!v.length){var y=_.data("vids");y&&(v=(y+="").split(","))}var w=(g+="")?g.split(","):[];if(w.length<2){if(v.length&&v.length<2)return;var T=parseInt(w[0]);if(product=sl9.nfec.manager.product.FindByID(T),product.variants.length<2)return}o=a,setTimeout(function(){_.trigger("click")},1200),l=!0}}),!l&&n&&(l=!0,o=a,setTimeout(function(){f.first().trigger("click")},1200)),l&&(i=!0,setTimeout(function(){sl9.nfec.event_hub.Trigger("showing_gift",{})},100))}}}}),sl9.nfec.event_hub.ListenTo("show_free_gifts",function(r,c){var a=c.els.closest(".tdf_gift"),f=parseInt(a.data("offer-id")),l=parseInt(a.data("offer-type-id")),_=parseInt(a.data("promoitem-id")),u=sl9.nfec.manager.gift.FindItem(sl9.struct.app.id,l,f),p=sl9.manager.offer.Get(l,f),h=c.els.data("pids")||p.discount.value||"",m=p.discount.vids||[];if(!m.length){var g=c.els.data("vids");if(g){m=(g+="").split(",");for(var v=0;v<m.length;v++)m[v]=parseInt(m[v])}}var y,w,T,q=(h+="")?h.split(","):[];for(v=0;v<q.length;v++)q[v]=parseInt(q[v]);(y=c.els.data("pid"))?(y=parseInt(y),w=parseInt(c.els.data("vid"))):u?(y=u.product_id,w=u.variant_id):(y=q[0],w=(T=sl9.nfec.manager.product.FindByID(y)).variants[0].id),T||(T=sl9.nfec.manager.product.FindByID(y));var S={is_gift:!0,handle:T.handle,current_variant_id:w,product_ids:q,not_show_normal_cta:!0,not_show_qty:!0,is_custom_cta:!0,custom_cta:sl9.common.tpl.Render(sl9.discount.select_gift_btnhtm,{offer_id:f,offer_type_id:l,promoItem_id:_}),vids:m};sl9.nfec.event_hub.Trigger("show_quick_view",S)}),sl9.nfec.event_hub.ListenTo("select_gift",function(r,c){var a=parseInt(c.els.data("offer-id")),f=parseInt(c.els.data("offer-type-id")),l=parseInt(c.els.data("promoitem-id")),_=c.els.closest(".tdf_qv_content");_.length||(_=c.els.closest(".tdf_products_vertical_content"));var u=parseInt(_.data("product-id")),p=parseInt(_.data("variant-id"));c.els.hasClass("tdf_no_gift")?sl9.manager.nogif.Set(f,a):sl9.manager.nogif.Del(f,a);var h=new sl9.nfec.model.gift;h.app_id=sl9.struct.app.id,h.offer_type_id=f,h.offer_id=a,h.product_id=u,h.variant_id=p,sl9.nfec.manager.gift.AddItem(h),f==sl9.struct.consta.OfferTypeLoyal?sl9.nfec.event_hub.Trigger("select_reward_gift",{pid:u,vid:p,rid:l}):l&&sl9.manager.promo.UpdateItemVariant(l,u,p);var m=sl9.nfec.manager.product.FindByID(u);sl9.nfec.event_hub.Trigger("close_last_quick_view"),jQuery(".tdf_gift").each(function(){var g=jQuery(this);if(g.data("offer-type-id")==f&&g.data("offer-id")==a){var v=parseInt(g.data("promoitem-id"));if(v){if(!l||l!=v)return}else if(l)return;var y=g.find(".tdf_gift_title");y.html(m.getTitle()),nfec.util.tool.SetAtt(y,"pid",u),nfec.util.tool.SetAtt(y,"vid",p)}}),sl9.nfec.event_hub.Trigger("selected_gift",{}),n=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"enable_gift_ck"),e&&n&&i&&setTimeout(function(){switch(n){case 2:sl9.nfec.platform.current.redirect.GoToCartPage();break;default:sl9.common.checkout.Process()}},500)}),jQuery(document).on("keypress",".tdf_input_discount",function(r){r.keyCode==13&&(r.preventDefault(),jQuery(".tdf_input_form .tdf_normal_btn").trigger("click"))}),sl9.nfec.event_hub.ListenTo("store_form_change_variant",function(r,c){var a=jQuery("#tdf_sale_widget .tdf_nonpopup");if(sl9.nfec.manager.product.FindByID(c.product_id).getVariantByID(c.variant_id).is_discountable())if(a.length){var f=sl9.discount.main.buildCurrentDiscountable(!0);f&&a.html(f)}else sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"sale_place_id")==sl9.struct.consta.SalePlaceWidget&&sl9.discount.main.showProductDiscountable();else a.html("")},!0,!0)},showProductDiscountable:function(){switch(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"sale_place_id")){case sl9.struct.consta.SalePlaceNoti:if(!(t=sl9.discount.main.buildCurrentDiscountable()))return;sl9.nfec.event_hub.Trigger("notify_discount_msg",{content:t});break;case sl9.struct.consta.SalePlaceWidget:var t;if(!(t=sl9.discount.main.buildCurrentDiscountable(!0)))return;t='<div id="tdf_sale_widget" class="tdf_container"><div class="tdf_nonpopup">'+t+"</div></div>";var e=jQuery(".tdfPlaceSale").first();if(e.length)return void e.after(t);nfec.platform.current.element.GetAddCartForms(!0).prepend(t)}},buildCurrentDiscountable:function(t){var e=sl9.nfec.manager.discountable.GetCurrentProductData(t);if(e)return e.offer_type_id==sl9.struct.consta.OfferTypeFirst&&sl9.common.track.AddAction(sl9.struct.consta.ActionTrackImpression,e.offer_type_id,e.offer_id),sl9.common.tpl.Render(sl9.notify.snippet_product_discountablehtm,{discountable:e})}},sl9.discount.widget={LoyalContent:"",Start:function(){if(!(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"mini_dwidget_off")&&sl9.nfec.platform.current.page.Detect().type!=sl9.nfec.consta.PageTypeCart)){var t="#tdf_discount_widget",e="#tdf_discount_box",n=function(i){var o=0,r=jQuery(t);if(r.length){if(i)return;o=1}if(o||(r=jQuery(".tdfPlaceDiscounts")).length&&(o=2),!o&&(r=sl9.nfec.platform.current.element.GetCartFormDom(!0)).length){o=3;var c=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"theme_d_place")||".ajaxcart__inner--has-fixed-footer,.drawer__inner--has-fixed-footer",a=r.find(c);a.length&&(r=a)}var f=0,l=jQuery(".tdfPlaceDiscountBox");if(l.length&&(f=2),o||f){var _=sl9.manager.draft_order.Get(),u=[],p=sl9.manager.draft_order.GetTotalDiscount(_);if(!(8413<sl9.nfec.manager.setting.Data.id||sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"cart_mt"))||_.items.length){var h=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"saving_hide");if(0<p&&!h){var m=sl9.nfec.manager.cart.Get();u.push({discount_type:sl9.nfec.consta.DiscountTypeValue,discount_value:p,quantity:m.getTotalAddeds()})}var g=sl9.manager.promo.Get();u=u.concat(g.getSum());var v=sl9.discount.widget.LoyalContent,y=sl9.motivator.noti.BuildProgress(),w=sl9.wholesale.moti.BuildProgress(),T=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"cart_coupon"),q=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"cart_coupon_restrict"),S=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"enable_cart_code");if(S&&2888<sl9.nfec.manager.setting.Data.id&&!q&&(T=!0),u.length||y||w||v||T){var k={discounteds:u,motivator:y,motiWholesale:w,is_moti:y?1:0,is_moti_wsale:w?1:0,loyal_content:v};if(_.has_discount||T){var D=sl9.manager.dcode.Get();S&&(D&&D.code?(k.coupon_added=1,k.coupon_code=D.code):k.coupon_enable=1)}if(f){var I=sl9.common.tpl.Render(sl9.discount.boxhtm,k);switch(f){case 2:jQuery(e).length?jQuery(e).replaceWith(I):l.after(I)}k.coupon_added=0,k.coupon_enable=0}var C=sl9.common.tpl.Render(sl9.discount.widgethtm,k);switch(r=r.first(),o){case 1:r.replaceWith(C);break;case 2:setTimeout(function(){jQuery(t).length||r.after(C)},150);break;case 3:setTimeout(function(){jQuery(t).length||r.prepend(C)},150)}}else jQuery("#tdf_discount_widget").hide()}}};sl9.nfec.event_hub.ListenTo("loyal_content_widget",function(i,o){jQuery(".tdf_loyal_div").html(o.content),sl9.discount.widget.LoyalContent=o.content},!0,!0),sl9.nfec.event_hub.ListenTo("promo_updated",function(){setTimeout(function(){n()},200)},!0,!0),sl9.nfec.event_hub.ListenTo("selected_gift",function(){n()}),sl9.nfec.event_hub.ListenTo("request_got_cart",function(){n(!0),setTimeout(function(){n(!0)},900)}),jQuery(document).on("cart:rerendered",function(){n(!0)}),sl9.nfec.event_hub.ListenTo("dcode_remove",function(i,o){sl9.manager.dcode.Remove(1),n()}),sl9.nfec.event_hub.ListenTo("dcode_apply",function(i,o){var r=o.els,c=r.closest(".tdf_input_form").find(".tdf_input_discount").val();if(c=c.trim()){sl9.nfec.util.tpl.AddBtnLoading(r);var a=function(){var f=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"invalid_code");sl9.nfec.noti.control.Run(f,4e3)};sl9.dcode.main.HandleApply(c,a,function(f){if(sl9.manager.dcode.PreCheckCode()){var l=sl9.manager.dcode.Get();if(l.opc){if(sl9.nfec.manager.coupon.CkFlag(l.code))return a(),void sl9.manager.dcode.Remove();sl9.nfec.manager.coupon.Flag(l.code)}var _={discount_code:l.code};sl9.nfec.platform.current.cart_api.AddAttr(_),n()}else a()},function(){sl9.nfec.util.tpl.RemoveBtnLoading(r)})}})}}},sl9.modelo={},sl9.modelo.bundle=function(){this.display_id=0,this.is_uncheck=0,sl9.modelo.offer.call(this),this.getNum=function(){return sl9.struct.consta.OfferTypeBundle},this.isCustomValid=function(){return!(this.trigger.product_groups.length<2)&&!(this.product_groups.length<2)},this.fromJSON=function(t){this.display_id=t.display_id,this.is_uncheck=t.is_uncheck||0,this.formatOffer(t)}},sl9.modelo.motivator=function(){this.goal=0,this.first_message="",this.is_category=!1,this.is_d_cat=!1,this.getNum=function(){return sl9.struct.consta.OfferTypeCart},sl9.modelo.offer.call(this),this.isCustomValid=function(){return!!this.discount.isValid()},this.fromJSON=function(t){this.goal=t.goal||0,this.first_message=t.first_message,this.is_category=t.is_category,this.formatOffer(t),this.is_category&&(this.product_groups.length&&this.product_groups[0].isPreSelect()||(this.is_category=!1)),this.is_d_cat=this.is_category,sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"mt_ct")&&(this.is_category=!1)},this.getDiscountable=function(t,e){var n=new sl9.nfec.model.discountable;return n.app_id=sl9.struct.app.id,n.discount_type=this.discount.type_id,n.discount_value=this.discount.value,n.is_cart=!0,n.offer_id=this.id,n.offer_type_id=sl9.struct.consta.OfferTypeCart,n.remain_amount=e,n.current_amount=t,n}},sl9.modelo.loyal=function(){this.point=0,this.getNum=function(){return sl9.struct.consta.OfferTypeLoyal},sl9.modelo.offer.call(this),this.isCustomValid=function(){return!!this.discount.isValid()},this.fromJSON=function(t){this.point=t.p,this.formatOffer(t)}},sl9.modelo.discount=function(){this.type_id=0,this.value=null,this.pvids={},this.vids=[],this.pids=[],this.origin_type_id=0,this.discounted_price=0,this.isValid=function(){return this.type_id},this.fromJSON=function(t,e){switch(this.origin_type_id=t.type_id,this.type_id=t.type_id,this.value=t.value,this.pvids=t.pvids,t.type_id&&(window.dsqion=1),t.type_id){case sl9.nfec.consta.DiscountTypePrice:if(!t.value||!e.product_groups.length)return void(this.type_id=0);var n=e.first_price;if(!n)return void(this.type_id=0);this.discounted_price=t.value;var i=n-t.value;if(i<=0)return void(this.type_id=0);this.value=parseFloat(nfec.main.TF(i,2,1)),this.type_id=sl9.nfec.consta.DiscountTypeValue;break;case sl9.nfec.consta.DiscountTypePercent:case sl9.nfec.consta.DiscountTypeValue:t.value||(this.type_id=0);break;case sl9.nfec.consta.DiscountTypeFreeGift:if(t.value&&typeof t.value=="string"){for(var o=[],r=!(!t.pvids||jQuery.isEmptyObject(t.pvids)),c=t.value.split(","),a=[],f=0;f<c.length;f++){var l=parseInt(c[f]),_=sl9.nfec.manager.product.FindByID(l);if(_)if(r){var u=_.filterVarIDs(t.pvids[_.id]);u.length&&(o=o.concat(u),a.push(l))}else a.push(l)}if(r){if(!o.length)return void(this.type_id=0);this.vids=o}if(!a.length)return void(this.type_id=0);this.pids=a,this.value=a.join(",")}else this.type_id=0;break;case sl9.nfec.consta.DiscountTypeFreeShip:break;case sl9.nfec.consta.DiscountTypeWholesale:if(!t.value||!t.value.levels||!t.value.levels.length)return void(this.type_id=0);break;default:this.type_id=0}}},sl9.modelo.offer=function(){this.id=0,this.wid=0,this.message="",this.label="",this.trigger=new sl9.modelo.trigger,this.discount=new sl9.modelo.discount,sl9.modelo.offertpl.call(this),this.hasMessage=function(){return this.message?1:0},this.isValid=function(t,e,n){return!this.is_invalid_group&&!this.trigger.is_invalid_group&&!this.trigger.online_off&&!!this.trigger.checkCountry(t)&&!!this.trigger.checkCustomer(e)&&!!this.trigger.checkKeyword(n)&&!this.trigger.countNextTime()&&!!this.isCustomValid()},this.isAI=function(){for(var t=0,e=this.product_groups.length;t<e;t++)if(this.product_groups[t].type_id==sl9.struct.consta.GroupTypeAI)return!0;return!1},this.formatOffer=function(t){this.id=t.id,this.wid=t.wid,this.message=t.message,this.label=t.label||"",this.formatOfferTpl(t),t.discount&&this.discount.fromJSON(t.discount,this),t.trigger&&this.trigger.fromJSON(t.trigger)}},sl9.modelo.offertpl=function(){sl9.modelo.product_groups.call(this),this.formatOfferTpl=function(t){this.formatProductGroups(t.product_groups)},this.addLabel=function(t){for(var e=0;e<this.product_groups.length;e++){var n=this.product_groups[e];if(!n.is_sub&&n.isPreSelect()&&n.isValid())for(var i=0;i<n.ids.length;i++)sl9.label.main.Add(n.ids[i],t)}}},sl9.modelo.postsale=function(){this.getNum=function(){return sl9.struct.consta.OfferTypePostsale},sl9.modelo.offer.call(this),this.isCustomValid=function(){return!0},this.hasProductMessage=function(){return this.product_message?1:0},this.hasCoupon=function(){return this.coupon?1:0},this.fromJSON=function(t){this.is_not_social=t.is_not_social,this.product_message=t.product_message,this.coupon=t.coupon,this.coupon_share=this.coupon?encodeURIComponent(this.coupon):"";var e="https://"+sl9.nfec.manager.setting.GetPubDomain();this.link_share=encodeURIComponent(t.link_share||e),this.link_shoping=t.link_shoping,this.formatOffer(t),this.is_invalid_group=!1}},sl9.modelo.product_group=function(t){this.is_trigger=t,this.type_id=0,this.ids=[],this.pvids={},this.vids=[],this.first_price=0,this.is_sub=!1,this.isVLim=function(){return this.isPreSelect()&&this.pvids&&!jQuery.isEmptyObject(this.pvids)},this.isPreSelect=function(){return[sl9.struct.consta.GroupTypeManual,sl9.struct.consta.GroupTypeAuto].indexOf(this.type_id)!=-1},this.isValid=function(){return!!this.type_id&&!(this.isPreSelect()&&!this.ids.length)},this.isIn=function(e,n){switch(this.type_id){case sl9.struct.consta.GroupTypeManual:case sl9.struct.consta.GroupTypeAuto:var i=this.pvids[e]||[];if(i.length&&n){for(var o=!1,r=0;r<n.length;r++)if(i.indexOf(n[r])!=-1){o=!0;break}if(!o)return!1}return!!this.ids&&this.ids.indexOf(e)!==-1;default:return!0}},this.fromJSON=function(e){if(this.type_id=e.type_id,e.ids){var n,i,o;this.pvids=e.pvids||{},this.is_sub=e.is_sub,n=[];var r=[],c=this.isVLim();for(i=0;i<e.ids.length;i++){o=e.ids[i];var a,f=sl9.nfec.manager.product.FindByID(o);if(f)if(c){if((a=f.filterVarIDs(this.pvids[o])).length&&(r=r.concat(a),n.push(o),!this.first_price)){var l=f.getVariantByID(a[0]);this.first_price=l.price}}else n.push(o),this.first_price||(this.first_price=f.variants[0].price);else this.is_trigger&&(n.push(o),c&&(a=this.pvids[o])&&(r=r.concat(a)))}this.vids=r,this.ids=n}},this.isSimple=function(){if(!this.isVLim()&&this.isPreSelect()&&this.ids.length==1)return this.ids[0]}},sl9.modelo.product_groups=function(){this.product_groups=[],this.first_price=0,this.priority=0,this.is_invalid_group=!1,this.formatProductGroups=function(t){if(t)for(var e,n=sl9.struct.consta.GroupPriority,i=0;i<t.length;i++){var o=new sl9.modelo.product_group(this.is_trigger);if(o.fromJSON(t[i]),!o.isValid())return this.product_groups=[],void(this.is_invalid_group=!0);this.first_price+=o.first_price,(e=n.indexOf(o.type_id))>this.priority&&(this.priority=e),this.product_groups.push(o)}},this.isIn=function(t,e){for(var n=0,i=this.product_groups.length;n<i;n++)if(this.product_groups[n].isIn(t,e))return!0;return!1},this.areIn=function(t,e){for(var n=0,i=t.length;n<i;n++)if(this.isIn(t[n],e))return!0;return!1},this.isSimple=function(){if(this.product_groups.length==1)return this.product_groups[0].isSimple()},this.getPIDs=function(){for(var t=[],e=0;e<this.product_groups.length;e++)t=t.concat(this.product_groups[e].ids);return t},this.getVIDs=function(){for(var t=[],e=0;e<this.product_groups.length;e++)t=t.concat(this.product_groups[e].vids);return t},this.isPreSelect=function(){var t=this.product_groups.length;if(!t)return!1;for(var e=0;e<t;e++)if(!this.product_groups[e].isPreSelect())return!1;return!0}},sl9.modelo.rec=function(){this.place_id=0,this.not_btn=!1,sl9.modelo.offer.call(this),this.getNum=function(){return sl9.struct.consta.OfferTypeRec},this.isCustomValid=function(){return!!this.product_groups.length},this.fromJSON=function(t){if(this.place_id=t.place_id,this.not_btn=t.not_btn,t.trigger){var e=t.trigger.label;e&&(t.label=e,t.trigger.label="")}this.formatOffer(t)}},sl9.modelo.upsale=function(){this.is_replace=!1,this.is_strict=!1,this.display_id=0,this.getNum=function(){return sl9.struct.consta.OfferTypeUpsell},sl9.modelo.offer.call(this),this.isCustomValid=function(){return!!this.trigger.product_groups.length&&!!this.product_groups.length},this.fromJSON=function(t){if(this.is_replace=t.is_replace,this.display_id=t.display_id||0,this.formatOffer(t),this.isAI()&&(this.discount.type_id=0),this.discount.isValid()&&!this.is_replace){var e=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeUpsell,"up_strict"),n=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeUpsell,"up_strict_no");e&&(this.is_strict=!0),this.discount.type_id!=sl9.nfec.consta.DiscountTypePercent||n||50<=this.discount.value&&(this.is_strict=!0)}},this.isPopup=function(){return[0,1,3,4].indexOf(this.display_id)!=-1},this.isWidget=function(){return[2,3,4].indexOf(this.display_id)!=-1},this.getPDisplayID=function(){return[1,4].indexOf(this.display_id)!=-1?1:0}},sl9.modelo.sale=function(){this.getNum=function(){return sl9.struct.consta.OfferTypeFirst},sl9.modelo.offer.call(this),this.isCustomValid=function(){return!!this.product_groups.length&&!!this.discount.isValid()},this.fromJSON=function(t){this.formatOffer(t)}},sl9.modelo.trigger=function(){this.is_trigger=!0,this.online_off=!1,this.page_ids=[],this.min_cart=0,this.on_checkout=!1,this.country_codes=[],this.schedule_ids=[],this.schedules=[],this.segment_ids=[],this.segments=[],this.keyword_ids=[],this.keywords=[],sl9.modelo.offertpl.call(this),this.label="",this.compare=function(t){var e=function(i,o){return i==o?0:i&&o?o<i?1:-1:i?-1:1},n=e(this.keywords.length,t.keywords.length);return n||((n=e(this.schedules.length,t.schedules.length))?n:(n=e(this.segments.length,t.segments.length))||e(this.country_codes.length,t.country_codes.length))},this.checkCountry=function(t){return!(t&&t!="*"&&this.country_codes&&this.country_codes.length&&this.country_codes.indexOf(t)==-1)},this.checkKeyword=function(t){if(!this.keywords||!this.keywords.length)return!0;for(var e=0;e<this.keywords.length;e++)if(this.keywords[e].id==t)return!0;return!1},this.checkCustomer=function(t){if(!this.segments||!this.segments.length)return!0;window.actSegment=1;for(var e=0;e<this.segments.length;e++)if(this.segments[e].check(t))return!0;return!1},this.checkPage=function(t){return!(!this.page_ids||this.page_ids.indexOf(t.type)==-1)&&!(t.type==sl9.nfec.consta.PageTypeProduct&&!this.isIn(t.payload.id))},this.checkOnCheckout=function(t){return!(this.on_checkout&&!t)},this.fromJSON=function(t){this.page_ids=t.page_ids,this.min_cart=t.min_cart,this.on_checkout=t.on_checkout,this.online_off=t.online_off,this.label=t.label||"",this.country_codes=t.country_codes||[],this.schedule_ids=t.schedule_ids||[],this.segment_ids=t.segment_ids||[],this.keyword_ids=t.keyword_ids||[];for(var e=0;e<this.schedule_ids.length;e++){var n=sl9.manager.schedule.Get(this.schedule_ids[e]);this.schedules.push(n)}for(e=0;e<this.segment_ids.length;e++)n=sl9.manager.segment.Get(this.segment_ids[e]),this.segments.push(n);for(e=0;e<this.keyword_ids.length;e++)(n=sl9.manager.keyword.Get(this.keyword_ids[e]))&&this.keywords.push(n);this.formatOfferTpl(t);var i=sl9.struct.consta.GroupPriority;this.product_groups.sort(function(o,r){var c=i.indexOf(o.type_id),a=i.indexOf(r.type_id);return a<c?-1:c<a?1:0})},this.countNextTime=function(){for(var t=0,e=0;e<this.schedules.length;e++){var n=this.schedules[e].countNextTime();if(!n)return 0;(!t||n<t)&&(t=n)}return t}},sl9.modelo.wholesale=function(){this.apply_num=0,this.levels=[],sl9.modelo.offer.call(this),this.mtv_message="",this.display_id=0,this.custom_label="",this.getNum=function(){return sl9.struct.consta.OfferTypeWholesale},this.isCustomValid=function(){return!!this.product_groups.length&&!!this.levels.length},this.fromJSON=function(t){if(this.apply_num=t.apply_num,this.mtv_message=t.mtv_message,this.display_id=t.display_id||0,t.trigger&&(this.custom_label=t.trigger.label||"",t.trigger.label=""),this.formatOffer(t),this.discount.isValid()){for(var e={},n=[],i=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"buy_quantity")||"Buy {quantity}",o=0;o<this.discount.value.levels.length;o++){var r=this.discount.value.levels[o];if(r.discount){var c=new sl9.modelo.discount;if(c.fromJSON(r.discount,this),c.isValid()){r.discount=c;var a=nfec.util.tool.Replaces(i,"{quantity}",r.quantity);switch(e[r.quantity]||(e[r.quantity]={quantity:r.quantity,range:r.quantity,quantity_btn:a,discount:null,is_discount:!1,gifts:[],is_freeship:!1,giftIDs:[],vids:[]},n.push(e[r.quantity])),r.discount.origin_type_id){case sl9.nfec.consta.DiscountTypeFreeGift:var f=r.discount.pids;if(r.discount.vids)for(var l=0;l<r.discount.vids.length;l++){var _=r.discount.vids[l];e[r.quantity].vids.indexOf(_)==-1&&e[r.quantity].vids.push(_)}for(e[r.quantity].gifts.push(f),l=0;l<f.length;l++)e[r.quantity].giftIDs.indexOf(f[l])==-1&&e[r.quantity].giftIDs.push(f[l]);break;case sl9.nfec.consta.DiscountTypeFreeShip:e[r.quantity].is_freeship=!0;break;case sl9.nfec.consta.DiscountTypePrice:this.display_price=!0;default:e[r.quantity].is_discount=!0,e[r.quantity].discount=r.discount}}}}if(n.length){n.sort(function(g,v){return g.quantity<v.quantity?-1:1});for(var u=this.isSimple(),p=0;p<n.length;p++){var h=n[p];u&&(h.giftIDs.length!=1||h.vids.length||u==h.giftIDs[0]&&(h.isSimple=!0));var m=n[p+1];m?m.quantity<=h.quantity+1||(h.range=h.quantity+" - "+(m.quantity-1)):h.range=h.quantity+" +"}this.levels=n}}},this.addCustomLabel=function(){for(var t=this.custom_label.indexOf("{price}")!=-1,e=this.product_groups[0],n=this.levels[this.levels.length-1].discount,i=0;i<e.ids.length;i++){var o=e.ids[i],r=this.custom_label;if(n&&t){for(var c=sl9.nfec.manager.product.FindByID(o).filterVars(e.vids),a=0,f=0;f<c.length;f++)(!a||c[f].price<a)&&(a=c[f].price);switch(n.type_id){case sl9.nfec.consta.DiscountTypeValue:a-=n.value;break;case sl9.nfec.consta.DiscountTypePercent:a=a*(100-n.value)/100}a<0&&(a=0),a=sl9.nfec.util.tpl.ToCurrency(a),r=r.replace("{price}",a)}sl9.label.main.Add(o,r)}},this.getNextLevel=function(t){for(var e=0;e<this.levels.length;e++)if(!(this.levels[e].quantity<=t))return this.levels[e];return null}},sl9.manager={},sl9.manager.bundles={Set:function(t){nfec.store.control.Set("bun",t.toState(),864e3,!0)},Get:function(){var t=nfec.store.control.Get("bun"),e=new sl9.model.bundles;return t&&e.parseState(t),e},RemoveBunlde:function(t){var e=sl9.manager.bundles.Get();e.removeItem(t),sl9.manager.bundles.Set(e)}},sl9.manager.ckeyword={Set:function(t){sl9.nfec.store.control.Set("kwd",t,864e3,!0)},Get:function(){var t=sl9.nfec.store.control.Get("kwd");return t?parseInt(t):null}},sl9.manager.draft_order={IsLoyal:!1,Get:function(t){var e,n,i=sl9.nfec.manager.cart.Get(),o=t||sl9.manager.promo.Get(),r=new sl9.model.draft_order,c={},a=function(q){return!(!sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"no_giftable")||!sl9.manager.nogif.Check(q.offer_type_id,q.offer_id))};t:for(var f=0;f<o.items.length;f++)if(!(e=o.items[f]).is_cart){var l=new sl9.model.draft_order_item,_=new sl9.model.draft_order_discount;switch(e.discount_type){case sl9.nfec.consta.DiscountTypeFreeShip:r.setFreeShip();continue t;case sl9.nfec.consta.DiscountTypeFreeGift:if(a(e)||!(y=sl9.nfec.manager.product.FindByID(e.product_id))||!(w=y.getVariantByID(e.variant_id)))continue t;var u=w.price;w.price0!==void 0&&(u=w.price0),_.fromFreeGift(u,e.quantity),l.discount=_,l.price=u,r.has_discount=!0;break;case sl9.nfec.consta.DiscountTypePercent:case sl9.nfec.consta.DiscountTypeValue:var p=c[e.variant_id]||0;if(!(n=i.findItemByVariant(e.product_id,e.variant_id,p)))continue t;p++,c[e.variant_id]=p,l.addPropertiesByCartItems(n);var h=n.price,m=(u=-1,sl9.nfec.manager.product.FindByID(e.product_id));if(m){var g=m.getVariantByID(e.variant_id);g&&g.price0!==void 0&&(u=g.price0)}l.price=h,_.fromDiscount(e,h,e.quantity),-1<u&&(_.price0=u),l.discount=_,r.change_cart_price=!0,r.has_discount=!0;break;default:if(p=c[e.variant_id]||0,!(n=i.findItemByVariant(e.product_id,e.variant_id,p)))continue t;p++,c[e.variant_id]=p,l.addPropertiesByCartItems(n),l.price=n.price}l.product_id=e.product_id,l.variant_id=e.variant_id,l.quantity=e.quantity,r.addItem(l)}var v=r.getTotalAmount();t:for(f=0;f<o.items.length;f++)if(_=new sl9.model.draft_order_discount,l=new sl9.model.draft_order_item,(e=o.items[f]).is_cart){switch(e.discount_type){case sl9.nfec.consta.DiscountTypeFreeShip:r.setFreeShip(),(T=sl9.manager.offer.Get(e.offer_type_id,e.offer_id))&&(!r.min_fship||r.min_fship<T.goal)&&(r.min_fship=T.goal),T&&(!r.min_cart||r.min_cart<T.goal)&&(r.min_cart=T.goal);continue t;case sl9.nfec.consta.DiscountTypeFreeGift:if(a(e))continue t;var y,w;if(!(y=sl9.nfec.manager.product.FindByID(e.product_id))||!(w=y.getVariantByID(e.variant_id)))continue t;u=w.price,w.price0!==void 0&&(u=w.price0),_.fromFreeGift(u,1),l.discount=_,l.variant_id=w.id,l.quantity=e.quantity,l.price=u,r.addItem(l);break;default:var T;_.fromDiscount(e,v),r.discount=_,(T=sl9.manager.offer.Get(e.offer_type_id,e.offer_id))&&(!r.min_cart||r.min_cart<T.goal)&&(r.min_cart=T.goal),r.change_cart_price=!0}r.has_discount=!0}return r.cart_token=i.token,r.addCartAttr(i),r.currency=sl9.common.checkout.CheckoutCurrency,sl9.manager.draft_order.IsLoyal&&(r.has_discount=!0),nfec.IsDmodeNone&&(r.has_discount=!1),r},GetTotalDiscount:function(t){var e=sl9.nfec.manager.cart.GetOldTotal()-t.getTotalAmount();return e<.005?0:e}},sl9.manager.idsflag={Set:function(t,e){sl9.nfec.store.control.Set(t,JSON.stringify(e),3600,!0)},Get:function(t){var e=sl9.nfec.store.control.Get(t);return e?JSON.parse(e):[]},Add:function(t,e){var n=sl9.manager.idsflag.Get(t);return n.indexOf(e)==-1&&(n.push(e),sl9.manager.idsflag.Set(t,n),!0)},Check:function(t,e){return sl9.manager.idsflag.Get(t).indexOf(e)!=-1}},sl9.manager.gifter=function(){this.offsetMap={},this.promo=null,this.init=function(t){this.promo=t},this.serve=function(t,e,n,i,o){n.quantity=1,n.discount_type=sl9.nfec.consta.DiscountTypeFreeGift;var r=this.promo.findGiftsByOffer(t,e.id),c="k_"+t+"_"+e.id;this.offsetMap[c]||(this.offsetMap[c]=0);var a=this.offsetMap[c];n.id=parseInt("4"+e.id+"0"+t+"0"+a);var f=r[a];this.offsetMap[c]++,i||(i=e.discount.value?e.discount.value.split(","):[]);for(var l=0;l<i.length;l++)i[l]=parseInt(i[l]);if(o||(o=e.discount.vids||[]),n.vids=o.join(","),n.discount_value=i.join(","),f&&i.indexOf(f.product_id)!=-1&&(!o.length||o.indexOf(f.variant_id)!=-1))return n.product_id=f.product_id,void(n.variant_id=f.variant_id);var _=sl9.nfec.manager.gift.FindItem(sl9.struct.app.id,t,e.id);if(_&&-1<i.indexOf(_.product_id)&&(!o.length||o.indexOf(_.variant_id)!=-1))return n.product_id=_.product_id,void(n.variant_id=_.variant_id);var u=sl9.nfec.manager.cart.Get();if(u){var p=u.findItemsByVIDs(i,o);if(p.length)return n.product_id=p[0].product_id,void(n.variant_id=p[0].variant_id)}n.product_id=i[0];var h=sl9.nfec.manager.product.FindByID(i[0]);if(!h)return!0;o.length?n.variant_id=o[0]:n.variant_id=h.variants[0].id}},sl9.manager.dcode={Set:function(t){sl9.nfec.store.control.Set("dco",t.toState(),36e4,!0),sl9.nfec.manager.coupon.Set(t.code)},Get:function(){var t=sl9.nfec.store.control.Get("dco");if(!t)return null;var e=new sl9.model.dcode;return e.parseState(t),e},Remove:function(t){sl9.nfec.manager.coupon.Remove(t),sl9.nfec.store.control.Remove("dco");var e=nfec.manager.cart.Get();e&&!e.attributes.discount_code||sl9.nfec.platform.current.cart_api.AddAttr({discount_code:""})},PreCheckCode:function(){var t=sl9.manager.dcode.Get();if(t){var e=sl9.nfec.manager.cart.Get(),n=sl9.manager.draft_order.Get();if(t.isCartTotalValid(e,n))return t;sl9.manager.dcode.Remove()}},HandleDraftOrder:function(t){var e=sl9.manager.dcode.Get();if(e){var n=sl9.nfec.manager.cart.Get();if(e.isCartTotalValid(n,t)){var i=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"scode_prefix")||"SUM";if(e.code.toUpperCase().indexOf(i+"_")!==0){var o=t.getTotalAmountBeforeCartDiscount();if(e.target_type!="shipping_line"){var r=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"skip_discounted");if(e.target_selection!="all"||e.value_type!="fixed_amount"&&r){t.min_cart;var c,a=e.getOfferProductIDs();if(e.q_r.o_quantity)sl9.manager.dcode.HBXGY(e,t,n);else for(var f=0;f<t.items.length;f++){if(c=t.items[f],a.length||e.o_variant_ids.length){if(a.indexOf(c.product_id)==-1&&e.o_variant_ids.indexOf(c.variant_id)==-1)continue}else if(!r)return;(_=new sl9.model.draft_order_discount).fromDiscount(e.getDiscount(c.quantity),c.price,c.quantity);var l=_.amount;if(c.discount&&(l-=c.discount.amount,_.price0=c.discount.price0),!(l<=0)&&(c.discount=_,t.discount_code=e.code,e.isOncePerOrder()&&(e.value-=_.amount,e.value<=0)))return}}else{var _;(_=new sl9.model.draft_order_discount).fromDiscount(e.getDiscount(),o);var u=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"min_freeship");if(t.min_fship&&u){var p=o-t.min_fship;if(p<=0)return;_.amount>p&&(_.amount=p,_.value=p)}(!t.discount||_.amount>t.discount.amount)&&(t.discount=_,t.discount_code=e.code)}}else t.setFreeShip(1)}}}},HBXGY:function(){}},sl9.manager.nogif={Check:function(t,e){return!!sl9.nfec.store.control.Get("ngi_"+t+"_"+e)},Del:function(t,e){sl9.nfec.store.control.Remove("ngi_"+t+"_"+e)},Set:function(t,e){sl9.nfec.store.control.Set("ngi_"+t+"_"+e,1,186400,!0)}},sl9.manager.offer={Data:{},Add:function(t){var e,n,i=sl9.nfec.manager.country.Get(),o=sl9.nfec.manager.customer.Get(),r=sl9.manager.ckeyword.Get();for(e in t)if(t.hasOwnProperty(e)){var c=parseInt(e);for(n in sl9.manager.offer.Data[c]=[],t[e])if(t[e].hasOwnProperty(n)){var a;switch(c){case sl9.struct.consta.OfferTypeBundle:a=sl9.modelo.bundle;break;case sl9.struct.consta.OfferTypeUpsell:a=sl9.modelo.upsale;break;case sl9.struct.consta.OfferTypeRec:a=sl9.modelo.rec;break;case sl9.struct.consta.OfferTypeFirst:a=sl9.modelo.sale;break;case sl9.struct.consta.OfferTypeCart:a=sl9.modelo.motivator;break;case sl9.struct.consta.OfferTypeWholesale:a=sl9.modelo.wholesale;break;case sl9.struct.consta.OfferTypePostsale:a=sl9.modelo.postsale;break;case sl9.struct.consta.OfferTypeLoyal:a=sl9.modelo.loyal}var f=new a;if(n)try{if(f.fromJSON(t[e][n]),!f.isValid(i,o,r)||!f.id)continue;f.label&&f.addLabel(f.label),f.trigger.label&&f.trigger.addLabel(f.trigger.label),f.custom_label&&f.addCustomLabel(),sl9.manager.offer.Data[c].push(f)}catch(l){console.log(l)}}}},Set:function(t,e){sl9.manager.offer.Data[t]=e},Get:function(t,e){for(var n=sl9.manager.offer.List(t),i=0;i<n.length;i++)if(n[i].id==e)return n[i];return null},ListAll:function(t){return sl9.manager.offer.Data[t]||[]},List:function(t){var e=sl9.manager.offer.Data[t],n=sl9.common.checkout.IsClickedCheckoutBtn(),i=[];if(!e)return i;for(var o=0;o<e.length;o++)e[o].trigger.checkOnCheckout(n)&&i.push(e[o]);return i}},sl9.manager.keyword={Data:{},Get:function(t){return sl9.manager.keyword.Data[t]},SetFromJSON:function(t){var e=new sl9.model.keyword;return e.fromJSON(t),sl9.manager.keyword.Data[e.id]=e}},sl9.manager.product_offer={Set:function(t){sl9.nfec.store.control.Set("pof",t.toState(),186400,!0)},Get:function(){var t=sl9.nfec.store.control.Get("pof"),e=new sl9.model.product_offers;return t&&e.parseState(t),e},AddRaw:function(t,e,n){if(!sl9.manager.product_offer.Get().findItemByProduct(n)){var i=new sl9.model.product_offer;i.product_id=parseInt(n),i.offer_type_id=parseInt(t),i.offer_id=parseInt(e),sl9.manager.product_offer.addItem(i)}},addItem:function(t){var e=sl9.manager.product_offer.Get();e.addItem(t),sl9.manager.product_offer.Set(e)},FindByProduct:function(t,e){sl9.manager.promo.Get();var n=sl9.nfec.manager.discountable.Get(t,e);return n||sl9.manager.product_offer.Get().findItemByProduct(t)}},sl9.manager.rcode={Set:function(t){nfec.store.control.Set("rco",t.toState(),864e3,!0)},Del:function(){nfec.store.control.Remove("rco")},Get:function(){var t=nfec.store.control.Get("rco"),e=new sl9.model.rcode;return t&&e.parseState(t),e}},sl9.manager.promo={Set:function(t){nfec.store.control.Set("prm",t.toState(),864e3,!0)},Get:function(){var t=nfec.store.control.Get("prm"),e=new sl9.model.promo;return t&&e.parseState(t),e},UpdateItemVariant:function(t,e,n){var i=sl9.manager.promo.Get();i.updateItemVariant(t,e,n),sl9.manager.promo.Set(i)}},sl9.manager.replaceflag={Set:function(t){nfec.store.control.Set("rpv",t.toState(),864e3,!0)},Get:function(){var t=nfec.store.control.Get("rpv"),e=new sl9.model.replace_items;return t&&e.parseState(t),e},Add:function(t,e){var n=sl9.manager.replaceflag.Get();if(!n.findItem(t,e)){var i=new sl9.model.replace_item;i.product_id=t,i.variant_id=e,n.items.push(i),sl9.manager.replaceflag.Set(n)}},CheckGroups:function(t){if(!t)return!1;var e=sl9.manager.replaceflag.Get();t:for(var n=0;n<t.length;n++){var i=t[n];switch(i.type_id){case sl9.struct.consta.GroupTypeManual:case sl9.struct.consta.GroupTypeAuto:if(i.vids&&i.vids.length){if(e.hasVarIDs(i.vids))return!0;continue t}if(!i.ids)return!1;if(e.hasPIDs(i.ids))return!0;break;default:return!!e.items.length}}return!1}},sl9.manager.rform={Check:function(){return!!sl9.nfec.store.control.Get("rfmf")},Del:function(){sl9.nfec.store.control.Remove("rfmf")},Set:function(t){sl9.nfec.store.control.Set("rfmf",1,3e3,!0),sl9.nfec.store.control.Set("rfm",t.toState(),186400,!0)},Get:function(){var t=sl9.nfec.store.control.Get("rfm");if(!t)return null;var e=new sl9.model.rform;return e.parseState(t),e}},sl9.manager.schedule={Data:{},Get:function(t){return sl9.manager.schedule.Data[t]},SetFromJSON:function(t){var e=new sl9.model.schedule;e.fromJSON(t),sl9.manager.schedule.Data[e.id]=e}},sl9.manager.segment={Data:{},Get:function(t){return sl9.manager.segment.Data[t]},SetFromJSON:function(t){var e=new sl9.model.segment;e.fromJSON(t),sl9.manager.segment.Data[e.id]=e}},sl9.manager.session={Set:function(t){sl9.nfec.store.control.Set("ses",t.toState(),186400,!0)},Get:function(){var t=sl9.nfec.store.control.Get("ses"),e=new sl9.model.sessions;return t&&e.parseState(t),e},AddItem:function(t){var e=sl9.manager.session.Get();e.addItem(t),sl9.manager.session.Set(e)},FindItem:function(t,e,n){return sl9.manager.session.Get().findItem(t,e,n)}},sl9.manager.scode={Set:function(t){nfec.store.control.Set("scd",t.toState(),345600,!0)},Del:function(){nfec.store.control.Remove("scd")},Get:function(){var t=nfec.store.control.Get("scd"),e=new sl9.model.scode;return t&&e.parseState(t),e}},sl9.motivator={},sl9.motivator.main={Start:function(){sl9.motivator.main.formatOffers(),sl9.motivator.noti.Start()},formatOffers:function(){var t=sl9.struct.consta.OfferTypeCart,e=sl9.manager.offer.List(t);e.sort(function(n,i){return n.goal>i.goal?-1:1}),sl9.manager.offer.Set(t,e)}},sl9.motivator.noti={Start:function(){var t=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"motivator_once"),e=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"motivator_nonoti"),n=!1;sl9.nfec.event_hub.ListenTo("promo_updated",function(o,r){if(!r.compared||!r.compared.added.length&&!r.compared.removed.length){var c=sl9.motivator.noti.Find();if(c&&!c.current_amount){var a=sl9.manager.offer.Get(sl9.struct.consta.OfferTypeCart,c.offer_id),f=a.trigger.isPreSelect()?"mpf":"mcf";if(!sl9.manager.idsflag.Check(f,a.id)){var l=sl9.motivator.noti.build(c);sl9.manager.idsflag.Add(f,a.id),l&&sl9.nfec.event_hub.Trigger("notify_discount_msg",{prepend:1,content:l})}}}},!0,!0),sl9.nfec.event_hub.ListenTo("cart_empty",function(o,r){r.compared&&r.compared.removed.length&&(sl9.nfec.store.control.Remove("mcf"),sl9.nfec.store.control.Remove("mpf"))},!0,!0),sl9.nfec.event_hub.ListenTo("notify_discount_popup_discountable",function(){var o=sl9.motivator.noti.BuildProgress();o&&sl9.nfec.event_hub.Trigger("notify_discount_popup_discountable_add",{content:o})});var i=function(o,r){if(!sl9.common.checkout.IsCheckingOut){if(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"discount_widget")&&sl9.nfec.platform.current.page.Detect().type==sl9.nfec.consta.PageTypeCart&&(jQuery(".tdfPlaceDiscounts").length||sl9.nfec.platform.current.element.GetCartFormDom(!0).length))return;setTimeout(function(){if(!(e||n&&t)){var c=r.added[0],a=sl9.motivator.noti.Find(c);if(a){var f=sl9.motivator.noti.build(a);f&&(n=!0,sl9.nfec.event_hub.Trigger("notify_discount_msg",{prepend:1,content:f}))}}},100)}};sl9.nfec.event_hub.ListenTo("cart_item_added_by_update",function(o,r){i(0,r.compared)}),sl9.nfec.event_hub.ListenTo("cart_item_added",function(o,r){i(0,r)},!0,!0)},Find:function(t){var e,n=sl9.nfec.manager.cart.Get(),i=sl9.struct.consta.OfferTypeCart,o=sl9.manager.offer.List(i),r=sl9.nfec.platform.current.page.Detect(),c=sl9.manager.draft_order.Get(),a=[],f=[];t&&(a=[t.product_id],f=[t.variant_id]),a.length||r.type==sl9.nfec.consta.PageTypeProduct&&(a=[r.payload.id]),n&&(a.length||(a=n.getProductIDs()),f=n.getVariantIDs());for(var l=c.getTotalAmountBeforeCartDiscount(),_=o.length-1;0<=_;_--)if((e=o[_]).trigger.isPreSelect()&&e.trigger.areIn(a,f)&&(e.discount.type_id!=sl9.nfec.consta.DiscountTypeFreeShip||!c.free_ship)){var u=e.is_category?c.getTotalAmountBeforeCartDiscount(e.trigger.getPIDs(),e.trigger.getVIDs(),e.discount.type_id):l,p=e.goal-u;if(!e.goal&&!u&&e.first_message||!(p<=0)&&(u||e.first_message))return e.getDiscountable(u,p)}for(_=o.length-1;0<=_;_--)if(!((e=o[_]).trigger.isPreSelect()||e.discount.type_id==sl9.nfec.consta.DiscountTypeFreeShip&&c.free_ship)&&(p=e.goal-l,!e.goal&&!l&&e.first_message||!(p<=0)&&(l||e.first_message)))return e.getDiscountable(l,p);return null},build:function(t){var e=sl9.manager.offer.Get(sl9.struct.consta.OfferTypeCart,t.offer_id);sl9.common.track.AddAction(sl9.struct.consta.ActionTrackView,t.offer_type_id,t.offer_id);var n=e.message||"";if(t.current_amount||(n=e.first_message),!n)return"";var i=sl9.common.tpl.Render(sl9.notify.cart_discountable_transhtm,{discountable:t}),o=t.remain_amount;o<.01&&(o=.01),n=sl9.nfec.util.tpl.ToTranslate(n);var r=function(){n=nfec.util.tool.Replaces(n,"{discount}",i),n=nfec.util.tool.Replaces(n,"{amount}",sl9.nfec.util.tpl.ToCurrency(o)),n=nfec.util.tool.Replaces(n,"{goal}",sl9.nfec.util.tpl.ToCurrency(e.goal))};if(r(),r(),!t.current_amount)return sl9.common.tpl.Render(sl9.notify.snippet_cart_discountablehtm,{message:n,discountable:t});var c=Math.floor(98*t.current_amount/e.goal);return sl9.common.tpl.Render(sl9.notify.snippet_cart_progresshtm,{message:n,progress_style:'style="width:'+c+'%"'})},BuildProgress:function(){var t=sl9.motivator.noti.Find();if(t)return sl9.motivator.noti.build(t)}},sl9.motivator.promo={HandlePromo:function(t){var e,n=sl9.nfec.manager.cart.Get(),i=sl9.struct.consta.OfferTypeCart,o=sl9.manager.offer.List(i),r=sl9.nfec.manager.cart.GetCurrentProductIDs(),c=n?n.getVariantIDs():[];r.push(1);var a=sl9.manager.promo.Get(),f=new sl9.manager.gifter;f.init(a);var l=sl9.manager.draft_order.Get(t),_=l.getTotalAmountBeforeCartDiscount(),u=function(){var P=new sl9.model.promo_item;return P.offer_type_id=i,P.offer_id=e.id,P.app_id=sl9.struct.app.id,P.is_cart=!0,P.quantity=1,P},p=n.getAllItems(),h=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"gift_once"),m=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"offer_once"),g=!1,v=!1,y=0,w=0,T=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"discountable_no");t:for(var q=0;q<o.length;q++)if(!(((e=o[q]).is_category?l.getTotalAmountBeforeCartDiscount(e.trigger.getPIDs(),e.trigger.getVIDs(),e.discount.type_id):_)<e.goal)&&(!e.trigger.isPreSelect()||e.trigger.areIn(r,c))&&!(m&&v&&e.goal<w)){v=!0,w=e.goal,(D=u()).discount_type=e.discount.type_id,D.discount_value=e.discount.value;var S=!1;switch(e.discount.type_id){case sl9.nfec.consta.DiscountTypeFreeShip:t.addItem(D);break;case sl9.nfec.consta.DiscountTypeFreeGift:if(h&&g&&e.goal<y)continue t;if(f.serve(i,e,D))continue;g=!0,y=e.goal,t.addItem(D);break;case sl9.nfec.consta.DiscountTypeValue:t.addItem(D);break;default:if(!e.is_d_cat){t.addItem(D);continue}S=!0;for(var k=0;k<p.length;k++){var D,I=p[k];e.isIn(I.product_id,[I.variant_id])&&((D=u()).is_cart=!1,D.discount_type=e.discount.type_id,D.discount_value=e.discount.value,D.product_id=I.product_id,D.variant_id=I.variant_id,D.price=I.price,t.addItem(D))}}if(e.is_category&&S&&!T)for(k=0;k<e.product_groups.length;k++)for(var C=0;C<e.product_groups[k].ids.length;C++){var O=new sl9.nfec.model.discountable;O.app_id=sl9.struct.app.id,O.discount_type=e.discount.type_id,O.discount_value=e.discount.value,O.offer_id=e.id,O.offer_type_id=i,O.product_id=e.product_groups[k].ids[C],O.vids=e.product_groups[k].vids,sl9.nfec.manager.discountable.Set(e.product_groups[k].ids[C],O)}}}},sl9.model={},sl9.model.bundle=function(){this.id=0,this.offer_id=0,this.is_auto=0,this.items=[],this.getVarIDs=function(){for(var t=[],e=0;e<this.items.length;e++)t.push(this.items[e].variant_id);return t},this.isValid=function(t){if(t&&t.length==this.items.length){for(var e=0,n=this.items.length;e<n;e++)if(t[e].indexOf(this.items[e].variant_id)==-1)return;return!0}},this.parseState=function(t){if(this.id=t.n,this.offer_id=t.o,this.is_auto=t.a,this.items=[],t.i)for(var e,n=0,i=t.i.length;n<i;n++)(e=new sl9.model.bundle_item).parseState(t.i[n]),this.items.push(e)},this.toState=function(){for(var t={n:this.id,a:this.is_auto,o:this.offer_id,i:[]},e=0,n=this.items.length;e<n;e++)t.i.push(this.items[e].toState());return t}},sl9.model.bundle_item=function(){this.product_id=0,this.variant_id=0,this.toState=function(){return{p:this.product_id,v:this.variant_id}},this.parseState=function(t){this.product_id=t.p,this.variant_id=t.v}},sl9.model.draft_order=function(){this.id=0,this.items=[],this.free_ship=!1,this.discount=null,this.has_discount=!1,this.change_cart_price=!1,this.discount_code=null,this.min_cart=null,this.min_fship=null,this.cart_token=null,this.reserved={},this.currency="",this.notes={},this.is_loyal=!1,this.reserve=function(t,e){return this.reserved[t.variant_id]||(this.reserved[t.variant_id]=0),!(e.countByVIDs([t.variant_id])<=this.reserved[t.variant_id])&&(this.reserved[t.variant_id]+=1,!0)},this.setFreeShip=function(t){var e=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"skip_free_ship");this.free_ship=!0,t&&(this.ffs=1),e&&!t||nfec.IsDmodeNone||(this.has_discount=!0)},this.setLoyal=function(){this.is_loyal=!0,this.has_discount=!0},this.toJSON=function(){for(var t,e=[],n=0,i=0;i<this.items.length;i++)t=this.items[i].toJSON(),e.push(t),t.d&&t.d.a&&(n+=Math.floor(parseFloat(t.d.a)));var o=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"skip_free_ship")&&!this.ffs,r={i:e,s:!o&&this.free_ship,no:this.notes,il:this.is_loyal};!o&&this.free_ship&&(r.fst=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"free_ship")),this.discount&&(r.d=this.discount.toJSON(),r.d.ti=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"cart_discount"),n+=Math.floor(parseFloat(r.d.a))),this.discount_code&&(r.c=this.discount_code+"");var c=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"landing_tag");if(c){var a=sl9.manager.ckeyword.Get();if(a){var f=sl9.manager.keyword.Get(a);f&&f.title&&(r.ta=f.title)}c=="no"&&(r.ta="no")}return r.t=this.cart_token,r.m=this.currency,r.s&&(n+=1),n||(n=323),r.h=sl9.nfec.util.tool.H(n,"2",sl9.nfec.manager.setting.Data.id+""),r},this.getTotalAmount=function(){var t=this.getTotalAmountBeforeCartDiscount();return this.discount&&this.discount.amount&&(t-=this.discount.amount),t},this.getTotalAmountBeforeCartDiscount=function(t,e,n){for(var i,o=0,r=0;r<this.items.length;r++)if(i=this.items[r],(!t||t.indexOf(i.product_id)!=-1)&&(!e||!e.length||e.indexOf(i.variant_id)!=-1)&&(o+=i.price*i.quantity,i.discount&&i.discount.amount)){if(t&&i.discount.offer_type_id==sl9.struct.consta.OfferTypeCart)continue;o-=i.discount.amount}return o},this.getItemAmountVoP=function(t,e){for(var n,i=0,o=0;o<this.items.length;o++)if(n=this.items[o],(!t.length&&!e.length||t.indexOf(n.product_id)!=-1||e.indexOf(n.variant_id)!=-1)&&(i+=n.price*n.quantity,n.discount&&n.discount.amount)){if(n.discount.offer_type_id==sl9.struct.consta.OfferTypeCart)continue;i-=n.discount.amount}return i},this.getTotalDiscount=function(){for(var t,e=0,n=0;n<this.items.length;n++)(t=this.items[n]).discount&&t.discount.amount&&!t.discount.free&&(e+=t.discount.amount);return this.discount&&this.discount.amount&&(e+=this.discount.amount),e},this.getTotalItems=function(){for(var t=0,e=0;e<this.items.length;e++)t+=this.items[e].quantity;return t},this.addItem=function(t){var e,n=1;sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"no_merge_var")&&(n=0),sl9.nfec.manager.setting.IsCurrencyRound()&&(n=0);for(var i=0;i<this.items.length;i++)if((e=this.items[i]).variant_id==t.variant_id&&JSON.stringify(e.properties)==JSON.stringify(t.properties)){if(!e.discount&&!t.discount)return void(e.quantity+=1);if(n){if(e.isFree()!=t.isFree())continue;return e.quantity+=1,e.discount?t.discount&&(e.discount.amount+=t.discount.amount):t.discount&&(e.discount=t.discount),void(e.discount&&(e.discount.value=e.discount.amount/e.quantity))}if(e.discount&&t.discount&&e.discount.type_id==t.discount.type_id&&e.discount.value==t.discount.value)return e.quantity+=1,void(e.discount.amount=e.discount.value*e.quantity)}this.items.push(t)},this.addCartAttr=function(t){if(t.attributes){var e;for(e in t.attributes)t.attributes.hasOwnProperty(e)&&(this.notes[e]=t.attributes[e]+"");t.note&&(this.notes.cart_note=t.note+"")}},this.getItemDiscountValue=function(t){for(var e=0,n=0,i=0;i<this.items.length;i++)this.items[i].variant_id==t&&(this.items[i].isFree()||(n+=this.items[i].quantity,this.items[i].discount&&(e+=this.items[i].discount.amount)));return n?e/n:0},this.checkScode=function(){for(var t,e=0;e<this.items.length;e++)if((t=this.items[e]).discount&&t.discount.free)return;return!this.free_ship||!(!sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"skip_free_ship")||this.ffs)||!this.getTotalDiscount()||void 0}},sl9.model.bundles=function(){this.items=[],this.c=1,this.getID=function(){var t=new Date,e=Math.ceil(t.getTime()/1e3)+this.c;return this.c++,e},this.removeItem=function(t){for(var e=[],n=0;n<this.items.length;n++)this.items[n].id!=t&&e.push(this.items[n]);this.items=e},this.addItem=function(t){return t.id=this.getID(),this.items.push(t),t.id},this.parseState=function(t){var e=JSON.parse(t);if(this.items=[],e.i)for(var n,i=0,o=e.i.length;i<o;i++)(n=new sl9.model.bundle).parseState(e.i[i]),this.items.push(n)},this.toState=function(){for(var t={i:[]},e=0,n=this.items.length;e<n;e++)t.i.push(this.items[e].toState());return JSON.stringify(t)}},sl9.model.draft_order_discount=function(){this.type_id=0,this.value=0,this.amount=0,this.offer_type_id=0,this.free=!1,this.quantity=1,this.adjD=function(t){nfec.main.TFR&&(this.value=nfec.main.TN(this.value,2,1),this.amount=nfec.main.TN(this.value*t,2,1))},this.fromFreeGift=function(t,e){this.type_id=sl9.nfec.consta.DiscountTypeValue,this.value=t,this.amount=t*e,this.free=!0},this.fromDiscount=function(t,e,n){switch(n=n||1,this.quantity=n,this.offer_type_id=t.offer_type_id,t.discount_type){case sl9.nfec.consta.DiscountTypePercent:if(this.type_id=sl9.nfec.consta.DiscountTypeValue,nfec.manager.setting.IsCurrencyRound())this.value=Math.floor(e*t.discount_value/100);else{var i=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"round_discount");this.value=e*t.discount_value/100,i&&(this.value=Math.round(100*this.value)/100)}this.amount=this.value*n,this.adjD(n);break;default:this.type_id=t.discount_type,this.value=t.discount_value,e&&e<this.value&&(this.value=nfec.main.TN(e,2,1)),nfec.manager.setting.IsCurrencyRound()&&(this.value=Math.floor(this.value)),this.amount=this.value*n,this.adjD(n)}},this.toJSON=function(){var t=this.value,e=this.amount;if(t){var n=Math.round(e/t);this.price0!==void 0&&this.price0<t&&(t=this.price0),nfec.main.TFR||(t=Math.round(100*t)/100),e=n*t}return{t:this.type_id,v:nfec.main.TF(t,2,1),a:nfec.main.TF(e,2,1)}}},sl9.model.dcode=function(){this.code="",this.target_type="",this.target_selection="",this.allocation_method="",this.al=0,this.value_type="",this.value="",this.o_product_ids=[],this.o_variant_ids=[],this.o_collection_ids=[],this.t_customer=0,this.opc=0,this.t_product_ids=[],this.t_variant_ids=[],this.t_collection_ids=[],this.t_subtotal_range={not_less_than:0},this.t_quantity_range={not_less_than:0},this.t_shipping_price_range={not_greater_than:0},this.q_r={t_quantity:0,o_quantity:0},this.rp=0,this.collects={},this.items=[],this.isOncePerOrder=function(){return this.allocation_method=="across"&&this.value_type=="fixed_amount"},this.getDiscount=function(t){var e={discount_value:this.value};switch(this.value_type){case"fixed_amount":e.discount_type=sl9.nfec.consta.DiscountTypeValue,t&&this.isOncePerOrder()&&(e.discount_value=this.value/t);break;default:e.discount_type=sl9.nfec.consta.DiscountTypePercent}return e},this.isCartTotalValid=function(t,e){var n=this.getOfferProductIDs(),i=this.o_variant_ids,o=this.t_quantity_range.not_less_than||1;return!(t.countVoP(n,i)<o)&&!((n.length||i.length?e.getItemAmountVoP(n,i):e.getTotalAmount())<this.t_subtotal_range.not_less_than)},this.getTriggerProductIDs=function(){if(this.t_product_ids.length)return this.t_product_ids;for(var t,e,n=[],i=0;i<this.t_collection_ids.length;i++)if(t=this.t_collection_ids[i],this.collects[t])for(e=this.collects[t].length,b=0;b<e;b++)n.indexOf(this.collects[t][b])==-1&&n.push(this.collects[t][b]);return n},this.getOfferProductIDs=function(){if(this.o_product_ids.length)return this.o_product_ids;for(var t,e,n=[],i=0;i<this.o_collection_ids.length;i++)if(t=this.o_collection_ids[i],this.collects[t])for(e=this.collects[t].length,b=0;b<e;b++)n.indexOf(this.collects[t][b])==-1&&n.push(this.collects[t][b]);return n},this.toState=function(){var t={c:this.code,i:this.id,tt:this.target_type,ts:this.target_selection,am:this.allocation_method,al:this.al,vt:this.value_type,v:this.value,op:this.o_product_ids,ov:this.o_variant_ids,oc:this.o_collection_ids,tb:this.t_customer,opc:this.opc,tp:this.t_product_ids,tv:this.t_variant_ids,tc:this.t_collection_ids,rt:{g:this.t_subtotal_range.not_less_than},rq:{g:this.t_quantity_range.not_less_than},rs:{l:this.t_shipping_price_range.not_greater_than},rr:{t:this.q_r.t_quantity,o:this.q_r.o_quantity},rp:this.rp,cl:this.collects};return JSON.stringify(t)},this.parseState=function(t){var e=JSON.parse(t);this.uncompress(e)},this.uncompress=function(t){this.code=t.c,this.id=t.i,this.target_type=t.tt,this.target_selection=t.ts,this.allocation_method=t.am,this.al=t.al,this.value_type=t.vt,this.value=t.v,this.o_product_ids=t.op||[],this.o_variant_ids=t.ov||[],this.o_collection_ids=t.oc||[],this.t_customer=t.tb,this.opc=t.opc,this.t_product_ids=t.tp||[],this.t_variant_ids=t.tv||[],this.t_collection_ids=t.tc||[],this.t_subtotal_range={not_less_than:t.rt.g},this.t_quantity_range={not_less_than:t.rq.g},this.t_shipping_price_range={not_greater_than:t.rs.l},this.q_r={t_quantity:t.rr.t,o_quantity:t.rr.o},this.rp=t.rp,this.collects=t.cl||{}},this.fromJSON=function(t){t.v=Math.abs(parseFloat(t.v)),t.i=t.id,t.rt=t.rt||{},t.rt.g=t.rt.greater_than_or_equal_to||0,t.rt.g=Math.abs(parseFloat(t.rt.g)),t.rq=t.rq||{},t.rq.g=t.rq.greater_than_or_equal_to||0,t.rs=t.rs||{},t.rs.l=t.rs.less_than_or_equal_to||0,t.rs.l=Math.abs(parseFloat(t.rs.l)),t.rr=t.rr||{},t.rr.t=t.rr.prerequisite_quantity||0,t.rr.o=t.rr.entitled_quantity||0,t.rp=parseFloat(t.rp),t.tb=t.t_customer?1:0,t.opc=t.opc?1:0,this.uncompress(t)}},sl9.model.keyword=function(){this.id=0,this.title="",this.fromJSON=function(t){this.id=t.id,this.title=t.title||""},this.check=function(t){return t.indexOf(this.title)!=-1}},sl9.model.draft_order_item=function(){this.variant_id=0,this.quantity=0,this.discount=null,this.properties=[],this.product_id=0,this.price=0,this.isFree=function(){return!!this.discount&&!!this.discount.free},this.addPropertiesByCartItems=function(t){var e;if(t.properties)for(e in t.properties)t.properties.hasOwnProperty(e)&&this.properties.push({n:e+"",v:t.properties[e]+""})},this.toJSON=function(){var t={v:this.variant_id,q:this.quantity,p:this.properties};return this.discount&&(t.d=this.discount.toJSON()),t}},sl9.model.product_offer=function(){this.product_id=0,this.offer_id=0,this.offer_type_id=0,this.toState=function(){return{p:this.product_id,o:this.offer_id,n:this.offer_type_id}},this.parseState=function(t){this.product_id=t.p,this.offer_id=t.o,this.offer_type_id=t.n}},sl9.model.promo=function(){this.items=[],this.skips=[],this.c=1,this.getID=function(){var t=new Date,e=Math.ceil(t.getTime()/1e3)+this.c;return this.c++,e},this.findItemByID=function(t){for(var e=0;e<this.items.length;e++)if(this.items[e].id==t)return this.items[e];return null},this.updateItemVariant=function(t,e,n){var i=this.findItemByID(t);i&&(i.product_id=e,i.variant_id=n)},this.findItemByDiscountType=function(t){for(var e=[],n=0;n<this.items.length;n++)this.items[n].discount_type==t&&e.push(this.items[n]);return e},this.getSum=function(){for(var t=[],e=0;e<this.items.length;e++){var n=this.items[e];n.discount_type&&(n.isNormalDsc()||nfec.IsDmodeNone&&n.discount_type!=sl9.nfec.consta.DiscountTypeFreeShip||t.push(n))}return t},this.hasCartItemDiscount=function(t){for(var e,n=0;n<this.items.length;n++)if((e=this.items[n]).is_cart&&e.isNormalDsc())return e.discount_type==t.discount_type&&e.discount_value<t.discount_value&&(this.items[n]=t),!0;return!1},this.findGiftsByOffer=function(t,e){for(var n,i=[],o=0;o<this.items.length;o++)(n=this.items[o]).offer_type_id==t&&n.offer_id==e&&n.discount_type==sl9.nfec.consta.DiscountTypeFreeGift&&i.push(n);return i},this.hasFreeShip=function(){return!!this.findItemByDiscountType(sl9.nfec.consta.DiscountTypeFreeShip).length},this.addItem=function(t){switch(t.id=t.id||this.getID(),t.discount_type){case sl9.nfec.consta.DiscountTypeFreeShip:if(this.hasFreeShip())return;break;case sl9.nfec.consta.DiscountTypePercent:case sl9.nfec.consta.DiscountTypeValue:if(t.is_cart){if(this.hasCartItemDiscount(t))return;break}for(var e=-1,n=-1,i=0;i<this.items.length;i++){var o=this.items[i];o.discount_type!=sl9.nfec.consta.DiscountTypeFreeGift&&o.product_id==t.product_id&&o.variant_id==t.variant_id&&(t.price=o.price,o.getDiscountedPrice()<=t.getDiscountedPrice()||o.getDiscountedPrice()<=n||(e=i,n=o.getDiscountedPrice()))}return e<0?void 0:(t.price=this.items[e].price,void(this.items[e]=t))}this.items.push(t)},this.hasSameItem=function(t){for(var e,n=0;n<this.items.length;n++)if(e=this.items[n],this.skips.indexOf(e.id)==-1&&e.isSame(t))return this.skips.push(e.id),!0;return!1},this.findAddedItems=function(t,e){for(var n,i,o=[],r=[],c=0;c<this.items.length;c++)(n=this.items[c]).discount_type&&(n.bundle_id&&e||n.discount_type==sl9.nfec.consta.DiscountTypeFreeShip&&t.hasFreeShip()||t.hasSameItem(n)||(i=n.offer_type_id+"_"+n.offer_id+"_"+n.discount_type,r.indexOf(i)==-1&&(r.push(i),o.push(n))));return o},this.parseState=function(t){var e=JSON.parse(t);if(this.items=[],e.i)for(var n,i=0,o=e.i.length;i<o;i++)(n=new sl9.model.promo_item).parseState(e.i[i]),this.items.push(n)},this.toState=function(){for(var t={i:[]},e=0,n=this.items.length;e<n;e++)t.i.push(this.items[e].toState());return JSON.stringify(t)}},sl9.model.product_offers=function(){this.items=[],this.addItem=function(t){for(var e,n=0;n<this.items.length;n++)if((e=this.items[n]).product_id&&t.product_id&&e.offer_type_id==t.offer_type_id&&e.offer_id==t.offer_id)return void(this.items[n]=t);this.items.push(t)},this.findItemByProduct=function(t){for(var e,n=0;n<this.items.length;n++)if((e=this.items[n]).product_id==t)return e;return null},this.parseState=function(t){var e=JSON.parse(t);if(this.items=[],e.i)for(var n,i=0,o=e.i.length;i<o;i++)(n=new sl9.model.product_offer).parseState(e.i[i]),this.items.push(n)},this.toState=function(){for(var t={i:[]},e=0,n=this.items.length;e<n;e++)t.i.push(this.items[e].toState());return JSON.stringify(t)}},sl9.model.promo_item=function(){this.id=0,this.discount_type=0,this.discount_value=null,this.price=0,this.bundle_id=0,this.product_id=0,this.variant_id=0,this.quantity=0,this.is_cart=!1,this.offer_id=0,this.offer_type_id=0,this.app_id=0,this.vids="",this.isNormalDsc=function(){return-1<[sl9.nfec.consta.DiscountTypePercent,sl9.nfec.consta.DiscountTypeValue].indexOf(this.discount_type)},this.discount_value_round=function(){return Math.round(10*this.discount_value)/10},this.getDiscountedPrice=function(){var t=this.price;switch(this.discount_type){case sl9.nfec.consta.DiscountTypeValue:t=this.price-this.discount_value;break;case sl9.nfec.consta.DiscountTypePercent:t=this.price*(100-this.discount_value)/100}return t<0&&(t=0),t},this.isSame=function(t){var e;for(e in t)if(t.hasOwnProperty(e)&&typeof t[e]!="function"&&!(-1<["id","price","vids"].indexOf(e))&&t[e]!==this[e])return!1;return!0},this.toState=function(){return{i:this.id,dt:this.discount_type,dv:this.discount_value,b:this.bundle_id,p:this.product_id,v:this.variant_id,q:this.quantity,c:this.is_cart,oi:this.offer_id,ot:this.offer_type_id,a:this.app_id,g:this.vids||""}},this.parseState=function(t){this.discount_type=t.dt,this.discount_value=t.dv,this.bundle_id=t.b,this.product_id=t.p,this.variant_id=t.v,this.quantity=t.q,this.is_cart=t.c,this.offer_id=t.oi,this.offer_type_id=t.ot,this.app_id=t.a,this.id=t.i,this.vids=t.g||""}},sl9.model.rcode=function(){this.id=0,this.code="",this.token="",this.amount="",this.goal="",this.toState=function(){return JSON.stringify({i:this.id,c:this.code,t:this.token,a:this.amount,g:this.goal})},this.parseState=function(t){var e=JSON.parse(t);this.id=e.i,this.code=e.c,this.token=e.t,this.amount=e.a,this.goal=e.g},this.check=function(t,e,n){if(this.token==t){if(this.amount==e)return!0}else this.id=0}},sl9.model.replace_item=function(){this.product_id=0,this.variant_id=0,this.toState=function(){return{p:this.product_id,v:this.variant_id}},this.parseState=function(t){this.product_id=t.p,this.variant_id=t.v}},sl9.model.replace_items=function(){this.items=[],this.findItem=function(t,e){for(var n=0;n<this.items.length;n++)if(this.items[n].product_id==t&&this.items[n].variant_id==e)return this.items[n];return null},this.hasPIDs=function(t){for(var e=0;e<this.items.length;e++)if(t.indexOf(this.items[e].product_id)!=-1)return!0;return!1},this.hasVarIDs=function(t){for(var e=0;e<this.items.length;e++)if(t.indexOf(this.items[e].variant_id)!=-1)return!0;return!1},this.parseState=function(t){var e=JSON.parse(t);if(this.items=[],e.i)for(var n,i=0,o=e.i.length;i<o;i++)(n=new sl9.model.replace_item).parseState(e.i[i]),this.items.push(n)},this.toState=function(){for(var t={i:[]},e=0,n=this.items.length;e<n;e++)t.i.push(this.items[e].toState());return JSON.stringify(t)}},sl9.model.rform=function(){this.per_page=0,this.tpl="",this.clas="",this.wrap="",this.wrapTag="",this.toState=function(){return JSON.stringify({p:this.per_page,t:this.tpl,c:this.clas,w:this.wrap,wt:this.wrapTag})},this.parseState=function(t){var e=JSON.parse(t);this.per_page=e.p,this.tpl=e.t,this.clas=e.c,this.wrap=e.w,this.wrapTag=e.wt}},sl9.model.schedule=function(){this.id=0,this.type_id=0,this.has_end=!1,this.weekly=new sl9.model.schedule_weekly,this.monthly=new sl9.model.schedule_monthly,this.start_time=new sl9.model.schedule_time("start_time"),this.end_time=new sl9.model.schedule_time("end_time",1),this.fromJSON=function(t){this.id=t.id,this.type_id=t.tid,this.has_end=t.ee,t.st&&(this.start_time.fromJSON(t.st),this.has_end&&this.end_time.fromJSON(t.et)),t.w&&this.weekly.fromJSON(t.w),t.m&&this.monthly.fromJSON(t.m)},this.countNextTime=function(){var t=new Date().getTime();switch(this.type_id){case sl9.struct.consta.ScheduleTypeDate:var e=this.start_time.getUnix(),n=this.end_time.getUnix();return e<=t?this.has_end?(n<e&&(n=this.end_time.getUnix(1)),t<=n?0:this.start_time.getUnix(1)-t):0:!this.has_end||e<n||n<t?e-t:0;case sl9.struct.consta.ScheduleTypeWeekly:return this.weekly.countNextTime();case sl9.struct.consta.ScheduleTypeMonthly:return this.monthly.countNextTime();default:return 0}}},sl9.model.schedule_weekly=function(){this.d=[],this.h_s=1,this.h_e=25,this.fromJSON=function(t){this.d=t.d||[],this.h_s=t.h_s,this.h_e=t.h_e,this.h_s||(this.h_s=1),this.h_e||(this.h_e=25)},this.getNextDay=function(t){var e=new Date;return e.setDate(e.getDate()+t),e.setHours(this.h_s-1,0,0,0),e},this.countNextTime=function(){for(var t=new Date().getTime(),e=-1;e<9;e++){var n=this.getNextDay(e);if(this.d.indexOf(n.getDay()+1)!=-1){var i=n.getTime(),o=(i=sl9.nfec.util.tool.ToStoreTimeUnix(i))+3600*(this.h_e-this.h_s)*1e3;if(t<i)return i-t;if(t<=o)return 0}}return 0}},sl9.model.schedule_time=function(t,e){this.d=0,this.m=0,this.h=0,this.fromJSON=function(n){this.d=n.d,n.m&&(this.m=n.m),this.h=n.h},this.getUnix=function(n){var i=new Date;if(n){var o=new Date().getFullYear();i.setFullYear(o+n)}i.setMonth(this.m-1,this.d),i.setHours(this.h-1,0,0,0);var r=i.getTime();return sl9.nfec.util.tool.ToStoreTimeUnix(r)}},sl9.model.schedule_monthly=function(){this.d=[],this.h_s=1,this.h_e=25,this.fromJSON=function(t){this.d=t.d||[],this.h_s=t.h_s,this.h_e=t.h_e,this.h_s||(this.h_s=1),this.h_e||(this.h_e=25)},this.getNextDay=function(t){var e=new Date;return e.setDate(e.getDate()+t),e.setHours(this.h_s-1,0,0,0),e},this.countNextTime=function(){for(var t=new Date().getTime(),e=-1;e<33;e++){var n=this.getNextDay(e);if(this.d.indexOf(n.getDate())!=-1){var i=n.getTime(),o=(i=sl9.nfec.util.tool.ToStoreTimeUnix(i))+3600*(this.h_e-this.h_s)*1e3;if(t<i)return i-t;if(t<=o)return 0}}return 0}},sl9.model.scode=function(){this.id=0,this.code="",this.token="",this.amount="",this.goal="",this.toState=function(){return JSON.stringify({i:this.id,c:this.code,t:this.token,a:this.amount,g:this.goal})},this.parseState=function(t){var e=JSON.parse(t);this.id=e.i,this.code=e.c,this.token=e.t,this.amount=e.a,this.goal=e.g},this.check=function(t,e,n){if(this.token==t){if(this.amount==e&&!(parseFloat(this.goal)>parseFloat(n)))return!0}else this.id=0}},sl9.model.session=function(){this.action_id=0,this.offer_id=0,this.offer_type_id=0,this.toState=function(){return{a:this.action_id,o:this.offer_id,n:this.offer_type_id}},this.parseState=function(t){this.action_id=t.a,this.offer_id=t.o,this.offer_type_id=t.n}},sl9.model.sessions=function(){this.items=[],this.addItem=function(t){for(var e,n=0;n<this.items.length;n++)if((e=this.items[n]).action_id==t.action_id&&e.offer_type_id==t.offer_type_id&&e.offer_id==t.offer_id)return void(this.items[n]=t);this.items.push(t)},this.findItem=function(t,e,n){for(var i,o=0;o<this.items.length;o++)if((i=this.items[o]).action_id==t&&i.offer_type_id==e&&i.offer_id==n)return i;return null},this.parseState=function(t){var e=JSON.parse(t);if(this.items=[],e.i)for(var n,i=0,o=e.i.length;i<o;i++)(n=new sl9.model.session).parseState(e.i[i]),this.items.push(n)},this.toState=function(){for(var t={i:[]},e=0,n=this.items.length;e<n;e++)t.i.push(this.items[e].toState());return JSON.stringify(t)}},sl9.model.segment_rule=function(){this.column=0,this.relation=0,this.value=null,this.fromJSON=function(t){this.column=t.column,this.relation=t.relation,this.value=t.value,typeof this.value=="string"&&(this.value=this.value.replace(/\"/g,""))},this.isNegative=function(){return 40<=this.relation},this.checkStr=function(t){if(t||(t=""),this.value||(this.value=""),typeof t!="string")return!1;t=sl9.nfec.util.tool.Decode(t).replace(/\"/g,"");for(var e=this.value.split(","),n=sl9.struct.consta,i=0;i<e.length;i++){var o=e[i];if(o=o.trim())switch(this.relation){case n.RelIsOneOf:if(t==o)return!0;break;case n.RelContainOneOf:if(t.indexOf(o)!=-1)return!0;break;case n.RelHaveOneOf:for(var r=t.split(","),c=0;c<r.length;c++)if((a=r[c].trim())&&a==o)return!0;break;case n.RelMultiContainOneOf:for(r=t.split(","),c=0;c<r.length;c++)if((a=r[c].trim())&&a.indexOf(o)!=-1)return!0;break;case n.RelIsNotOneOf:if(t==o)return!1;break;case n.RelDontContainOneOf:if(t.indexOf(o)!=-1)return!1;break;case n.RelDontHaveOneOf:for(r=t.split(","),c=0;c<r.length;c++)if((a=r[c].trim())&&a==o)return!1;break;case n.RelDontMContainOneOf:for(r=t.split(","),c=0;c<r.length;c++){var a;if((a=r[c].trim())&&a.indexOf(o)!=-1)return!1}}}return!!this.isNegative()},this.checkNumber=function(t){t||(t=0);var e=this.value||0,n=sl9.struct.consta;switch(this.relation){case n.RelGreater:if(e<t)return!0;break;case n.RelLess:if(t<e)return!0}return!1},this.checkDay=function(t){t||(t=0);var e=new Date;return this.checkNumber((e.getTime()-1e3*t)/864e5)},this.check=function(t){var e=sl9.struct.customer_col;switch(this.column){case e.Tags:return this.checkStr(t.tags);case e.Email:return this.checkStr(t.email);case e.Phone:return this.checkStr(t.phone);case e.Name:return this.checkStr(t.name);case e.Country:return this.checkStr(t.address.country_code);case e.Province:return this.checkStr(t.address.province);case e.ProvinceCode:return this.checkStr(t.address.province_code);case e.ZipCode:return this.checkStr(t.address.zip);case e.City:return this.checkStr(t.address.city);case e.Street:return this.checkStr(t.address.street);case e.Address:return this.checkStr(t.address.address);case e.Company:return this.checkStr(t.address.company);case e.Spent:return this.checkNumber(t.total_spent);case e.TotalOrder:return this.checkNumber(t.orders_count);case e.FirstOrderAt:return!!(n=t.orders.length)&&this.checkDay(t.orders[n-1].ca);case e.LastOrderAt:var n;return!!(n=t.orders.length)&&this.checkDay(t.orders[0].ca);case e.Purchased:for(var i=0;i<t.orders.length;i++)for(var o=0;o<t.orders[i].it.length;o++){var r=t.orders[i].it[o].t;if(this.isNegative()){if(!this.checkStr(r))return!1}else if(this.checkStr(r))return!0}return!!this.isNegative()}return!1}},sl9.model.segment=function(){this.id=0,this.type_id=0,this.rules=[],this.fromJSON=function(t){if(this.id=t.id,this.type_id=t.t,t.r)for(var e=0;e<t.r.length;e++){var n=new sl9.model.segment_rule;n.fromJSON(t.r[e]),this.rules.push(n)}},this.check=function(t){switch(this.type_id){case sl9.struct.consta.SegmentTypeLogined:if(!t)return!1;for(var e=0;e<this.rules.length;e++)if(!this.rules[e].check(t))return!1;return!0}return!t}},sl9.psale={},sl9.psale.tplhtm={m:'<div id="tdf_psale" class="tdf_container tdf_nonpopup">{_ if offer.hasMessage _}0{_ endif _}{_ if offer.hasCoupon _}1{_ endif _}{_ if ! offer.is_not_social _}5{_ endif _}{_ if offer.hasProductMessage _}2{_ endif _}<div class="tdf_psale_product_container">{_ for g,group in offer.product_groups _}6{_ endfor _}</div></div>',subs:[' <div class="tdf_psale_title">{{offer.message}}</div>',' <div class="tdf_psale_code_container"><div class="tdf_psale_code"><input id="tdf_psale_coupon" type="text" value="{{offer.coupon}}"></div><button type="button" class="tdf_normal_btn tdfe" data-e="psale_copy_coupon">{{sl9.data.settings.8.copy}}</button></div>','<div class="tdf_psale_second_message">{{offer.product_message}}</div>',' <a role="button" href="{{share.link}}" target="_blank" class="tdf_icon_wrapper"><div class="tdf_share_btn tdf_share_{{share.code}}"></div></a> ',' {{ assign psaleproduct = products.{{{pid}}} }} <a href="{{psaleproduct.url}}" class="tdf_psale_product_img"><div style="background-image: url(\'{{psaleproduct.variants.0.image.mediumSrc}}\');"></div></a> ',' <div class="tdf_psale_share_container"> {_ for s,share in shares _}3{_ endfor _} </div>'," {_ for i,pid in group.ids _}4{_ endfor _}"]},sl9.psale.main={Start:function(){var t,e,n,i=sl9.struct.consta.OfferTypePostsale,o=sl9.manager.offer.List(i),r=0,c=0,a=[],f=[];if(window.Shopify&&Shopify.checkout&&(r=parseFloat(Shopify.checkout.subtotal_price),Shopify.checkout.line_items))for(var l=0;l<Shopify.checkout.line_items.length;l++){var _=Shopify.checkout.line_items[l];a.push(_.product_id),f.push(_.variant_id)}for(o.sort(function(m,g){return m.trigger.min_cart>g.trigger.min_cart?-1:m.trigger.min_cart<g.trigger.min_cart?1:m.trigger.compare(g.trigger)}),sl9.manager.offer.Set(i,o),e=0;e<o.length;e++)if(!((n=o[e]).trigger.min_cart>r)&&(!n.trigger.isPreSelect()||n.trigger.areIn(a,f))&&!(n.trigger.min_cart<c)){c=n.trigger.min_cart,t=n;break}if(t){var u=[{code:"fb",link:"https://www.facebook.com/sharer.php?u="+n.link_share},{code:"tw",link:"https://twitter.com/share?url="+n.link_share+"&text="+n.coupon_share},{code:"pt",link:"https://pinterest.com/pin/create/button/?url="+n.link_share+"&description="+n.coupon_share},{code:"in",link:" https://www.instagram.com"}],p=jQuery(".step__footer").first();p.before(sl9.common.tpl.Render(sl9.psale.tplhtm,{offer:t,shares:u}));var h="step__footer__continue-btn";jQuery("."+h).length||p.prepend(sl9.common.tpl.Render(sl9.psale.btnhtm,{})),n.link_shoping&&jQuery("."+h).attr("href",n.link_shoping),sl9.nfec.event_hub.ListenTo("psale_copy_coupon",function(m,g){document.getElementById("tdf_psale_coupon").select(),document.execCommand("copy"),jQuery(g.els).text(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"copied")),sl9.common.track.AddAction(sl9.struct.consta.ActionTrackClick,i,t.id)}),jQuery("#tdf_psale").on("click",function(){sl9.common.track.AddAction(sl9.struct.consta.ActionTrackClick,i,t.id)}),sl9.common.track.AddImpression(i,t.id)}}},sl9.psale.btnhtm={m:'<a href="/" data-trekkie-id="continue_shopping_button" class="step__footer__continue-btn btn"><span class="btn__content">{{sl9.data.settings.8.continue_shopping}}</span></a>',subs:[]},sl9.quickview={},sl9.quickview.global={Start:function(){var t=sl9.nfec.platform.current.page.Detect(),e=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"enable_quick_view");t.type!=sl9.nfec.consta.PageTypeHome&&jQuery(document).on("click","a",function(n){var i=jQuery(this),o=i.attr("href");if(o&&o!=="#"&&o.indexOf("javascript")===-1&&!i.data("no-ajax")&&o.indexOf(".shopify.com")==-1){var r=sl9.nfec.platform.current.product.GetHandleFromURL(o);if(r&&(i.find("img").length||!(i.innerHeight()<120)||i.hasClass("tdf_img_qv"))){var c=i.find("img");if(c.length||1<(c=i.parent().find("img")).length&&(c=[]),c.length){var a=c.height();if(50<a){var f=c.offset();if(n.pageY<f.top||n.pageY>f.top+a)return}}if(i.closest(".tdf_rec").length)return sl9.nfec.event_hub.Trigger("click_rec_img",{els:i,handle:r}),void n.preventDefault();if(e){for(var l,_,u,p=i,h=[],m=!1,g=[],v=0;v<12&&(l=p.parent()).length;v++){for(var y=0,w=(_=(p=l).find('a[href*="/products/"]')).length;y<w;y++){var T,q=_.eq(y).attr("href");if(q.indexOf(".shopify.com")==-1&&(T=sl9.nfec.platform.current.product.GetHandleFromHref(q))&&T!=r&&(m=!0,(u=sl9.nfec.manager.product.FindByHandle(T))&&h.indexOf(u.id)==-1)){h.push(u.id);var S={id:u.id};g.push(S)}}if(m)break}sl9.nfec.event_hub.Trigger("show_quick_view",{handle:r,qv_products:g,is_global:!0,is_normal:!0}),n.preventDefault()}}}})}},sl9.quickview.modalhtm={m:'<div class="tdf_dialog_modal tdf_dialog_modal_qv tdfe" data-e="click_quick_view_bg"><i class="tdf_close_btn"></i><div class="tdf_dialog_qv {_ if is_gift _}0{_ endif _} {_ if qv_products && qv_products.length > 1 _}1{_ endif _}"> {{ include sl9.quickview.snippet_product }} {_ if qv_products && qv_products.length > 1 _}8{_ endif _}	</div></div>',subs:["tdf_qv_gift","tdf_qvs","tdf_img_parent","tdf_hidden","tdf_hidden",' {{custom_cta}} {_ else _} <button type="button" class="tdf_normal_btn tdfe" data-e="qv_add_to_cart">{{sl9.data.settings.8.add}}</button> ',' <option class="tdf_qv_option" value="{{variant.id}}">{{variant.getTitle}}</option> ',' {{ assign subProduct = products.{{{p.id}}} }} <div class="tdf_products_vertical_content" data-offer-id="{{p.offer_id}}" data-offer-type-id="{{p.offer_type_id}}" data-product-id="{{subProduct.id}}" data-variant-id="{{subProduct.fvariants.0.id}}"><a href="{{subProduct.url}}" class="tdfe {_ if ! is_custom_cta _}2{_ endif _}" data-no-ajax="1" data-e="click_qv_sub_product"><div class="tdf_img tdf_vertical_img tdf_img_fake" style="background-image:url({{subProduct.image.mediumSrc}})"></div><div class="tdf_vertical_name"><h4 class="tdf_vertical_title" title="{{subProduct.title.toCustomTrans.toInput}}">{{subProduct.title.toCustomTrans}}</h4></div><div class="tdf_vertical_price {_ if is_gift _}3{_ endif _}"> {{ include sl9.common.snippet_price plus subProduct.fvariants.0 as current_variant }} </div></a><div class="tdf_qv_bottom_stuff"><div class="tdf_vertical_variants {_ if 2 > subProduct.fvariants.length && ! filterVariant _}4{_ endif _}"><div class="tdf_select_box"><select class="tdf_select_input tdfe" data-e="select_quickview_variant" data-et="change"> {_ for v,variant in subProduct.fvariants _}6{_ endfor _} </select><span class="tdf_select_icon"></span><div class="tdf_select_backdrop"></div></div></div> {_ if is_custom_cta _}5{_ endif _} </div></div> ',' <div class="tdf_qv_recommend"><div class="tdf_qv_recommend_container"><div class="tdf_qv_recommend_title"><h3 class="tdf_qv_h3">{{message.toTranslate}}</h3></div><div class="tdf_qv_recommend_content"> {_ for i,p in qv_products _}7{_ endfor _} </div></div></div> ']},sl9.quickview.tplhtm={m:'<div id="tdf_quickview" class="tdf_container"></div>',subs:[]},sl9.quickview.snippet_producthtm={m:'<div class="tdf_qv_content" data-product-id="{{product.id}}" data-variant-id="{{current_variant.id}}"><div class="tdf_quickview_title_holiday"><div class="tdf_qv_product_name">{{product.getTitle}}</div></div><div class="tdf_carousel_container"> {_ if product.images.length == 1 | product.images.length == 0 _}20{_ endif _} </div><div class="tdf_qv_product_content"><div class="tdf_qv_product_name">{{product.getTitle}}</div><div class="tdf_qv_product_price {_ if is_gift _}0{_ endif _}"> {{ include sl9.common.snippet_price }} </div> {_ if sl9.data.settings.6.qv_long_option _}27{_ endif _} {_ if ! not_show_qty _}22{_ endif _} {_ if ! is_custom_cta _}23{_ endif _} <div class="tdf_qv_btn"> {{custom_cta}} {_ if ! not_show_normal_cta _}24{_ endif _} </div> {_ if is_normal _}11{_ endif _} {_ if ! product.is_premium && ! is_gift && sl9.data.settings.6.qv_top_detail _}12{_ endif _} {_ if ! sl9.data.settings.8.m_lang_on || sl9.data.settings.6.show_prod_des _}13{_ endif _} {_ if ! product.is_premium && ! is_gift && ! sl9.data.settings.6.qv_top_detail _}14{_ endif _} </div></div>',subs:["tdf_hidden"," selecting","tdf_hidden"," / ","tdf_hidden",'selected="selected"',"tdf_hidden"," selecting","{{prefill_quantity}}{_ else _}1"," {{ include sl9.common.snippet_discountable plus current_variant.discountable as discountable }} ",' <button type="button" class="tdf_normal_btn tdfe" data-e="qv_add_to_cart">{{sl9.data.settings.8.add}}</button> ',' <div class="tdf_qv_wsale_div"></div> ',' <div class="tdf_qv_decscription_link"><a class="tdf_qv_a" href="{{product.url}}">{{sl9.data.settings.8.product_details}}</a></div> ',' <div class="x_body_htm">{{product.getDes}}</div> ',' <div class="tdf_qv_decscription_link"><a class="tdf_qv_a" href="{{product.url}}">{{sl9.data.settings.8.product_details}}</a></div> ',' <div class="tdf_swiper_slide_container" data-image-id="{{image.id}}"><div class="tdf_swiper_slide"><img class="tdf_qv_img" src="{{image.grandeSrc}}" badgified="1"></div></div> ',' <label class="tdf_qv_label"><span class="tdf_qv_swatch_real tdfe{_ if variant.id == current_variant.id _}1{_ endif _}" data-e="choose_quickview_main_variant" data-vid="{{variant.id}}">{{variant.getTitle}}</span></label> '," {_ if o > 1 _}3{_ endif _}{{option.name.toCustomTrans}} ",' <option class="tdf_qv_option" value="{{variant.id}}" {_ if variant.id == current_variant.id _}5{_ endif _}>{{variant.getTitle}}</option> ',' <label class="tdf_qv_label"><span class="tdf_qv_swatch_real tdfe{_ if value == current_option_value _}7{_ endif _}" data-e="select_product_option_value" data-v="{{value.toInput}}">{{value.toCustomTrans}}</span></label> ',' <div class="tdf_one_img"><div class="tdf_swiper_slide_container"><div class="tdf_swiper_slide" style="background-image:url({{product.image.largeSrc}});background-size:contain;background-position:center;background-repeat: no-repeat"></div></div></div> {_ else _} <div class="tdf_swiper_wrapper"> {_ for i,image in product.images _}15{_ endfor _} </div> ',' <div class="{_ if 2 > product.fvariants.length && ! filterVariant _}2{_ endif _}"> {_ for o,option in product.getAvailableOptions _}17{_ endfor _} </div><div class="tdf_select_box {_ if 2 > product.fvariants.length && ! filterVariant _}4{_ endif _}"><select class="tdf_select_input tdfe" data-e="select_quickview_main_variant" data-et="change"> {_ for v,variant in product.fvariants _}18{_ endfor _} </select><span class="tdf_select_icon"></span><div class="tdf_select_backdrop"></div></div> ',' <div class="tdf_qv_quantity_container"><label class="tdf_qv_title">{{sl9.data.settings.8.quantity}}:</label><div class="tdf_qty_change"><input class="tdf_qv_input" type="number" min="1" name="tdf_qv_qty_input" value="{_ if prefill_quantity _}8{_ endif _}"></div></div> ',' <div class="tdf_discountable_div"> {_ if current_variant.is_discountable _}9{_ endif _} </div> '," {_ if ! not_show_normal_cta_if_premium || ! product.is_premium _}10{_ endif _} ",' {{ assign current_option_value = current_variant.option{{{o}}} }} <div class="tdf_qv_option" data-position="{{option.position}}"><label class="tdf_qv_title">{{option.name.toCustomTrans}}</label><div class="tdf_qv_variants_swatch"> {_ for v,value in option.values _}19{_ endfor _} </div></div> ',' <div class="tdf_qv_variants_container {_ if 2 > product.fvariants.length _}6{_ endif _}"> {_ for o,option in product.getAvailableOptions _}25{_ endfor _} </div> ',' <div class="tdf_qv_variants_swatch"> {_ for v,variant in product.fvariants _}16{_ endfor _} </div> {_ else _} {_ if product.getOptionsDisplayType == consta.OptionDisplayTypeSelect || filterVariant _}21{_ endif _} {_ if product.getOptionsDisplayType == consta.OptionDisplayTypeCheckboxs && ! filterVariant _}26{_ endif _} ']},sl9.quickview.main={current:{},Start:function(){sl9.quickview.global.Start();var t=nfec.store.control.Get("qvs"),e=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"qv_off_scroll"),n=function(){jQuery(".tdf_dialog_modal").length||(jQuery("body").removeClass("tdf_disable_scroll"),sl9.nfec.event_hub.Trigger("close_popup",{}))},i=function(){t||jQuery(".tdf_dialog_modal_qv").last().animate({scrollTop:0},600,function(){var l=jQuery(".tdf_swiper_slide_container").length;if(!(l<2)){var _=400*l;1300<_&&(_=1300),sl9.nfec.util.tpl.AutoSlide(jQuery(".tdf_swiper_wrapper").last(),"scrollLeft",!1,_)}})},o=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"product_fields"),r=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"qv_widget_off"),c=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"qv_lim")||32;sl9.nfec.event_hub.ListenTo("show_quick_view",function(l,_){sl9.nfec.loading.control.Start(),_.is_gift||!o&&!r?sl9.nfec.manager.product.GetByHandle(_.handle,function(u){if(!u||u.isHidden()&&_.is_global)sl9.nfec.platform.current.redirect.GoToProductPage(_.handle);else{sl9.nfec.loading.control.Stop(),_.vids=_.vids||[];var p=function(y){return _.pvids?_.pvids[y]:_.vids};if(u.fvariants=u.filterVars(p(u.id),!0),_.current_variant=u.fvariants[0],_.product=u,_.current_variant_id&&(_.current_variant=u.getVariantByID(_.current_variant_id)),_.product_ids){_.qv_products=[];for(var h=0;h<_.product_ids.length;h++)_.qv_products.push({id:_.product_ids[h]})}if(_.qv_products&&_.qv_products.length){var m=!1;for(h=0;h<_.qv_products.length;h++)if(u.id==_.qv_products[h].id){m=!0;break}m||_.qv_products.push({id:u.id}),_.qv_products=_.qv_products.slice(0,c)}if(_.qv_products)for(h=0;h<_.qv_products.length;h++){var g=sl9.nfec.manager.product.FindByID(_.qv_products[h].id);g.fvariants=g.filterVars(p(g.id))}_.vids.length&&(_.filterVariant=!0),jQuery.isEmptyObject(_.pvids)||(_.filterVariant=!0),sl9.quickview.main.current=_;var v=jQuery("#tdf_quickview");v.length?jQuery("body").addClass("tdf_disable_scroll"):(jQuery("body").first().append(sl9.common.tpl.Render(sl9.quickview.tplhtm,{})).addClass("tdf_disable_scroll"),v=jQuery("#tdf_quickview")),v.append(sl9.common.tpl.Render(sl9.quickview.modalhtm,sl9.quickview.main.current)),sl9.nfec.manager.recent_views.AddFromProduct(u),i(),sl9.common.tpl.AdjustH(jQuery(".tdf_qv_recommend_content"),"tdf_products_vertical_content"),t||e||(setTimeout(function(){sl9.nfec.util.tpl.AutoSlide(jQuery(".tdf_qv_product_content").last(),"scrollTop",!0,600,.3)},500),t=!0),sl9.nfec.store.control.Set("qvs",1,3600,!0),sl9.nfec.event_hub.Trigger("quick_view_showed",_)}}):sl9.nfec.platform.current.redirect.GoToProductPage(_.handle)}),sl9.nfec.event_hub.ListenTo("close_quick_view",function(l,_){jQuery("#tdf_quickview").remove(),n()}),sl9.nfec.event_hub.ListenTo("close_last_quick_view",function(l,_){jQuery(".tdf_dialog_modal_qv").last().remove(),n()}),sl9.nfec.event_hub.ListenTo("click_qv_sub_product",function(l,_){var u=_.els.closest(".tdf_products_vertical_content"),p=parseInt(u.data("product-id"));sl9.common.util.AddTrackFlag(u);var h=sl9.nfec.manager.product.FindByID(p);sl9.nfec.manager.product.GetByHandle(h.handle,function(m){sl9.quickview.main.current.product=m;var g=u.find(".tdf_select_input").val();sl9.quickview.main.current.current_variant=m.getVariantByID(g),_.els.closest(".tdf_dialog_modal_qv").find(".tdf_qv_content").replaceWith(sl9.common.tpl.Render(sl9.quickview.snippet_producthtm,sl9.quickview.main.current)),i(),sl9.nfec.event_hub.Trigger("quick_view_sub_showed")})}),sl9.nfec.event_hub.ListenTo("click_quick_view_bg",function(l,_){jQuery(_.event.target).closest(".tdf_dialog_qv").length||(_.els.closest(".tdf_dialog_modal_qv").remove(),_.els.remove(),n())}),sl9.nfec.event_hub.ListenTo("select_quickview_variant",function(l,_){_.productels=_.els.closest(".tdf_products_vertical_content"),sl9.nfec.event_hub.Trigger("select_variant",_)});var a=function(l,_){l.find(".tdf_swiper_slide_container").each(function(){var u=jQuery(this);if(u.data("image-id")==_.image.id){var p=u.closest(".tdf_swiper_wrapper");u.closest(".tdf_swiper_wrapper").animate({scrollLeft:u.position().left+p.scrollLeft()},1e3)}}),nfec.util.tool.SetAtt(l,"variant-id",_.id),l.find(".tdf_qv_product_content .tdf_qv_product_price").html(sl9.common.tpl.Render(sl9.common.snippet_pricehtm,{current_variant:_})),l.find(".tdf_qv_product_content .tdf_discountable_div").html(sl9.common.tpl.Render(sl9.common.snippet_discountablehtm,{discountable:_.getDiscountable()}))},f=function(l,_){var u=l.els.closest(".tdf_qv_content"),p=parseInt(u.data("product-id")),h=sl9.nfec.manager.product.FindByID(p),m=h.getVariantByID(_);a(u,m),sl9.nfec.event_hub.Trigger("update_qv_variant",{product:h,variant:m,els:l.els})};sl9.nfec.event_hub.ListenTo("select_quickview_main_variant",function(l,_){var u=parseInt(_.els.val());f(_,u)}),sl9.nfec.event_hub.ListenTo("choose_quickview_main_variant",function(l,_){var u=_.els.data("vid");u=parseInt(u),_.els.closest(".tdf_qv_variants_swatch").find(".selecting").removeClass("selecting"),_.els.addClass("selecting"),f(_,u)}),sl9.nfec.event_hub.ListenTo("select_product_option_value",function(l,_){var u=_.els.closest(".tdf_qv_option"),p=parseInt(u.data("position")),h=_.els.data("v")+"",m=u.closest(".tdf_qv_content"),g=parseInt(m.data("product-id")),v=sl9.nfec.manager.product.FindByID(g),y=v.getAvailableOptionsForOptionValue(p,h),w=m.find(".tdf_qv_option");m.find(".tdf_qv_swatch_real").removeClass("unavailable").removeClass("available");var T=[],q=!1,S={};w.each(function(){var C=jQuery(this),O=parseInt(C.data("position")),P=y[O]?y[O].values:[],R=C.find(".tdf_qv_swatch_real");if(O==p)return R.removeClass("selecting"),_.els.addClass("selecting"),void(S[O]=h);R.each(function(){var A=jQuery(this),G=A.data("v")+"";if(A.hasClass("selecting"))return P.indexOf(G)!==-1?void(S[O]=G):(A.addClass("unavailable"),void(q=!0));P.indexOf(G)!==-1&&T.push(A)})});var k=v.getVariantByOptionValues(S);if(q||!k){for(var D=0,I=T.length;D<I;D++)T[D].addClass("available");return m.find(".tdf_qv_btn button").each(function(){sl9.common.product.HandleSoldout(jQuery(this),!0)}),void sl9.common.product.NotiSelectOther()}m.find(".tdf_qv_btn button").each(function(){sl9.common.product.CleanSoldout(jQuery(this))}),a(m,k),sl9.nfec.event_hub.Trigger("update_qv_variant",{product:v,variant:k,els:_.els})}),sl9.nfec.event_hub.ListenTo("qv_add_to_cart",function(l,_){var u=_.els.closest(".tdf_qv_content"),p=[];u.length||(u=_.els.closest(".tdf_products_vertical_content"),p=u.find(".tdf_select_input").find(":selected")),sl9.common.util.AddTrackFlag(u);var h=parseInt(u.find(".tdf_qty_change input").val())||1;h<1&&(h=1),parseInt(u.data("product-id"));var m=parseInt(u.data("variant-id"));sl9.nfec.util.tpl.AddBtnLoading(_.els),sl9.nfec.platform.current.cart_api.AddItem(m,h,function(g){g?(jQuery("#tdf_quickview").remove(),setTimeout(n,300)):(sl9.nfec.util.tpl.RemoveBtnLoading(_.els),sl9.common.product.HandleSoldout(_.els),p.length&&setTimeout(function(){p.siblings().length&&sl9.common.product.CleanSoldout(_.els),p.remove()},3e3))})})}},sl9.sale={},sl9.sale.main={Start:function(){sl9.sale.main.formatOffers()},formatOffers:function(){var t=sl9.struct.consta.OfferTypeFirst,e=sl9.manager.offer.List(t);e.sort(function(n,i){if(!n.message)return 1;if(!i.message)return-1;var o=n.priority,r=i.priority;if(r<o)return-1;if(o<r)return 1;var c=n.trigger.compare(i.trigger);return c||(n.id>i.id?-1:1)}),sl9.manager.offer.Set(t,e)}},sl9.sale.promo={HandlePromo:function(t){var e,n=sl9.nfec.manager.cart.Get(),i=sl9.struct.consta.OfferTypeFirst,o=sl9.manager.offer.List(i),r=sl9.manager.promo.Get(),c=new sl9.manager.gifter;c.init(r);for(var a=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"gift_multi"),f=function(){var y=new sl9.model.promo_item;return y.offer_type_id=i,y.offer_id=e.id,y.app_id=sl9.struct.app.id,y.quantity=1,y},l=n.getAllItems(),_=0;_<o.length;_++){e=o[_];for(var u=0;u<l.length;u++){var p=l[u];if(!p.is_sub&&e.isIn(p.product_id,[p.variant_id]))switch((h=f()).discount_type=e.discount.type_id,h.discount_value=e.discount.value,e.discount.type_id){case sl9.nfec.consta.DiscountTypeFreeShip:t.addItem(h);break;case sl9.nfec.consta.DiscountTypeFreeGift:if(p.gifted&&!a)continue;var h=f();if(c.serve(i,e,h))continue;p.gifted=!0,t.addItem(h);break;default:(h=f()).discount_type=e.discount.type_id,h.discount_value=e.discount.value,h.product_id=p.product_id,h.variant_id=p.variant_id,h.price=p.price,t.addItem(h)}}for(var m=0;m<e.product_groups.length;m++)if(e.product_groups[m].ids)for(var g=0;g<e.product_groups[m].ids.length;g++){var v=new sl9.nfec.model.discountable;v.app_id=sl9.struct.app.id,v.discount_type=e.discount.type_id,v.discount_value=e.discount.value,v.message=e.message,v.offer_id=e.id,v.offer_type_id=i,v.product_id=e.product_groups[m].ids[g],v.vids=e.product_groups[m].vids,sl9.nfec.manager.discountable.Set(e.product_groups[m].ids[g],v)}}}},sl9.rec={},sl9.rec.barhtm={m:'<div id="tdf_bar" class="tdf_container"><div class="tdf_bar_content tdfe" data-e="click_bar_bg"> {_ if isSmallScreen _}10{_ endif _} </div></div>',subs:[' <div class="tdf_bar_mm">{{message.toTranslate}}</div> ',' <div class="tdf_bar_btn"><button type="button"> {{sl9.data.settings.8.explore}} </button></div> '," {{ assign product = products.{{{p.id}}} }} {{ include sl9.rec.snippet_bar_img }} "," {{ assign product = products.{{{p.id}}} }} {{ include sl9.rec.snippet_bar_img }} "," <span>{{message.toTranslate}}</span> ",' <div class="tdf_bar_btn"><button type="button"> {{sl9.data.settings.8.explore}} </button></div> '," {{ assign product = products.{{{p.id}}} }} {{ include sl9.rec.snippet_bar_img }} "," {_ if 5 > i _}2{_ endif _} "," {_ if 2 > i _}3{_ endif _} "," {_ if i > 1 _}6{_ endif _} ",' {_ if sl9.data.settings.4.text_bar _}0{_ endif _} {_ if ! notBtn _}1{_ endif _} <div class="tdf_countdown tdf_hidden"></div> {_ for i,p in barproducts _}7{_ endfor _} {_ else _} <div class="tdf_bar_left_img"> {_ for i,p in barproducts _}8{_ endfor _} </div> {_ if isMessage _}4{_ endif _} {_ if ! notBtn _}5{_ endif _} <div class="tdf_countdown tdf_hidden"></div> {_ for i,p in barproducts _}9{_ endfor _} ']},sl9.rec.clock=function(){this.d=0,this.h=0,this.m=0,this.s=0,this.init=function(t){this.d=Math.floor(t/86400),t-=86400*this.d,this.h=Math.floor(t/3600),t-=3600*this.h,this.m=Math.floor(t/60),this.s=t-60*this.m},this.run=function(){return this.s+=-1,0<=this.s||(this.s=59,this.m+=-1,0<=this.m||(this.h+=-1,this.m=59,0<=this.h||(this.d+=-1,this.h=23,0<=this.d)))},this.getNum=function(t){return t<10?"0"+t:t},this.getStr=function(){var t="";return this.d&&(t+=this.getNum(this.d)+" "),t+this.getNum(this.h)+":"+this.getNum(this.m)+":"+this.getNum(this.s)}},sl9.rec.bar={currentBarProducts:[],Start:function(){var t=sl9.struct.consta.SettingTypeRec,e=sl9.main.GetData("settings",t,"mobile_header_on");if(!sl9.nfec.util.tool.IsTabletOrSmaller()||e){sl9.rec.bar.Run();var n=function(i){for(var o=0;o<sl9.rec.bar.currentBarProducts.length;o++){var r=sl9.rec.bar.currentBarProducts[o];if(i||(i=r.id),r.id==i){sl9.manager.product_offer.AddRaw(sl9.struct.consta.OfferTypeRec,r.offer_id,r.id);break}}var c=sl9.nfec.manager.product.FindByID(i);sl9.nfec.event_hub.Trigger("show_quick_view",{handle:c.handle,qv_products:sl9.rec.bar.currentBarProducts})};sl9.nfec.event_hub.ListenTo("click_bar_product",function(i,o){o.event.stopPropagation();var r=parseInt(o.els.data("id"));n(r)}),sl9.nfec.event_hub.ListenTo("click_bar_bg",function(i,o){n()})}},Run:function(){for(var t,e,n,i,o,r,c=sl9.struct.consta.OfferTypeRec,a=sl9.manager.offer.List(c),f=[],l=[],_=!1,u=0;u<a.length;u++)if((t=a[u]).place_id==sl9.struct.consta.RecPlaceTop||t.place_id==sl9.struct.consta.RecPlaceUnderHeader){for(i=t.place_id,o=0,r=t.product_groups.length;o<r;o++)if((e=t.product_groups[o]).type_id==sl9.struct.consta.GroupTypeRecentView&&(e.ids=sl9.nfec.manager.recent_views.GetProductIDs()),e.ids){for(var p=0;p<e.ids.length;p++)if(l.indexOf(e.ids[p])==-1){var h=sl9.nfec.manager.product.FindByID(e.ids[p]);h&&h.hasImage()&&(l.push(e.ids[p]),f.push({id:e.ids[p],offer_num:c,offer_id:t.id}),t.id,n||(n=t.message),t.not_btn&&(_=!0))}}}if(l.length){sl9.rec.bar.currentBarProducts=f.slice(0,16),f=f.slice(0,10);var m=jQuery("body").first();i==sl9.struct.consta.RecPlaceUnderHeader&&(m=jQuery(".endOfLayoutContentX").first().parent()),m.prepend(sl9.common.tpl.Render(sl9.rec.barhtm,{message:n,isMessage:!!n,barproducts:f,notBtn:_})),sl9.nfec.event_hub.Trigger("show_top_bar");var g,v=[];for(u=0;u<f.length;u++){var y=(g=f[u]).offer_num+"_"+g.offer_id;v.indexOf(y)==-1&&(v.push(y),sl9.common.track.AddImpression(g.offer_num,g.offer_id))}}}},sl9.rec.countdown={clock:{d:0,h:0,m:0,s:0},Start:function(){var t=sl9.struct.consta.SettingTypeRec;if(sl9.main.GetData("settings",t,"countdown_on")){var e=0,n=sl9.main.GetData("settings",t,"countdown_d");n&&(e+=86400*n);var i=sl9.main.GetData("settings",t,"countdown_h");i&&(e+=3600*i);var o=sl9.main.GetData("settings",t,"countdown_m");o&&(e+=60*o),e&&sl9.nfec.event_hub.ListenTo("show_top_bar",function(){var r=jQuery(".tdf_countdown"),c=sl9.main.GetData("settings",t,"countdown_type"),a=new Date,f=Math.floor(a.getTime()/1e3),l=f;switch(c){case sl9.struct.consta.CountdownSpecific:var _=sl9.main.GetData("settings",t,"countdown_start_m");if(!_)return;var u=sl9.main.GetData("settings",t,"countdown_start_d");if(!u)return;var p=new Date;p.setMonth(_-1,u),p.setHours(0,0,0,0),l=Math.floor(p.getTime()/1e3);break;default:var h=sl9.nfec.store.control.Get("cdt");h?l=parseInt(h):sl9.nfec.store.control.Set("cdt",l,e+604800,!0)}if(!(f<l)){var m=l+e-f;if(!(m<1)){var g=new sl9.rec.clock;g.init(m),r.removeClass("tdf_hidden");var v=setInterval(function(){if(!g.run())return clearInterval(v),void r.remove();r.html(g.getStr())},1e3)}}})}}},sl9.rec.fullhtm={m:'<div class="tdf_rec_product" data-rec-product-id="{{product.id}}" data-rec-offer-id="{{offer_id}}" data-rec-offer-num="{{offer_num}}" data-product-id="{{product.id}}"><a href="{{product.url}}" class="tdf_img_qv tdf_img_parent" data-vid="{{product.variants.0.id}}"><div class="tdf_img tdf_vertical_img tdf_img_fake" style="background-image:url({{product.image.mediumSrc}})"></div><div class="tdf_vertical_name"><h4 class="tdf_vertical_title" title="{{product.getTitle.toInput}}">{{product.getTitle}}</h4></div><div class="tdf_vertical_price"> {{ include sl9.common.snippet_price plus product.variants.0 as current_variant }} </div></a> {_ if ! not_btn _}2{_ endif _}</div>',subs:["tdf_hidden",' <option class="tdf_qv_option" value="{{variant.id}}">{{variant.getTitle}}</option> ',' <div class="tdf_rec_product_btm"><div class="tdf_vertical_variants {_ if 2 > product.variants.length _}0{_ endif _}"><div class="tdf_select_box"><select class="tdf_select_input tdfe" data-e="select_rec_variant" data-et="change"> {_ for v,variant in product.variants _}1{_ endfor _} </select><span class="tdf_select_icon"></span><div class="tdf_select_backdrop"></div></div></div><button type="button" class="tdf_normal_btn tdfe" data-e="rec_add_to_cart">{{sl9.data.settings.8.add}}</button></div> ']},sl9.rec.content={Products:{},firstLoadProducts:[],PrepareProduct:function(t){sl9.rec.content.firstLoadProducts.indexOf(t)==-1&&sl9.rec.content.firstLoadProducts.push(t)},Fetch:function(){sl9.rec.content.fetchProducts(sl9.rec.content.firstLoadProducts),sl9.rec.content.firstLoadProducts=[]},getProductFromPage:function(t,e){var n=sl9.nfec.manager.product.FindByID(t);handle=n.handle;for(var i=e.find('a[href*="/products/'+handle+'"]'),o=!1,r=0,c=i.length;r<c;r++){var a=i.eq(r);if((h=a.attr("href")).indexOf(".shopify.com")==-1){var f=a.find("img");if(f.length||(f=a.parent().find("img")),f.length){o=!0,i=a;break}}}if(!o)return null;for(var l,_,u=i,p=0;p<12&&(l=u.parent()).length;p++){for(r=0,c=(_=l.find('a[href*="/products/"]')).length;r<c;r++){var h;if((h=_.eq(r).attr("href")).indexOf(".shopify.com")==-1){var m=sl9.nfec.platform.current.product.GetHandleFromHref(h);if(m&&m!=handle)return u}}u=l}return null},fetchProducts:function(t){var e,n=sl9.manager.rform.Get(),i=sl9.main.GetData("product_ids",sl9.struct.consta.ProductTypeSortByCreated)||[],o={},r=[],c=n.per_page,a=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeRec,"use_default");if(c<4&&4<=i.length||a)for(f=0,l=t.length;f<l;f++)sl9.nfec.event_hub.Trigger("rec_product_ready",{id:t[f],isImg:1});else{for(f=0,l=t.length;f<l;f++)offset=i.indexOf(t[f]),offset==-1&&(offset=i.length),e=Math.ceil((offset+1)/c),o[e]||(o[e]=[],r.push(e)),o[e].push(t[f]);for(var f=0,l=r.length;f<l;f++)sl9.rec.page.Load(r[f]);sl9.nfec.event_hub.ListenTo("rec_page_ready",function(_,u){var p,h=u.id,m=o[h];if(m){var g=jQuery("<div></div>");g[0].innerHTML=u.raw,g=g.find(".endOfLayoutContentX").first().parent();for(var v=0,y=m.length;v<y;v++)(p=sl9.rec.content.getProductFromPage(m[v],g))&&sl9.nfec.event_hub.Trigger("rec_product_ready",{id:m[v],els:p})}},!0)}}},sl9.rec.imghtm={m:'<a class="tdf_img tdf_img_parent tdf_img_qv tdf_rec_product" data-rec-product-id="{{product.id}}" data-rec-offer-id="{{offer_id}}" data-rec-offer-num="{{offer_num}}" href="{{product.url}}" style="background-image:url({{product.image.mediumSrc}})"><span class="tdf_img_title tdf_img_fake">{{product.getTitle}}</span></a>',subs:[]},sl9.rec.quickview={Start:function(){sl9.nfec.event_hub.ListenTo("click_rec_img",function(t,e){for(var n,i=e.els.closest(".tdf_rec"),o=[],r=sl9.nfec.util.tpl.GetTplData(i.data("tpl-did")),c=r.section.products.concat(r.section.otherProducts),a=0;a<c.length;a++)n=c[a],o.push({id:n.id,offer_id:n.offer_id,offer_type_id:n.offer_num});sl9.nfec.event_hub.Trigger("show_quick_view",{handle:e.handle,qv_products:o,is_normal:!0})})}},sl9.rec.page={loaded:{},Load:function(t){sl9.rec.page.loaded[t]||((sl9.rec.page.loaded[t]=1)===t&&sl9.rec.page.page1?sl9.nfec.event_hub.Trigger("rec_page_ready",{id:t,raw:sl9.rec.page.page1}):sl9.nfec.util.request.Run({url:"/collections/all?sort_by=created&page="+t,dataType:"html",success:function(e){sl9.nfec.event_hub.Trigger("rec_page_ready",{id:t,raw:e})},error:function(){sl9.rec.page.loaded[t]=0}}))}},sl9.rec.main={Start:function(){if(sl9.rec.main.formatOffers(),sl9.rec.countdown.Start(),sl9.rec.bar.Start(),!(sl9.nfec.util.tool.IsTabletOrSmaller()&&sl9.main.GetData("settings",sl9.struct.consta.SettingTypeRec,"no_mobile"))){sl9.rec.rform.Start(),sl9.rec.quickview.Start();var t=["cart_synced","rec_format_ready"];sl9.nfec.platform.current.page.Detect().type==sl9.nfec.consta.PageTypeProduct&&t.push("product_data_synced"),sl9.nfec.event_hub.ListenToMulti(t,function(){sl9.rec.section.Start()}),jQuery(document).on("click",".tdf_rec_product",function(e){var n=jQuery(this),i=parseInt(n.data("rec-offer-id")),o=parseInt(n.data("rec-product-id"));sl9.manager.product_offer.AddRaw(parseInt(n.data("rec-offer-num")),i,o)}),sl9.nfec.event_hub.ListenTo("rec_add_to_cart",function(e,n){var i=n.els.closest(".tdf_rec_product");if($variant=i.find(".tdf_select_input").find(":selected"),sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"product_fields")){var o=sl9.nfec.manager.product.FindByID(parseInt(i.data("product-id")));sl9.nfec.platform.current.redirect.GoToProductPage(o.handle,$variant.val())}else sl9.nfec.util.tpl.AddBtnLoading(n.els),sl9.nfec.platform.current.cart_api.AddItem($variant.val(),1,function(r){sl9.nfec.util.tpl.RemoveBtnLoading(n.els),r||(sl9.common.product.HandleSoldout(n.els),$variant.length&&setTimeout(function(){$variant.siblings().length&&sl9.common.product.CleanSoldout(n.els),$variant.remove()},3e3))})}),sl9.nfec.event_hub.ListenTo("select_rec_variant",function(e,n){n.productels=n.els.closest(".tdf_rec_product"),sl9.nfec.event_hub.Trigger("select_variant",n)})}},formatOffers:function(){var t,e,n=sl9.struct.consta.OfferTypeRec,i=sl9.manager.offer.List(n),o=sl9.nfec.platform.current.page.Detect(),r=[],c=[];for(jQuery(".tdfPlaceRec").each(function(){var a=jQuery(this).data("offer-id");a&&c.push(parseInt(a))}),t=0;t<i.length;t++)e=i[t],(c.indexOf(e.id)!=-1||e.trigger.checkPage(o))&&r.push(e);r.sort(function(a,f){if(!a.message)return 1;if(!f.message)return-1;if(o.type==sl9.nfec.consta.PageTypeProduct){var l=a.trigger.priority;if((_=f.trigger.priority)<l)return-1;if(l<_)return 1}var _;if(l=a.priority,(_=f.priority)<l)return-1;if(l<_)return 1;var u=a.trigger.compare(f.trigger);return u||(a.id>f.id?-1:1)}),sl9.manager.offer.Set(n,r)}},sl9.rec.snippet_bar_imghtm={m:'<img class="tdfe tdf_bar_img" data-e="click_bar_product" data-offer-id="{{p.offer_id}}" data-id="{{product.id}}" height="56px" src="{{product.image.smallSrc}}" alt="{{product.getTitle}}">',subs:[]},sl9.rec.tplhtm={m:'<div class="tdf_rec {{clas}}" id="tdf_rec_{{section.id}}" data-tpl-did="{{tpl_data_id}}"><h2 class="tdf_rec_h2">{{section.message.toTranslate}}</h2>{{format}}</div>',subs:[]},sl9.rec.rform={Start:function(){sl9.nfec.event_hub.ListenTo("theme_version_change",function(){sl9.manager.rform.Del()},!0);var t=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeRec,"use_default"),e=!1,n=function(){var o=new sl9.model.rform;o.tpl='<div class="tdf_rec_stable_div tdf_nonpopup"><noscript class="tdf_rec_products"></noscript></div>',o.clas="tdf_rec_stable_"+t,sl9.manager.rform.Set(o),e||sl9.nfec.event_hub.Trigger("rec_format_ready")};if(t)n();else{var i=sl9.manager.rform.Get();if(i&&(!i.tpl||i.tpl.indexOf("tdf_rec_stable_div")==-1)){if(sl9.nfec.event_hub.Trigger("rec_format_ready"),sl9.manager.rform.Check())return;e=!0}sl9.nfec.util.request.Run({url:"/collections/all?sort_by=created",dataType:"html",success:function(o){if(nfec.platform.current.element.CheckTheme("Narrative"))n();else{var r=jQuery("<div></div>");r[0].innerHTML=o;for(var c=(r=r.find(".endOfLayoutContentX").first().parent()).find('a[href*="/products/"]'),a=!1,f=0,l=c.length;f<l;f++){var _=c.eq(f);if((y=_.attr("href")).indexOf(".shopify.com")==-1){var u=_.find("img");if(u.length||(u=_.parent().find("img")),u.length){a=!0,c=_;break}}}if(a){var p,h,m=c,g=sl9.nfec.platform.current.product.GetHandleFromHref(c.attr("href"));if(g){t:for(var v=0;v<24;v++)for(m=p=m.parent(),f=0,l=(h=p.find('a[href*="/products/"]')).length;f<l;f++){var y;if((y=h.eq(f).attr("href")).indexOf(".shopify.com")==-1){var w=sl9.nfec.platform.current.product.GetHandleFromHref(y);if(w&&w!=g)break t}}var T=0;for(m.children().each(function(){jQuery(this).find('a[href*="/products/"]').length&&T++}),m.html('<noscript type="text/tpl" class="tdf_rec_products"></noscript>'),v=0;v<2;v++)m.parent().children().length==1&&(m=m.parent());var q="",S="",k=r.find(".endOfLayoutContentX");if(k.length){var D=k.parent();q=(q=D.attr("class")||"").trim(),S=D.prop("tagName").toLowerCase()}var I=m[0].outerHTML,C=m.parent().attr("class")||"";nfec.platform.current.element.CheckTheme("District")&&(C+=" collection");var O=new sl9.model.rform;O.per_page=T,O.tpl=I,O.clas=C,O.wrap=q,O.wrapTag=S,sl9.manager.rform.Set(O),sl9.rec.page.page1=o,e||sl9.nfec.event_hub.Trigger("rec_format_ready")}else n()}else n()}}})}}},sl9.rec.section={Start:function(){sl9.nfec.event_hub.ListenTo("rec_show_section",function(t,e){sl9.rec.section.Handle(e),sl9.rec.content.Fetch()},!0,!0),sl9.rec.section.run()&&sl9.rec.content.Fetch()},run:function(){var t=sl9.struct.consta.OfferTypeRec,e=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeRec,"d_slot");sl9.nfec.util.tool.IsTabletOrSmaller()&&(e=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeRec,"m_slot")),e||(e=4),e<1&&(e=1);var n=sl9.nfec.platform.current.page.Detect(),i=0;n.type==sl9.nfec.consta.PageTypeProduct&&(i=n.payload.id);var o,r,c=sl9.manager.offer.List(t),a=[],f=[],l=[],_=sl9.common.rexy.GetSame(),u=0,p=_.length;for(y in c)if(c.hasOwnProperty(y)&&(o=c[y]).place_id==sl9.struct.consta.RecPlaceBottom){var h=[];for(T=0,q=o.product_groups.length;T<q;T++){if((r=o.product_groups[T]).type_id==sl9.struct.consta.GroupTypeRecentView){if(r.ids=sl9.nfec.manager.recent_views.GetProductIDs(),!r.ids.length)continue;if(r.ids.length<e)for(;u<_.length&&r.ids.length<e;u++)r.ids.indexOf(_[u])==-1&&r.ids.push(_[u])}if(r.ids&&r.ids.length){switch(r.type_id){case sl9.struct.consta.GroupTypeAuto:r.ids=sl9.nfec.util.tool.Shuffle(r.ids);case sl9.struct.consta.GroupTypeManual:}r.offer=o,h.push(r)}}h.length&&(o.product_groups=h,f.push(o))}i&&l.push(i);var m=sl9.nfec.manager.cart.GetCurrentProductIDs();l=l.concat(m);for(var g,v={},y=0,w=f.length;y<w;y++){v[(o=f[y]).message]===void 0?(v[o.message]=a.length,g={id:a.length,message:o.message,not_btn:o.not_btn,products:[],otherProducts:[],product_groups:[],pois:[]},a.push(g)):g=a[v[o.message]];for(var T=0,q=o.product_groups.length;T<q;T++)g.product_groups.push(o.product_groups[T]),g.pois.push(o.id)}var S={};for(y=0,w=a.length;y<w;y++)for(T=0,q=(g=a[y]).product_groups.length;T<q;T++)for(var k=0,D=(r=g.product_groups[T]).ids.length;k<D;k++)S[r.ids[k]]||(S[r.ids[k]]=[]),S[r.ids[k]].indexOf(T)==-1&&S[r.ids[k]].push(T),r.isPreSelect()||(g.is_rexy=1),r.type_id!=sl9.struct.consta.GroupTypeManual&&l.indexOf(r.ids[k])!=-1||(g.products.length<e?(l.push(r.ids[k]),g.products.push({offer_id:g.pois[T],offer_num:t,id:r.ids[k]})):g.otherProducts.push({offer_id:g.pois[T],offer_num:t,id:r.ids[k]}));var I=[];for(y=0,w=a.length;y<w;y++)(g=a[y]).products.length&&(I.push(g),g.otherProducts.sort(function(C,O){return S[C.id]-S[O.id]}));for(y=0,w=I.length;y<w;y++)if((g=I[y]).is_rexy)for(;u<p&&!(g.products.length>=e);u++)l.indexOf(_[u])==-1&&g.products.push({id:_[u],offer_id:o.id,offer_num:t});if(4<(w=I.length)&&(w=4),w!=0){for(sl9.nfec.event_hub.Trigger("rec_has_bottom",{}),y=0;y<w;y++)sl9.rec.section.Handle(I[y]);return w}},Handle:function(t){for(var e=0,n=t.products.length;e<n;e++)sl9.rec.content.PrepareProduct(t.products[e].id);var i=[],o=[];return sl9.nfec.event_hub.ListenTo("rec_product_ready",function(r,c){if(i.indexOf(c.id)==-1){for(var a,f=0,l=t.products.length;f<l;f++)if(t.products[f].id==c.id){a=t.products[f];break}if(a){if(!i.length){var _=sl9.manager.rform.Get(),u=_.wrap,p=jQuery(".endOfLayoutContentX").first().parent(),h=sl9.common.tpl.Render(sl9.rec.tplhtm,{section:t,format:_.tpl,clas:_.clas},!0);if(u){for(var m=!1,g=u.split(" "),v=0;v<g.length;v++)p.hasClass(g[v])&&(m=!0);if(!m){var y=_.wrapTag;h="<"+y+' class="'+u+'">'+h+"</"+y+">"}}var w=jQuery("#tdfRecFlag");if(w.length)w.first().before(h);else if((w=jQuery(".tdfPlaceRec")).length){var T=w.first();w.each(function(){var P=jQuery(this).data("offer-id");P&&t.products.length&&t.products[0].offer_id==P&&(T=jQuery(this))}),T.before(h)}else{var q=p.children("footer");q.length?q.before(h):p.append(h)}}var S;if(i.push(a.id),c.isImg){var k=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeRec,"use_default"),D=sl9.rec.imghtm;switch(k){case 2:D=sl9.rec.fullhtm}S=sl9.common.tpl.Render(D,{offer_id:a.offer_id,offer_num:a.offer_num,not_btn:t.not_btn,product:sl9.nfec.manager.product.FindByID(a.id)})}else{var I=function(P,R){P.addClass("tdf_rec_product"),nfec.util.tool.SetAtt(P,"rec-product-id",a.id),nfec.util.tool.SetAtt(P,"rec-offer-id",a.offer_id),nfec.util.tool.SetAtt(P,"rec-offer-num",a.offer_num),R&&P.addClass("tdf_rec_product_li")};I(c.els,!0),I(c.els.find("a,button")),S=c.els[0].outerHTML}var C=jQuery("#tdf_rec_"+t.id);C.innerHeight(),C.find(".tdf_rec_products").before(S),sl9.nfec.event_hub.Trigger("update_label",{});var O=a.offer_num+"_"+a.offer_id;o.indexOf(O)==-1&&(o.push(O),sl9.common.track.AddImpression(a.offer_num,a.offer_id)),typeof window.lazyload=="function"&&lazyload()}}}),setTimeout(function(){var r=jQuery("#tdf_rec_"+t.id+".tdf_rec_stable_2 .tdf_rec_stable_div");r.length&&sl9.common.tpl.AdjustH(r,"tdf_rec_product")},200),!0}},sl9.notify={},sl9.notify.anima={loopID:null,Start:function(){sl9.nfec.platform.current.page.Detect().type==sl9.nfec.consta.PageTypeCart&&sl9.notify.anima.run(),jQuery(document).on("click",'a[href$="/cart"]',function(t){sl9.notify.anima.run()})},run:function(){sl9.notify.anima.Clear(),sl9.notify.anima.loopID=setInterval(function(){var t=jQuery(".tdf_notify_minicon");t.length&&!t.hasClass("tdf_hidden")&&(t.css("opacity",.5),setTimeout(function(){t.css("opacity",1)},800))},1600),setTimeout(function(){sl9.notify.anima.Clear()},8e3)},Clear:function(){sl9.notify.anima.loopID&&(clearInterval(sl9.notify.anima.loopID),sl9.notify.anima.loopID=null,jQuery(".tdf_notify_minicon").css("opacity",1))}},sl9.notify.cart_discountable_transhtm={m:"{_ if discountable.discount_type == consta.DiscountTypeFreeShip _}0{_ endif _}{_ if discountable.discount_type == consta.DiscountTypeFreeGift _}1{_ endif _}{_ if discountable.discount_type == consta.DiscountTypeValue _}2{_ endif _}{_ if discountable.discount_type == consta.DiscountTypePercent _}3{_ endif _}",subs:['<span class="tdf_discount_tag">{{sl9.data.settings.8.free_ship}}</span>','<span class="tdf_discount_tag"> {{ include sl9.common.snippet_discountable_gift }}</span>','<span class="tdf_discount_tag">{{discountable.toCDsc}}</span>','<span class="tdf_discount_tag">{{discountable.toCDsc}}</span>']},sl9.notify.main={LoyalContent:!1,Start:function(){jQuery("body").first().append(sl9.common.tpl.Render(sl9.notify.tplhtm,{}));var t=0;jQuery(document).on("click",function(n){var i=new Date;if(!(t>i.getTime()-1e3)){var o=jQuery(n.target);if(!o.closest("#tdf_notify").length&&!o.closest("#tdf_quickview").length&&!o.hasClass("tdf_cta_btn")){var r=jQuery(".tdf_notify_minicon");if(r.hasClass("tdf_notify_minicon_close"))return jQuery(".tdf_notify_popup").html(""),jQuery(".tdf_notify_msgs").html(""),sl9.notify.main.ShowMiniIcon(),r.removeClass("tdf_notify_minicon_close"),void sl9.nfec.event_hub.Trigger("notify_close",{})}}});var e="tdf_notify_opening";sl9.nfec.event_hub.ListenTo("notify_open",function(){jQuery("body").addClass(e)}),sl9.nfec.event_hub.ListenTo("notify_close",function(){jQuery("body").removeClass(e)}),sl9.nfec.event_hub.ListenPast("notify_discount_msg",function(n,i){var o=new Date;t=o.getTime();var r=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"noti_timeout"),c=i.timeout||r||nfec.util.tool.GetHtmReadT(i.content);c===1&&i.is_gifted&&i.content.indexOf("tdf_gift_title")!=-1&&(c=1400),sl9.notify.message_control.Add(i.content,c),jQuery(".tdf_notify_minicon").addClass("tdf_notify_minicon_close").removeClass("tdf_hidden")}),sl9.nfec.event_hub.ListenTo("promo_updated",function(n,i){jQuery(".tdf_notify_minicon_close").length||sl9.notify.main.ShowMiniIcon()},!0,!0),sl9.nfec.event_hub.ListenTo("cart_synced",function(n,i){sl9.nfec.event_hub.ListenTo("minicon_show",function(o,r){jQuery(".tdf_notify_minicon_close").length||sl9.notify.main.ShowMiniIcon()},!0,!0)},!0),sl9.nfec.event_hub.ListenTo("notify_discount_icon_click",function(n,i){sl9.notify.anima.Clear();var o=jQuery(".tdf_notify_minicon");if(o.hasClass("tdf_notify_minicon_close"))return jQuery(".tdf_notify_popup").html(""),jQuery(".tdf_notify_msgs").html(""),sl9.notify.main.ShowMiniIcon(),o.removeClass("tdf_notify_minicon_close"),void sl9.nfec.event_hub.Trigger("notify_close",{});var r=sl9.manager.draft_order.Get(),c=[],a=sl9.manager.draft_order.GetTotalDiscount(r);if(0<a){var f=sl9.nfec.manager.cart.Get();c.push({discount_type:sl9.nfec.consta.DiscountTypeValue,discount_value:a,quantity:f.getTotalAddeds()})}var l=sl9.manager.promo.Get();c=c.concat(l.getSum());var _=sl9.common.tpl.Render(sl9.notify.popup_contenthtm,{discounteds:c});jQuery(".tdf_notify_popup").html(_),sl9.nfec.event_hub.Trigger("notify_discount_popup_discountable"),o.addClass("tdf_notify_minicon_close"),sl9.nfec.event_hub.Trigger("notify_open",{})}),sl9.nfec.event_hub.ListenTo("notify_discount_popup_discountable_add",function(n,i){if(i.content){var o=jQuery(".tdf_notify_popup_content"),r='<div class="tdf_content_section_discountable">'+i.content+"</div>";i.append?o.append(r):o.prepend(r)}}),sl9.nfec.event_hub.ListenTo("click_discount_checkout",function(n,i){switch(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"coa")){case sl9.struct.consta.ClickGoCart:if(sl9.nfec.platform.current.page.Detect().type==sl9.nfec.consta.PageTypeCart)return void sl9.nfec.event_hub.Trigger("notify_discount_icon_click",{});sl9.nfec.loading.control.Start(),sl9.nfec.platform.current.redirect.GoToCartPage();break;default:sl9.common.checkout.Process()}}),sl9.notify.anima.Start()},ShowMiniIcon:function(){var t=jQuery(".tdf_notify_minicon"),e=sl9.manager.draft_order.Get();if(e.has_discount&&e.items.length)t.removeClass("tdf_hidden");else if(sl9.notify.main.LoyalContent)t.removeClass("tdf_hidden");else{var n=sl9.nfec.manager.discountable.GetCurrentProductData();sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"sale_place_id")==sl9.struct.consta.SalePlaceWidget&&(n=!1),n||sl9.motivator.noti.BuildProgress()?t.removeClass("tdf_hidden"):t.addClass("tdf_hidden").removeAttr("style")}}},sl9.notify.messagehtm={m:'<div id="tdf_message_{{id}}" class="tdf_notify_msg"> {{content}}</div>',subs:[]},sl9.notify.message_control={id:1,getId:function(){return this.id+=1,this.id},Add:function(t,e){var n=jQuery(".tdf_notify_msgs"),i=this.getId();n.prepend(sl9.common.tpl.Render(sl9.notify.messagehtm,{id:i,content:t})),setTimeout(function(){sl9.notify.message_control.close(i)},e),sl9.nfec.event_hub.Trigger("notify_open",{})},close:function(t){var e=jQuery("#tdf_message_"+t);e.find(".tdf_discount_icon").slideUp(),e.slideUp(function(){e.remove(),jQuery(".tdf_notify_msg").length||(sl9.notify.main.ShowMiniIcon(),jQuery(".tdf_notify_minicon").removeClass("tdf_notify_minicon_close"),sl9.nfec.event_hub.Trigger("notify_close",{}))})}},sl9.notify.popup_contenthtm={m:'<div class="tdf_notify_popup_content"> {_ if discounteds.length _}3{_ endif _}</div>',subs:[" {{sl9.data.settings.8.checkout}} "," {{sl9.data.settings.8.view_cart}} "," {{ include sl9.notify.snippet_product_discounted plus promoItem as promoItem }} ",' <div class="tdf_content_section_discounted"><div class="tdf_discount_title"> {{sl9.data.settings.8.your_discount}}: </div> {_ for i,promoItem in discounteds _}2{_ endfor _} <button type="button" class="tdf_cta_btn tdfe {{sl9.data.settings.6.coa}}" data-e="click_discount_checkout"> {_ if ! sl9.data.settings.6.coa || sl9.data.settings.6.coa == 24 _}0{_ endif _} {_ if sl9.data.settings.6.coa == sl9.struct.consta.ClickGoCart _}1{_ endif _} </button></div> ']},sl9.notify.snippet_cart_progresshtm={m:'<div class="tdf_motivator tdf_container"><div class="tdf_motivator_container"> {{message}} <div class="tdf_motivator_border"><div class="tdf_motivator_progress" {{progress_style}}></div></div></div></div>',subs:[]},sl9.notify.snippet_cart_discountinghtm={m:'<div class="tdf_discounting_cart"><div class="tdf_discount_icon tdf_discount_icon_{{promoItem.discount_type}}"></div><div class="tdf_discount_content"> {_ if promoItem.discount_type == consta.DiscountTypeFreeShip _}0{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypeFreeGift _}1{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypeValue _}2{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypePercent _}3{_ endif _} </div></div>',subs:[" {{sl9.data.settings.8.free_ship}}<br>{{sl9.data.settings.8.added}} "," {{ assign discounting = 1 }} {{ include sl9.notify.snippet_discounted_gift }} "," {{promoItem.toCDsc}} {{sl9.data.settings.8.added}} "," {{promoItem.toCDsc}} {{sl9.data.settings.8.added}} "]},sl9.notify.snippet_cart_discountablehtm={m:'<div class="tdf_discountable_cart"><div class="tdf_discount_icon tdf_discount_icon_{{discountable.discount_type}}"></div><div class="tdf_discount_content"> {{message}} </div></div>',subs:[]},sl9.notify.snippet_discounted_gifthtm={m:'<div class="tdf_gift" data-offer-type-id="{{promoItem.offer_type_id}}" data-offer-id="{{promoItem.offer_id}}" data-promoitem-id="{{promoItem.id}}"> {{ assign gift = products.{{{promoItem.product_id}}} }} <div class="tdf_discount_tag"> {{sl9.data.settings.8.free_gift}} {_ if discounting _}0{_ endif _} </div><div class="tdf_discount_text"><a href="javascript:;" class="tdf_gift_title tdfe" data-e="show_free_gifts" data-pid="{{promoItem.product_id}}" data-pids="{{promoItem.discount_value}}" title="{{gift.title.toInput}}" data-vid="{{promoItem.variant_id}}" data-vids="{{promoItem.vids}}">{{gift.getTitle}}</a></div></div>',subs:[" {{sl9.data.settings.8.added}} "]},sl9.notify.snippet_product_discountablehtm={m:'<div class="tdf_discountable_product"><div class="tdf_discount_icon tdf_discount_icon_{{discountable.discount_type}}"></div><div class="tdf_discount_content"> {{ assign product = products.{{{discountable.product_id}}} }} {_ if discountable.discount_type == consta.DiscountTypeValue || discountable.discount_type == consta.DiscountTypePercent _}3{_ endif _} <div class="tdf_product_title">{{product.getTitle}}</div> {_ if discountable.discount_type == consta.DiscountTypeFreeShip _}4{_ endif _} {_ if discountable.discount_type == consta.DiscountTypeFreeGift _}2{_ endif _} </div></div>',subs:[" {{discountable.message.toTranslate}} {_ else _} {{sl9.data.settings.8.your_price}}: "," {{discountable.message.toTranslate}} {_ else _} {{sl9.data.settings.8.includes}} "," {{ include sl9.common.snippet_discountable_gift }} ",' {_ if discountable.hasMessage _}0{_ endif _} <br class="tdf_auto_br"><span class="tdf_price_original">{{product.current_sale_variant.display_old_price.toCurrency}}</span><span class="tdf_price_sales"> {{product.current_sale_variant.display_price.toCurrency}}</span> ',' <div class="tdf_discount_tag_freeship"> {_ if discountable.hasMessage _}1{_ endif _} <br class="tdf_auto_br"> {{sl9.data.settings.8.free_ship}} </div> ']},sl9.notify.snippet_product_discountedhtm={m:'<div class="tdf_discounted_product"><div class="tdf_discount_icon tdf_discount_icon_{{promoItem.discount_type}}"></div><div class="tdf_discount_content"> {_ if promoItem.discount_type == consta.DiscountTypeFreeShip _}0{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypeFreeGift _}1{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypeValue _}3{_ endif _} </div></div>',subs:[' <div class="tdf_discount_tag_freeship">{{sl9.data.settings.8.free_ship}}</div> ',' <div class="tdf_discount_tag">{{ include sl9.notify.snippet_discounted_gift }}</div> ',"{{sl9.data.settings.8.items}}{_ else _}{{sl9.data.settings.8.item}}",' <div class="tdf_discount_tag">{{sl9.data.settings.8.you_save}} {{promoItem.discount_value.toCrcF}}</div><div class="tdf_discount_text">{{promoItem.quantity}} {_ if promoItem.quantity > 1 _}2{_ endif _}</div> ']},sl9.notify.snippet_product_discountinghtm={m:'<div class="tdf_discounting_product"><div class="tdf_discount_icon tdf_discount_icon_{{promoItem.discount_type}}"></div><div class="tdf_discount_content"> {_ if promoItem.discount_type == consta.DiscountTypeFreeShip _}0{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypeFreeGift _}1{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypeValue _}4{_ endif _} {_ if promoItem.discount_type == consta.DiscountTypePercent _}5{_ endif _} </div></div>',subs:[' <div class="tdf_discount_tag_freeship">{{sl9.data.settings.8.free_ship}}<br>{{sl9.data.settings.8.added}}</div> ',' {{ assign discounting = 1 }} <div class="tdf_discount_tag">{{ include sl9.notify.snippet_discounted_gift }}</div> '," {{countBundleItems}} {{sl9.data.settings.8.items}} {_ else _} {{ include sl9.notify.snippet_product_titles plus promoItem as promoItem }} "," {{countBundleItems}} {{sl9.data.settings.8.items}} {_ else _} {{ include sl9.notify.snippet_product_titles plus promoItem as promoItem }} ",' <div class="tdf_discount_tag">{{promoItem.toDsc}} {{sl9.data.settings.8.added}}</div><div class="tdf_discount_text"> {_ if countBundleItems _}2{_ endif _} </div> ',' <div class="tdf_discount_tag">{{promoItem.toDscR}} {{sl9.data.settings.8.added}}</div><div class="tdf_discount_text"> {_ if countBundleItems _}3{_ endif _} </div> ']},sl9.notify.snippet_product_titleshtm={m:"{{ assign product = products.{{{promoItem.product_id}}} }}{{product.getTitle}}",subs:[]},sl9.notify.tplhtm={m:'<div id="tdf_notify" class="tdf_container"><div class=""><div class="tdf_notify_popup tdf_notify_container"></div><div class="tdf_notify_msgs tdf_notify_container"></div><div class="tdf_notify_minicon tdf_notify_container tdf_hidden tdfe" data-e="notify_discount_icon_click"></div></div></div>',subs:[]},sl9.struct={},sl9.struct.customer_col={Tags:1,Email:2,Phone:3,Name:4,Country:7,Province:8,ProvinceCode:9,ZipCode:10,City:11,Street:12,Address:13,Company:14,Spent:16,TotalOrder:17,FirstOrderAt:18,LastOrderAt:19,Purchased:20},sl9.struct.app={id:2,code:"sl9"},sl9.struct.consta={RelGreater:2,RelLess:3,RelIsOneOf:7,RelHaveOneOf:8,RelContainOneOf:9,RelMultiContainOneOf:10,RelIsNotOneOf:42,RelDontHaveOneOf:43,RelDontContainOneOf:46,RelDontMContainOneOf:47,ClickGoCheckout:0,ClickGoCart:1,ClickGoShoping:2,ClickStay:3,ClickAdd:0,ClickReplace:1,OfferTypeFirst:1,OfferTypeUpsell:2,OfferTypeBundle:3,OfferTypeRec:4,OfferTypeCart:5,OfferTypeWholesale:7,OfferTypePostsale:8,OfferTypeTrigger:6,OfferTypeLoyal:9,GroupTypeAny:1,GroupTypeManual:2,GroupTypeAuto:3,GroupTypeRecentView:4,GroupTypeAI:5,GroupPriority:[1,5,4,3,2],SettingTypeFirst:1,SettingTypeUpsell:2,SettingTypeBundle:3,SettingTypeRec:4,SettingTypeCart:5,SettingTypeOther:6,SettingTypeBack:7,SettingTypeTrans:8,SettingTypeTheme:9,SettingTypeLoyal:10,ProductTypeSortByCreated:2,ActionTrackImpression:1,ActionTrackClick:2,ActionTrackView:3,ActionTrackAdd:4,CountdownSpecific:1,RecPlaceBottom:0,RecPlaceTop:1,RecPlaceUnderHeader:2,SalePlaceWidget:1,SalePlaceNoti:0,BundleStyleSimple:0,BundleStyleDetail:1,BundleStyleSet:2,BundleStyleNone:4,BundleStyleScrolless:5,BundleStyleAmz:6,ScheduleTypeDate:1,ScheduleTypeWeekly:2,ScheduleTypeMonthly:3,SegmentTypeLogined:1,SegmentTypeAnonym:2},sl9.upsell={},sl9.upsell.last={IsActive:!1,getLastOffers:function(){for(var t=sl9.manager.offer.ListAll(sl9.struct.consta.OfferTypeUpsell),e=[],n=0;n<t.length;n++)t[n].trigger.on_checkout&&e.push(t[n]);return e},Start:function(){sl9.nfec.event_hub.ListenTo("cart_updated",function(t,e){var n=sl9.upsell.last.getLastOffers();sl9.common.checkout.HasOffer=!1;var i=sl9.nfec.manager.cart.Get(),o=i.getProductIDs(),r=i.getVariantIDs();sl9.upsell.main.GetSections(n,o,r,!1,!0).sections.length&&(sl9.common.checkout.HasOffer=!0)},!0,!0),setTimeout(function(){sl9.nfec.event_hub.ListenTo("show_checkout_offer",function(t,e){var n=sl9.upsell.last.getLastOffers(),i=sl9.nfec.manager.cart.Get(),o=i.getProductIDs(),r=i.getVariantIDs(),c=sl9.upsell.main.GetSections(n,o,r,!1,!0),a=c.sections;if(a.length){var f=c.offer_ids,l=sl9.manager.draft_order.Get(),_=sl9.nfec.manager.cart.GetOldTotal();jQuery("body").first().append(sl9.common.tpl.Render(sl9.upsell.tplhtm,{sections:a,draft_order:l,display_id:c.display_id,is_last:1,old_cart_total:_},!0)).addClass("tdf_disable_scroll");for(var u=0;u<f.length;u++)sl9.common.track.AddAction(sl9.struct.consta.ActionTrackView,sl9.struct.consta.OfferTypeUpsell,f[u]);sl9.upsell.last.IsActive=!0,sl9.common.tpl.AdjustH(jQuery(".tdf_bs_offer_1 .tdf_bs_offer_products"),"tdf_bs_offer_product")}else sl9.common.checkout.Process()})},50),sl9.nfec.event_hub.ListenTo("click_upsell_checkout",function(t,e){sl9.common.checkout.Process()})}},sl9.upsell.promo={HandlePromo:function(t){var e,n=sl9.nfec.manager.cart.Get(),i=sl9.struct.consta.OfferTypeUpsell,o=sl9.manager.offer.List(i),r={},c=sl9.manager.promo.Get(),a=new sl9.manager.gifter;a.init(c);var f=function(){var A=new sl9.model.promo_item;return A.offer_type_id=i,A.offer_id=e.id,A.app_id=sl9.struct.app.id,A.quantity=1,A},l=sl9.common.checkout.IsClickedCheckoutBtn(),_=l,u=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeUpsell,"ck_strict"),p=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"cheap_mode");u&&_&&(_=parseFloat(l)<sl9.nfec.manager.cart.Total);for(var h=n.getAllItems(),m={},g=function(A,G,j){j=j||20;var L=m[A];return!L||L!=G&&!(--j<2)&&g(L,G,j)},v=function(A){if(m[A])return!1;var G;for(G in m)if(m.hasOwnProperty(G)&&m[G]==A)return!1;return!0},y=function(A,G){switch(A.discounted=!0,(j=f()).discount_type=G.discount.type_id,j.discount_value=G.discount.value,G.discount.type_id){case sl9.nfec.consta.DiscountTypeFreeShip:t.addItem(j);break;case sl9.nfec.consta.DiscountTypeFreeGift:var j=f();if(a.serve(i,G,j))break;t.addItem(j);break;default:(j=f()).discount_type=G.discount.type_id,j.discount_value=G.discount.value,j.product_id=A.product_id,j.variant_id=A.variant_id,j.price=A.price,t.addItem(j)}},w=function(A,G,j){if(!r[A.id]&&G.uid!=j.uid&&!j.discounted&&A.isIn(j.product_id,[j.variant_id])&&v(G.uid)&&v(j.uid))return m[j.uid]=G.uid,y(j,A),A.is_strict&&0<A.trigger.min_cart&&(r[A.id]=1),!0},T=0;T<o.length;T++)if((e=o[T]).discount.isValid()&&(!e.trigger.on_checkout||_)){var q=!1;if(e.is_replace){if(!sl9.manager.replaceflag.CheckGroups(e.product_groups))continue;q=!0}else if(e.trigger.min_cart>n.getTotalPriceByPV(e.trigger.getPIDs(),e.trigger.getVIDs()))continue;if(e.is_strict){for(var S=h.length-1;0<=S;S--){var k=h[S];if(q||e.trigger.isIn(k.product_id,[k.variant_id]))if(p)for(var D=0;D<h.length;D++){var I=h[D];if(w(e,k,I))break}else for(D=S-1;0<=D&&(I=h[D],!w(e,k,I));D--);}if(!p){for(S=h.length-1;0<=S;S--)if(k=h[S],q||e.trigger.isIn(k.product_id,[k.variant_id]))for(D=S+1;D<h.length&&(I=h[D],!w(e,k,I));D++);}}else for(D=0;D<h.length;D++)if(!(I=h[D]).discounted&&e.isIn(I.product_id,[I.variant_id])){var C=!1;if(q&&(C=!0),!C){for(S=h.length-1;0<=S;S--)if((k=h[S]).uid!=I.uid&&e.trigger.isIn(k.product_id,[k.variant_id])&&g(k.uid,I.uid)){m[I.uid]=k.uid,C=!0;break}}C&&y(I,e)}}for(T=0;T<o.length;T++)if(e=o[T],!p&&e.discount.isValid()&&(!e.trigger.on_checkout||l)&&!(e.trigger.min_cart>n.getTotalPriceByPV(e.trigger.getPIDs(),e.trigger.getVIDs()))){for(C=!1,S=h.length-1;0<=S;S--)if(k=h[S],e.trigger.isIn(k.product_id,[k.variant_id])&&(!e.is_strict||v(k.uid))){C=!0;break}if(C){for(S=0;S<e.product_groups.length;S++)if(e.product_groups[S].ids)for(var O=0;O<e.product_groups[S].ids.length;O++){var P=new sl9.nfec.model.discountable;P.app_id=sl9.struct.app.id,P.discount_type=e.discount.type_id,P.discount_value=e.discount.value,P.is_cart=!1,P.offer_id=e.id,P.offer_type_id=i,P.product_id=e.product_groups[S].ids[O],P.vids=e.product_groups[S].vids,sl9.nfec.manager.discountable.Set(e.product_groups[S].ids[O],P)}}else if(e.is_strict){var R=!1;jQuery(".tdf_bs_offer_product").each(function(){jQuery(this).data("offer-id")==e.id&&(R=!0)}),R&&jQuery(".tdf_bs_offer").addClass("tdf_hidden")}}}},sl9.upsell.section={showed:!1,run:function(){var t=sl9.manager.offer.List(sl9.struct.consta.OfferTypeUpsell),e=window.tdfMainPids||sl9.nfec.manager.cart.GetCurrentProductIDs(),n=sl9.upsell.main.GetSections(t,e,null,!0);if(n.sections.length){for(var i,o,r=[],c=[],a=[],f="",l=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeRec,"c_slot")||4,_=0;_<n.sections.length;_++){i=n.sections[_].products.concat(n.sections[_].otherProducts),f||(f=n.sections[_].message);for(var u=0;u<i.length;u++)a.indexOf(i[u].id)==-1&&(a.push(i[u].id),o={id:i[u].id,offer_num:sl9.struct.consta.OfferTypeUpsell,offer_id:i[u].offer.id},r.length<l?r.push(o):c.push(o))}jQuery("#tdf_rec_cart").remove(),f||(f=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"cart_rec")),sl9.nfec.event_hub.Trigger("rec_show_section",{id:"cart",message:f,products:r,otherProducts:c}),sl9.upsell.section.showed=!0}},Start:function(){sl9.nfec.event_hub.ListenTo("cart_updated",function(t,e){sl9.upsell.section.showed||sl9.upsell.section.run()},!0),sl9.nfec.event_hub.ListenTo("cart_item_added",function(t,e){sl9.upsell.section.run()},!0)}},sl9.upsell.main={Start:function(t){if(!(sl9.nfec.util.tool.IsTabletOrSmaller()&&sl9.main.GetData("settings",sl9.struct.consta.SettingTypeUpsell,"no_mobile"))){sl9.upsell.main.formatOffers(),sl9.upsell.section.Start(),sl9.upsell.last.Start();var e=function(){jQuery("#tdf_upsell").remove(),jQuery("body").removeClass("tdf_disable_scroll"),sl9.upsell.last.IsActive||sl9.common.checkout.IsCheckingOut||sl9.common.checkout.IsCheckingOutStop?sl9.common.checkout.Process():sl9.nfec.event_hub.Trigger("close_popup",{})};sl9.nfec.event_hub.ListenTo("click_upsell_bg",function(i,o){jQuery(o.event.target).closest(".tdf_dialog_content").length||e()}),sl9.nfec.event_hub.ListenTo("upsell_view_cart",function(i,o){sl9.nfec.loading.control.Start(),sl9.nfec.platform.current.redirect.GoToCartPage()}),sl9.nfec.event_hub.ListenTo("select_upsell_variant",function(i,o){var r=parseInt(o.els.val()),c=o.els.closest(".tdf_bs_offer_product"),a=parseInt(c.data("product-id")),f=sl9.nfec.manager.product.FindByID(a),l=f.getVariantByID(r);c.find(".tdf_horizontal_price").html(sl9.common.tpl.Render(sl9.common.snippet_pricehtm,{current_variant:l})),c.find(".tdf_discountable_div").html(sl9.common.tpl.Render(sl9.common.snippet_discountablehtm,{discountable:l.getDiscountable()})),sl9.nfec.event_hub.Trigger("re_adjust_h"),sl9.common.product.CleanSoldout(c.find("button")),sl9.manager.product_offer.AddRaw(sl9.struct.consta.OfferTypeUpsell,parseInt(c.data("offer-id")),a),sl9.nfec.manager.product.GetByHandle(f.handle,function(_){var u=parseInt(o.els.val()),p=_.getVariantByID(u);if(p){var h=p.image.mediumSrc();h&&c.find(".tdf_img").css("background-image","url("+h+")")}})});var n=function(){var i=jQuery(".tdf_upsell_trigger");return{product_id:parseInt(i.data("trigger-prod")),variant_id:parseInt(i.data("trigger-var"))}};sl9.nfec.event_hub.ListenTo("replace_qv_upsell_product",function(i,o){var r=o.els.closest(".tdf_qv_content");r.length||(r=o.els.closest(".tdf_products_vertical_content"));var c=parseInt(r.data("product-id")),a=parseInt(r.data("variant-id")),f={product_id:c,variant_id:a};sl9.manager.replaceflag.Add(c,a),sl9.nfec.platform.base.cart_api.ReplaceItem(n(),f,function(l){l?sl9.nfec.event_hub.Trigger("close_quick_view",{}):sl9.common.product.NotiSelectOther()})}),sl9.nfec.event_hub.ListenTo("click_add_upsell_product",function(i,o){var r=o.els.closest(".tdf_bs_offer_product"),c=parseInt(r.find(".tdf_select_input").val()),a=r.find(".tdf_select_input").find(":selected");sl9.nfec.util.tpl.AddBtnLoading(o.els);var f=r.find(".tdf_qty_input").val()||1,l=parseInt(r.data("offer-id")),_=parseInt(r.data("product-id"));if(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"product_fields")){var u=sl9.nfec.manager.product.FindByID(_);sl9.nfec.platform.current.redirect.GoToProductPage(u.handle,c)}else{sl9.manager.product_offer.AddRaw(sl9.struct.consta.OfferTypeUpsell,l,_);var p=sl9.manager.offer.Get(sl9.struct.consta.OfferTypeUpsell,l),h=function(g){if(!g)return sl9.nfec.util.tpl.RemoveBtnLoading(o.els),sl9.common.product.HandleSoldout(r.find("button")),void setTimeout(function(){a.siblings().length&&sl9.common.product.CleanSoldout(o.els),a.remove()},3e3)};if(p.is_replace){var m={product_id:_,variant_id:c};sl9.manager.replaceflag.Add(_,c),sl9.nfec.platform.base.cart_api.ReplaceItem(n(),m,function(g){h(g)})}else sl9.nfec.platform.current.cart_api.AddItem(c,f,function(g){h(g)})}}),t||setTimeout(function(){sl9.nfec.event_hub.ListenTo("cart_item_added_by_update",function(i,o){o.compared.is_replaced&&sl9.upsell.main.handleAddItemEvent(i,o.compared)}),sl9.nfec.event_hub.ListenTo("cart_item_added",function(i,o){var r=sl9.common.checkout.IsCheckingOut,c=sl9.upsell.main.handleAddItemEvent(i,o,r);r&&c&&(sl9.common.checkout.IsCheckingOutStop=!0,sl9.common.checkout.IsCheckingOut=!1)},!0,!0)},50),sl9.nfec.event_hub.ListenTo("click_upsell_cta",function(i,o){if(sl9.common.checkout.IsCKing)sl9.common.checkout.Process();else switch(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeUpsell,"coa")){case sl9.struct.consta.ClickGoCart:sl9.nfec.loading.control.Start(),sl9.nfec.platform.current.redirect.GoToCartPage();break;case sl9.struct.consta.ClickStay:e();break;case sl9.struct.consta.ClickGoShoping:sl9.nfec.loading.control.Start(),sl9.nfec.platform.current.redirect.GoToCollectionPage();break;default:sl9.common.checkout.Process()}}),sl9.nfec.event_hub.ListenTo("click_upsell_product",function(i,o){var r=o.els.closest(".tdf_bs_offer_product"),c=parseInt(r.data("product-id")),a=sl9.nfec.manager.product.FindByID(c),f=[],l=parseInt(r.data("offer-id")),_=sl9.manager.offer.Get(sl9.struct.consta.OfferTypeUpsell,l),u={},p=_.product_groups[0].pvids;if(p)for(w in p)p.hasOwnProperty(w)&&(u[w]=p[w]);var h=[_.id],m={handle:a.handle};if(_.is_replace)m.not_show_qty=1,m.is_custom_cta=1,m.custom_cta=sl9.common.tpl.Render(sl9.upsell.replace_btnhtm,{offer_id:_.id});else{o=sl9.nfec.util.tpl.GetTplData(jQuery("#tdf_upsell").data("tpl-did"));for(var g,v,y=[],w=0;w<o.sections.length;w++){g=o.sections[w].products.concat(o.sections[w].otherProducts);for(var T=0;T<g.length;T++)if(v=g[T],y.indexOf(v.id)==-1&&(y.push(v.id),f.push({id:v.id,offer_id:v.offer.id,offer_type_id:sl9.struct.consta.OfferTypeUpsell}),h.indexOf(v.offer.id)==-1&&(h.push(v.offer.id),p=v.offer.product_groups[0].pvids)))for(w in p)p.hasOwnProperty(w)&&(u[w]=p[w])}m.qv_products=f}m.pvids=u,sl9.nfec.event_hub.Trigger("show_quick_view",m),sl9.manager.product_offer.AddRaw(sl9.struct.consta.OfferTypeUpsell,l,c)}),sl9.nfec.event_hub.ListenTo("cart_empty",function(i,o){sl9.nfec.store.control.Remove("uss")},!0)}},formatOffers:function(){var t=sl9.struct.consta.OfferTypeUpsell,e=sl9.manager.offer.ListAll(t);e.sort(function(n,i){if(n.message){if(!i.message)return-1}else if(i.message)return 1;var o=n.trigger.priority;if((r=i.trigger.priority)<o)return-1;if(o<r)return 1;var r;if(o=n.priority,(r=i.priority)<o)return-1;if(o<r)return 1;var c=n.trigger.compare(i.trigger);if(c)return c;if(n.discount.isValid()){if(!i.discount.isValid())return-1}else if(i.discount.isValid())return 1;if(n.is_strict){if(!i.is_strict)return-1}else if(i.is_strict)return 1;return n.id>i.id?-1:1}),sl9.manager.offer.Set(t,e)},handleAddItemEvent:function(t,e,n){for(var i=e.added[0],o=i.product_id,r=sl9.manager.offer.List(sl9.struct.consta.OfferTypeUpsell),c=[],a=0;a<r.length;a++)!n&&r[a].trigger&&r[a].trigger.on_checkout||c.push(r[a]);var f=sl9.upsell.main.GetSections(c,[o],[i.variant_id]),l=f.sections;if(l.length||e.is_tdf&&!n){var _=f.offer_ids,u=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeUpsell,"up_secl")||2;l=l.slice(0,u);var p=sl9.manager.draft_order.Get(),h=sl9.nfec.manager.cart.GetOldTotal(),m=sl9.common.checkout.IsCKing;if(l.length){var g=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeUpsell,"us_lim");if(g){if(!e.is_tdf){var v=sl9.nfec.store.control.Get("uss");if(g&&v)return}sl9.nfec.store.control.Set("uss",1,3600)}jQuery("#tdf_upsell").remove(),jQuery("body").first().append(sl9.common.tpl.Render(sl9.upsell.tplhtm,{added_item:i,sections:l,draft_order:p,is_replaced:e.is_replaced,is_checkout:m,display_id:f.display_id,old_cart_total:h},!0)).addClass("tdf_disable_scroll");for(var y=0;y<_.length;y++)sl9.common.track.AddAction(sl9.struct.consta.ActionTrackView,sl9.struct.consta.OfferTypeUpsell,_[y]);return jQuery(".tdf_bs_offer_1 .tdf_bs_offer_products").each(function(){sl9.common.tpl.AdjustH(jQuery(this),"tdf_bs_offer_product")}),nfec.platform.current.element.CheckTheme("Prestige")&&jQuery("#sidebar-cart .Drawer__Close").click(),nfec.platform.current.element.CheckTheme("Debutify")&&jQuery("head").append("<style>#CartDrawer{z-index:999999988!important}.overlay-drawer{z-index:999999987!important}</style>"),setTimeout(function(){jQuery("body.blocked-scroll").removeClass("blocked-scroll")},300),jQuery("head").append("<style>.slidecarthq{z-index:999999988!important}.slidecarthq-overlay{z-index:999999987!important}</style>"),!0}if(jQuery("#tdf_upsell").length){var w=jQuery(".tdf_upsell_trigger");return w.length||(w=jQuery(".tdf_upsell_checkout")),w.replaceWith(sl9.common.tpl.Render(sl9.upsell.snippet_added_itemhtm,{added_item:i,draft_order:p,is_replaced:e.is_replaced,is_checkout:m,old_cart_total:h})),jQuery(".tdf_bs_offer_product").each(function(){var q=jQuery(this);if(q.data("product-id")==o)q.remove();else{var S=sl9.manager.offer.Get(sl9.struct.consta.OfferTypeUpsell,parseInt(q.data("offer-id")));S&&0<S.trigger.min_cart&&S.is_strict&&q.remove()}}),void jQuery(".tdf_bs_offer").each(function(){var q=jQuery(this);q.find(".tdf_bs_offer_product").length||q.remove()})}var T=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeTrans,"added_successfully");sl9.nfec.noti.control.Run(T,3e3)}},GetSections:function(t,e,n,i,o){var r=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeUpsell,"shuffle"),c=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeUpsell,"noshuffle"),a=sl9.nfec.manager.cart.Get(),f=0;if(!i&&!o){var l=a.findItemByVariantID(n[0]);l&&(f=l.price)}var _,u,p=[],h=[],m={sections:[],offer_ids:[],display_id:0},g=4;for(D in t)if(t.hasOwnProperty(D)){if(_=t[D],i){if(!_.isWidget())continue}else if(!_.isPopup())continue;if(_.trigger.areIn(e,n)){if(0<_.trigger.min_cart){var v=a.getTotalPriceByPV(_.trigger.getPIDs(),_.trigger.getVIDs());if(_.trigger.min_cart>v||_.is_strict&&f&&_.trigger.min_cart<=v-f)continue}var y=[];for(C=0,O=_.product_groups.length;C<O;C++)if((u=_.product_groups[C]).offer=_,u.type_id==sl9.struct.consta.GroupTypeAI&&(u.ids=sl9.common.rexy.GetCross()),u.ids&&u.ids.length){switch(u.type_id){case sl9.struct.consta.GroupTypeAuto:c||(u.ids=sl9.nfec.util.tool.Shuffle(u.ids));case sl9.struct.consta.GroupTypeManual:r&&(u.ids=sl9.nfec.util.tool.Shuffle(u.ids))}y.push(u)}y.length&&(_.product_groups=y,_.display_id&&(m.display_id=_.getPDisplayID(),g=32),h.push(_))}}for(var w,T=sl9.nfec.manager.cart.GetCurrentProductIDs(),q=[],S=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeUpsell,"up_other"),k={},D=0,I=h.length;D<I;D++){k[(_=h[D]).message]===void 0?(k[_.message]=p.length,w={id:p.length,message:_.message,products:[],otherProducts:[],product_groups:[]},p.push(w)):w=p[k[_.message]];for(var C=0,O=_.product_groups.length;C<O;C++)w.product_groups.push(_.product_groups[C])}var P={};for(D=0,I=p.length;D<I;D++)for(C=0,O=(w=p[D]).product_groups.length;C<O;C++)for(var R=0,A=(u=w.product_groups[C]).ids.length;R<A;R++)if(P[u.ids[R]]||(P[u.ids[R]]=[]),P[u.ids[R]].indexOf(C)==-1&&P[u.ids[R]].push(C),q.indexOf(u.ids[R])==-1&&(T.indexOf(u.ids[R])==-1||!S&&u.isPreSelect())){var G=sl9.nfec.manager.product.FindByID(u.ids[R]).filterVars(u.vids);w.products.length<g?(q.push(u.ids[R]),m.offer_ids.indexOf(u.offer.id)==-1&&m.offer_ids.push(u.offer.id),w.products.push({offer:u.offer,id:u.ids[R],variants:G})):w.otherProducts.push({offer:u.offer,id:u.ids[R],variants:G})}for(D=0,I=p.length;D<I;D++)(w=p[D]).products.length&&(m.sections.push(w),w.otherProducts.sort(function(j,L){return P[j.id]-P[L.id]}));return m}},sl9.upsell.snippet_added_itemhtm={m:'<div class="tdf_dialog_header tdf_upsell_trigger" data-trigger-prod="{{added_item.product_id}}" data-trigger-var="{{added_item.variant_id}}"><div class="tdf_dialog_header_body"><div class="tdf_target_left"><div class="tdf_image"><div class="tdf_detail_image"><div class="tdf_image_target"><img src="{{added_item.mediumImageSrc}}" alt="{{added_item.getTitle}}" title="{{added_item.title.toInput}}"></div></div><div class="tdf_target_name"><a class="tdf_header_message">{_ if is_replaced _}0{_ endif _}</a><a class="tdf_detail_image"><strong title="{{added_item.title.toInput}}">{{added_item.getTitle}}</strong></a></div></div></div><div class="tdf_target_right"><div class="tdf_detail"><div class="tdf_cart_detail"><a href="javascript:;" class="tdf_link_view_cart tdfe" data-e="upsell_view_cart">{{sl9.data.settings.8.cart_total}}: </a><span class="tdf_cart_items">{{cart.getTotalAddeds}} {_ if cart.getTotalAddeds != 1 _}1{_ endif _}</span><span class="tdf_cart_amount"> ({_ if sl9.IsDmodeNone _}8{_ endif _}) </span></div><div class="tdf_action"><button type="button" class="tdf_cta_btn {_ if cart.getTotalAddeds < 2 && sections.length && ! is_replaced _}4{_ endif _} tdfe" data-e="click_upsell_cta"> {_ if is_checkout _}9{_ endif _} </button></div></div></div></div></div>',subs:["{{sl9.data.settings.8.you_replaced}}{_ else _}{{sl9.data.settings.8.you_added}}","{{sl9.data.settings.8.items}}{_ else _}{{sl9.data.settings.8.item}}",'<span class="tdf_price_original">{{cart.n_o_p.toCurrencyN}} </span>','<span class="tdf_price_original">{{old_cart_total.toCurrency}} </span>',"tdf_inactive_checkout"," {{sl9.data.settings.8.checkout}} "," {{sl9.data.settings.8.view_cart}} "," {{sl9.data.settings.8.continue_shopping}} ","{_ if cart.n_p != cart.n_o_p _}2{_ endif _}{{cart.n_p.toCurrencyN}}{_ else _}{_ if draft_order.change_cart_price _}3{_ endif _}{{draft_order.getTotalAmount.toCurrency}}"," {{sl9.data.settings.8.checkout}} {_ else _} {_ if ! sl9.data.settings.2.coa _}5{_ endif _} {_ if sl9.data.settings.2.coa == sl9.struct.consta.ClickGoCart _}6{_ endif _} {_ if sl9.data.settings.2.coa == sl9.struct.consta.ClickStay || sl9.data.settings.2.coa == sl9.struct.consta.ClickGoShoping _}7{_ endif _} "]},sl9.upsell.replace_btnhtm={m:'<button type="button" class="tdf_cta_btn tdfe" data-e="replace_qv_upsell_product" data-offer="{{offer_id}}"> {{sl9.data.settings.8.replace}}</button>',subs:[]},sl9.upsell.snippet_last_offerhtm={m:'<div class="tdf_dialog_footer tdf_upsell_checkout"><div class=""> {{sl9.data.settings.8.cart_total}}: {_ if sl9.IsDmodeNone _}2{_ endif _} </div><div class=""><button type="button" class="tdf_cta_btn tdfe" data-e="click_upsell_checkout"> {{sl9.data.settings.8.continue_checkout}} </button></div></div>',subs:['<span class="tdf_price_original">{{cart.n_o_p.toCurrencyN}} </span>','<span class="tdf_price_original">{{old_cart_total.toCurrency}} </span>',"{_ if cart.n_p != cart.n_o_p _}0{_ endif _}{{cart.n_p.toCurrencyN}}{_ else _}{_ if draft_order.change_cart_price _}1{_ endif _}{{draft_order.getTotalAmount.toCurrency}}"]},sl9.upsell.tplhtm={m:'<div id="tdf_upsell" class="tdf_container" data-tpl-did="{{tpl_data_id}}"><div class="tdf_dialog_modal tdf_dialog_modal_upsell tdfe" data-e="click_upsell_bg"><i class="tdf_close_btn"></i><div class="tdf_dialog_content"> {_ if is_last _}0{_ endif _} {_ if added_item _}1{_ endif _} {_ if sections.length _}10{_ endif _} </div></div></div>',subs:[" {{ include sl9.upsell.snippet_last_offer }} "," {{ include sl9.upsell.snippet_added_item }} ","tdf_vertical_img","tdf_hidden",' <div class="tdf_qv_quantity_container"><span class="">{{sl9.data.settings.8.quantity}}: </span><input class="tdf_qty_input" type="number" min="1" value="1"></div> '," {{ include sl9.common.snippet_discountable plus p.variants.0.discountable as discountable }} "," {{sl9.data.settings.8.add}} {_ else _} {{sl9.data.settings.8.replace}} ",' <option value="{{variant.id}}">{{variant.getTitle}}</option> ',' {{ assign product = products.{{{p.id}}} }} <div class="tdf_bs_offer_product" data-product-id="{{p.id}}" data-offer-id="{{p.offer.id}}"><div class="tdf_horizontal_product"><div class="tdf_horizontal_img_left"><div class="tdf_img {_ if display_id _}2{_ endif _} tdfe" data-e="click_upsell_product" style="background-image:url({{product.image.largeSrc}})"></div></div><div class="tdf_horizontal_content_right"><a href="{{product.url}}" data-e="click_upsell_product" class="tdf_block tdfe" title="{{product.getTitle.toInput}}"><div class="tdf_horizontal_name"><h4 class="tdf_horizontal_title" title="{{product.getTitle.toInput}}">{{product.getTitle}}</h4></div><div class="tdf_horizontal_price"> {{ include sl9.common.snippet_price plus p.variants.0 as current_variant }} </div></a><div class="tdf_select_box {_ if 2 > product.variants.length _}3{_ endif _}"><select class="tdf_select_input tdfe" data-e="select_upsell_variant" data-et="change"> {_ for v,variant in p.variants _}7{_ endfor _} </select><span class="tdf_select_icon"></span><div class="tdf_select_backdrop"></div></div> {_ if sl9.data.settings.2.qty_enable _}4{_ endif _} <div class="tdf_discountable_div"> {_ if p.variants.0.is_discountable _}5{_ endif _} </div><div><button type="button" class="tdf_normal_btn tdfe" data-e="click_add_upsell_product"> {_ if ! p.offer.is_replace _}6{_ endif _} </button></div></div></div></div> ',' <div class="tdf_offer_message"><h3>{{section.message.toTranslate}}</h3></div><div class="tdf_bs_offer_products"> {_ for i,p in section.products _}8{_ endfor _} </div> ',' <div class="tdf_bs_offer tdf_bs_offer_{{display_id}}"> {_ for o,section in sections _}9{_ endfor _} </div> ']},sl9.wholesale={},sl9.wholesale.motihtm={m:'{{ assign product = products.{{{motivable.pid}}} }}{{ assign variant = product.variantMap.{{{motivable.vid}}} }}<div class="tdf_discountable_product tdf_nonpopup tdf_wholesale_moti" data-tpl-did="{{tpl_data_id}}"><div class="tdf_discount_icon tdf_discount_icon_0" style="background-image:url({{variant.image.smallSrc}});"></div><div class="tdf_discount_content"> {{message.toTranslate}} {_ if motivable.is_btn _}0{_ endif _} </div></div>',subs:[' <div><button type="button" class="tdf_lite_btn tdfe" data-e="wholesale_qv_plus">+</button></div> ']},sl9.wholesale.main={Start:function(){sl9.wholesale.main.formatOffers(),sl9.wholesale.tab.Start(),sl9.wholesale.moti.Start(),sl9.nfec.event_hub.ListenTo("show_wholesale_free_gifts",function(t,e){for(var n,i=parseInt(e.els.data("id")),o=parseInt(e.els.data("q")),r=sl9.manager.offer.Get(sl9.struct.consta.OfferTypeWholesale,i),c=0;c<r.levels.length;c++)if(r.levels[c].quantity==o){n=r.levels[c];break}var a=parseInt(e.els.data("pid"));a||(a=n.giftIDs[0]);var f=sl9.nfec.manager.product.FindByID(a);f&&sl9.nfec.event_hub.Trigger("show_quick_view",{is_gift:!0,is_custom_cta:1,not_show_qty:1,not_show_normal_cta:1,custom_cta:"",handle:f.handle,product_ids:n.giftIDs,vids:n.vids})})},formatOffers:function(){var t=sl9.struct.consta.OfferTypeWholesale,e=sl9.manager.offer.List(t);e.sort(function(n,i){var o=n.priority,r=i.priority;if(r<o)return-1;if(o<r)return 1;var c=n.trigger.compare(i.trigger);return c||(n.id>i.id?-1:1)}),sl9.manager.offer.Set(t,e)}},sl9.wholesale.tab={Start:function(){sl9.wholesale.tab.handlePage(),sl9.wholesale.tab.handleQview(),sl9.nfec.event_hub.ListenTo("wholesale_adds",function(t,e){var n,i=e.els.closest(".tdf_container"),o=e.els.closest(".tdf_wholesale_level"),r=parseInt(o.data("q")),c=!1;if(i.hasClass("tdf_wholesale_page")){var a=sl9.nfec.platform.current.element.GetAddCartForms(!0);if(a.length){var f=a.find('[name="quantity"]'),l='<input type="hidden" name="quantity" value="'+r+'">';return f.length?f.is("select")?(f.find("option[value='"+r+"']").length||f.append(jQuery("<option>",{value:r,text:r+""})),f.val(r)):f.is("input")?f.val(r):(f.attr("name",""),a.append(l)):a.append(l),void a.submit()}n=sl9.nfec.manager.product.GetCurrentVariantID(!0)}else c=!0,n=parseInt(jQuery(".tdf_qv_content").data("variant-id"));n&&sl9.nfec.platform.current.cart_api.AddItem(n,r,function(_){c&&sl9.nfec.event_hub.Trigger("close_last_quick_view")})})},handlePage:function(){var t=sl9.nfec.platform.current.page.Detect(),e=0;t.type==sl9.nfec.consta.PageTypeProduct&&(e=t.payload.id);var n=[];jQuery(".tdfPlaceWholesale").each(function(){var r=jQuery(this).data("offer-id");r&&n.push(parseInt(r))});var i=sl9.struct.consta.OfferTypeWholesale,o=function(){var r=sl9.nfec.manager.product.GetCurrentVariantID(),c=sl9.wholesale.tab.getOffer(e,r,n),a=jQuery(".tdf_wholesale_page");if(c.offer){var f=sl9.common.tpl.Render(sl9.wholesale.tplhtm,{offer:c.offer});if(a.length)a.replaceWith(f);else{var l=jQuery(".tdfPlaceWholesale");if(l.length)l.first().after(f);else{var _=jQuery(".tdfWholesaleWrap").first();_.length||(_=nfec.platform.current.element.GetAddCartForms(!0)),_.append(f)}}sl9.common.track.AddImpression(i,c.offer.id)}else a.remove()};o(),sl9.nfec.event_hub.ListenTo("store_form_change_variant",function(r,c){e==c.product_id&&o()},!0,!0)},handleQview:function(){var t=sl9.struct.consta.OfferTypeWholesale,e=function(){var n=jQuery(".tdf_qv_wsale_div");if(n.length){var i="",o=jQuery(".tdf_qv_content"),r=sl9.wholesale.tab.getOffer(parseInt(o.data("product-id")),parseInt(o.data("variant-id")));r.offer&&(i=sl9.common.tpl.Render(sl9.wholesale.tplhtm,{offer:r.offer,is_qv:!0}),sl9.common.track.AddImpression(t,r.offer.id)),n.html(i)}};sl9.nfec.event_hub.ListenTo("quick_view_showed",function(n,i){e()}),sl9.nfec.event_hub.ListenTo("quick_view_sub_showed",function(n,i){e()}),sl9.nfec.event_hub.ListenTo("update_qv_variant",function(n,i){e()})},getOffer:function(t,e,n){var i,o,r,c=sl9.struct.consta.OfferTypeWholesale,a=sl9.manager.offer.List(c),f=!1;t:for(o in a)if(a.hasOwnProperty(o))for(var l=(r=a[o]).product_groups,_=l.length,u=0;u<_;u++)switch(l[u].type_id){case sl9.struct.consta.GroupTypeManual:case sl9.struct.consta.GroupTypeAuto:if(n&&n.indexOf(r.id)!=-1){i=r,f=!0;break t}if(r.trigger.product_groups[u].ids&&r.trigger.product_groups[u].ids.indexOf(t)!==-1){if(e&&!r.trigger.isIn(t,[e]))continue;i=r;break t}}return{offer:i,isPlaced:f}}},sl9.wholesale.moti={isShown:!1,handleCartAdd:function(t,e){if(!sl9.common.checkout.IsCheckingOut){if(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"discount_widget")&&sl9.nfec.platform.current.page.Detect().type==sl9.nfec.consta.PageTypeCart&&(jQuery(".tdfPlaceDiscounts").length||sl9.nfec.platform.current.element.GetCartFormDom(!0).length))return;var n=e.added[0];setTimeout(function(){var i=sl9.wholesale.moti.BuildProgress([n.product_id],[n.variant_id]);i&&(sl9.wholesale.moti.isShown&&!sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"ws_notis")||(sl9.wholesale.moti.isShown=!0,sl9.nfec.event_hub.Trigger("notify_discount_msg",{content:i})))},100)}},Start:function(){sl9.nfec.event_hub.ListenTo("cart_item_added",function(t,e){sl9.wholesale.moti.handleCartAdd(t,e)},!0,!0),sl9.nfec.event_hub.ListenTo("wholesale_qv_plus",function(t,e){var n=sl9.nfec.util.tpl.GetTplData(e.els.closest(".tdf_wholesale_moti").data("tpl-did")),i=sl9.nfec.manager.cart.Get().findItemByProduct(n.motivable.pid);if(sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"product_fields"))sl9.nfec.platform.current.redirect.GoToProductPage(i.handle);else{if(n.motivable.pids.length==1){var o=n.motivable.vids.length;if(!o){var r=sl9.nfec.manager.product.FindByID(n.motivable.pid);r&&(o=r.variants.length)}if(o<2)return void sl9.nfec.platform.current.cart_api.AddItem(i.variant_id,n.motivable.remain,function(c){})}sl9.nfec.event_hub.Trigger("show_quick_view",{handle:i.handle,product_ids:n.motivable.pids,vids:n.motivable.vids,current_variant_id:n.motivable.vid,prefill_quantity:n.motivable.remain,is_normal:!0})}})},BuildProgress:function(t,e){var n=sl9.nfec.manager.cart.Get(),i=n.getProductIDs(),o=n.getVariantIDs(),r=!1;t||(r=!0,t=i,e=o);var c,a,f,l,_,u,p=sl9.struct.consta.OfferTypeWholesale,h=sl9.manager.offer.List(p);t:for(var m=0;m<t.length;m++)for(var g=t[m],v=0;v<h.length;v++){var y=h[v];if(y.mtv_message&&y.isIn(g,e)){_=y.product_groups[0];var w=[];switch(y.apply_num){case 1:c=_.ids,w=[_.vids];break;case 2:c=[g];for(var T=0;T<e.length;T++)w.push([e[T]]);break;default:c=[g],w=[_.vids]}for(T=0;T<w.length;T++){var q=w[T];if(a=n.findVariantIDsByVIDs(c,q),!((f=n.countByVIDs(a))<1)&&(l=y.getNextLevel(f))){var S=n.findVariantIDsByVIDs([g],q),k=q;y.apply_num==2&&(k=[S[0]]),u={offer:y,goal_quantity:l.quantity,remain:l.quantity-f,pid:g,vid:S[0],pids:c,vids:k,is_btn:r,comma:l.is_freeship||l.gifts.length?",":""};break t}}}}if(u){var D=sl9.common.tpl.Render(sl9.wholesale.moti_msghtm,{motivable:u}),I=nfec.util.tool.Replaces(y.mtv_message,"{discount}",D);return I=nfec.util.tool.Replaces(I,"{quantity}",u.remain),sl9.common.tpl.Render(sl9.wholesale.motihtm,{message:I,motivable:u},r)}}},sl9.wholesale.moti_msghtm={m:"{_ for l,level in motivable.offer.levels _}8{_ endfor _}",subs:["{{level.discount.value}}{{percentsymbol}} {{sl9.data.settings.8.off}}{{motivable.comma}}","{{level.discount.discounted_price.toCurrency}}{{motivable.comma}}","{{level.discount.value.toCrcF}} {{sl9.data.settings.8.off}}{{motivable.comma}}",", ",' <a href="javascript:;" class="tdf_gift_title tdfe" data-e="show_wholesale_free_gifts" data-q="{{level.quantity}}" data-id="{{motivable.offer.id}}">+{{level.gifts.length}} {{sl9.data.settings.8.wholesale_gift}}</a> '," {_ if level.discount.type_id == consta.DiscountTypePercent _}0{_ endif _} {_ if level.discount.origin_type_id == consta.DiscountTypePrice _}1{_ endif _} {_ if level.discount.origin_type_id == consta.DiscountTypeValue _}2{_ endif _} "," {{sl9.data.settings.8.free_ship}}{_ if level.gifts.length _}3{_ endif _} "," {_ if level.is_discount _}5{_ endif _} {_ if level.is_freeship _}6{_ endif _} {_ if level.gifts.length _}4{_ endif _} "," {_ if level.quantity == motivable.goal_quantity _}7{_ endif _}"]},sl9.wholesale.tplhtm={m:'<div id="tdf_wholesale" class="tdf_container tdf_wholesale_{{offer.display_id}} {_ if is_qv _}0{_ endif _}" data-oid="{{offer.id}}"><div class="tdf_nonpopup"><h2>{{offer.message.toTranslate}}</h2></div><table> {_ if offer.display_id != 2 _}12{_ endif _} {_ for l,level in offer.levels _}17{_ endfor _} </table></div>',subs:["tdf_wholesale_qv{_ else _}tdf_wholesale_page"," {{sl9.data.settings.8.your_price}} {_ else _} {{sl9.data.settings.8.wholesale_discount}} ","{{level.range}}","{{level.quantity}}"," {{level.discount.value}}{{percentsymbol}} {{sl9.data.settings.8.off}} "," {{level.discount.discounted_price.toCurrency}} "," {{level.discount.value.toCurrency}} {{sl9.data.settings.8.off}} "," <div>{{sl9.data.settings.8.free_ship}}</div> ",' {{ assign gproduct = products.{{{gid}}} }} <div><a href="javascript:;" class="tdf_gift_title tdfe" data-e="show_wholesale_free_gifts" data-q="{{level.quantity}}" data-id="{{offer.id}}" data-pid="{{gproduct.id}}"> {{gproduct.getTitle}} </a></div> ',' <div><a href="javascript:;" class="tdf_gift_title tdfe" data-e="show_wholesale_free_gifts" data-q="{{level.quantity}}" data-id="{{offer.id}}">...</a></div> ',' <td><button type="button" class="tdf_normal_btn tdfe" data-e="wholesale_adds">{{level.quantity_btn}}</button></td> '," {_ if 2 > g _}8{_ endif _} "," <tr><th>{{sl9.data.settings.8.wholesale_quantity}}</th><th> {_ if offer.display_price _}1{_ endif _} </th></tr> "," <td>{_ if offer.display_id == 1 _}2{_ endif _}{_ if ! offer.display_id _}3{_ endif _}</td> "," <div> {_ if level.discount.type_id == consta.DiscountTypePercent _}4{_ endif _} {_ if level.discount.origin_type_id == consta.DiscountTypePrice _}5{_ endif _} {_ if level.discount.origin_type_id == consta.DiscountTypeValue _}6{_ endif _} </div> "," {_ for g,gid in level.giftIDs _}11{_ endfor _} {_ if level.giftIDs.length > 2 _}9{_ endif _} ",' <div><a href="javascript:;" class="tdf_gift_title tdfe" data-e="show_wholesale_free_gifts" data-q="{{level.quantity}}" data-id="{{offer.id}}">+{{level.gifts.length}} {{sl9.data.settings.8.wholesale_gift}}</a></div> {_ if ! level.isSimple _}15{_ endif _} ',' <tr class="tdf_wholesale_level tdf_nonpopup" data-q="{{level.quantity}}"> {_ if offer.display_id != 2 _}13{_ endif _} <td> {_ if level.is_discount _}14{_ endif _} {_ if level.is_freeship _}7{_ endif _} {_ if level.gifts.length _}16{_ endif _} </td> {_ if offer.display_id == 2 _}10{_ endif _} </tr> ']},sl9.wholesale.promo={HandlePromo:function(t,e){var n,i,o,r,c,a=sl9.nfec.manager.cart.Get(),f=sl9.struct.consta.OfferTypeWholesale,l=sl9.manager.offer.List(f),_=sl9.manager.promo.Get(),u=new sl9.manager.gifter;u.init(_);var p=function(){var G=new sl9.model.promo_item;return G.offer_type_id=f,G.offer_id=i.id,G.app_id=sl9.struct.app.id,G.quantity=1,G},h=sl9.main.GetData("settings",sl9.struct.consta.SettingTypeOther,"discountable_no");t:for(var m=0;m<l.length;m++){n=[];var g=(i=l[m]).product_groups[0];switch(o=g.ids,i.apply_num){case 1:if(!(w=a.findVariantIDsByVIDs(o,g.vids)).length)continue t;n.push(w);break;case 2:if(!(w=a.findVariantIDsByVIDs(o,g.vids)).length)continue t;for(var v=0;v<w.length;v++)n.push([w[v]]);break;default:for(var y=0;y<o.length;y++){var w;(w=a.findVariantIDsByVIDs([o[y]],g.vids)).length&&n.push(w)}}for(v=0;v<n.length;v++){R=a.countByVIDs(n[v]);for(var T=!1,q=i.levels.length-1;0<=q;q--)if(!(R<(r=i.levels[q]).quantity)){r.is_freeship&&((k=p()).discount_type=sl9.nfec.consta.DiscountTypeFreeShip,t.addItem(k));for(var S=0;S<r.gifts.length;S++){var k=p();c=r.gifts[S],u.serve(f,i,k,c,r.vids)||t.addItem(k)}if(e&&!T){T=!0;var D=a.getTrackVariantIDs(n[v]);D=D.slice(0,r.quantity),sl9.common.track.AddAction(sl9.struct.consta.ActionTrackAdd,f,i.id,D.join("_"),a.token,1)}if(!r.is_discount)break;for(var I=[],C=a.findItemByVariantIDs(n[v]),O=0;O<C.length;O++){for(var P=C[O].product_id,R=0;R<C[O].quantity;R++)(k=p()).discount_type=r.discount.type_id,k.discount_value=r.discount.value,k.product_id=P,k.variant_id=C[O].variant_id,k.price=C[O].price,t.addItem(k);if(i.apply_num!=2&&I.indexOf(P)==-1&&!h){var A=new sl9.nfec.model.discountable;A.app_id=sl9.struct.app.id,A.discount_type=r.discount.type_id,A.discount_value=r.discount.value,A.offer_id=i.id,A.offer_type_id=f,A.product_id=P,A.vids=g.vids,sl9.nfec.manager.discountable.Set(P,A),I.push(P)}}break}}}}},sl9.main&&sl9.main.Init&&sl9.main.Init(),tdfEventHub.ListenToEvent("jsloaded_nfec",function(t,e){sl9.nfec=e(),sl9.nfec.util.tpl.AddSnippet("sl9.bundle.snippet_bundle_product",sl9.bundle.snippet_bundle_producthtm),sl9.nfec.util.tpl.AddSnippet("sl9.bundle.snippet_bundle_title",sl9.bundle.snippet_bundle_titlehtm),sl9.nfec.util.tpl.AddSnippet("sl9.dcode.snippet_coderemove",sl9.dcode.snippet_coderemovehtm),sl9.nfec.util.tpl.AddSnippet("sl9.dcode.snippet_invalidcode",sl9.dcode.snippet_invalidcodehtm),sl9.nfec.util.tpl.AddSnippet("sl9.common.snippet_discountable",sl9.common.snippet_discountablehtm),sl9.nfec.util.tpl.AddSnippet("sl9.common.snippet_cart_subtotal",sl9.common.snippet_cart_subtotalhtm),sl9.nfec.util.tpl.AddSnippet("sl9.common.snippet_discountable_gift",sl9.common.snippet_discountable_gifthtm),sl9.nfec.util.tpl.AddSnippet("sl9.common.snippet_price",sl9.common.snippet_pricehtm),sl9.nfec.util.tpl.AddSnippet("sl9.common.snippet_item_save",sl9.common.snippet_item_savehtm),sl9.nfec.util.tpl.AddSnippet("sl9.loyal.snippet_close",sl9.loyal.snippet_closehtm),sl9.nfec.util.tpl.AddSnippet("sl9.loyal.snippet_gift",sl9.loyal.snippet_gifthtm),sl9.nfec.util.tpl.AddSnippet("sl9.discount.snippet_codeadded",sl9.discount.snippet_codeaddedhtm),sl9.nfec.util.tpl.AddSnippet("sl9.discount.snippet_codebox",sl9.discount.snippet_codeboxhtm),sl9.nfec.util.tpl.AddSnippet("sl9.quickview.snippet_product",sl9.quickview.snippet_producthtm),sl9.nfec.util.tpl.AddSnippet("sl9.rec.snippet_bar_img",sl9.rec.snippet_bar_imghtm),sl9.nfec.util.tpl.AddSnippet("sl9.notify.snippet_cart_progress",sl9.notify.snippet_cart_progresshtm),sl9.nfec.util.tpl.AddSnippet("sl9.notify.snippet_cart_discounting",sl9.notify.snippet_cart_discountinghtm),sl9.nfec.util.tpl.AddSnippet("sl9.notify.snippet_cart_discountable",sl9.notify.snippet_cart_discountablehtm),sl9.nfec.util.tpl.AddSnippet("sl9.notify.snippet_discounted_gift",sl9.notify.snippet_discounted_gifthtm),sl9.nfec.util.tpl.AddSnippet("sl9.notify.snippet_product_discountable",sl9.notify.snippet_product_discountablehtm),sl9.nfec.util.tpl.AddSnippet("sl9.notify.snippet_product_discounted",sl9.notify.snippet_product_discountedhtm),sl9.nfec.util.tpl.AddSnippet("sl9.notify.snippet_product_discounting",sl9.notify.snippet_product_discountinghtm),sl9.nfec.util.tpl.AddSnippet("sl9.notify.snippet_product_titles",sl9.notify.snippet_product_titleshtm),sl9.nfec.util.tpl.AddSnippet("sl9.upsell.snippet_added_item",sl9.upsell.snippet_added_itemhtm),sl9.nfec.util.tpl.AddSnippet("sl9.upsell.snippet_last_offer",sl9.upsell.snippet_last_offerhtm)},!0),tdfEventHub.ListenToEvent("core_ready",function(){sl9.nfec.main.AddStyle('.tdf_theme_11 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_11 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_11 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_11 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_11 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_11 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_11 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_11 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_11 #tdf_quickview.tdf_container .tdf_dialog_header::before{background-image:url(S_PATH/fe/nfec/img/autumn1.png);margin-bottom:-10px}@media screen and (min-width: 768px){.tdf_theme_11 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_11 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_11 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_11 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_11 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_11 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_11 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_11 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_11 #tdf_quickview.tdf_container .tdf_dialog_header::before{margin-bottom:-15px}}.tdf_theme_4 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_4 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_4 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_4 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_4 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_4 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_4 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_4 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_4 #tdf_quickview.tdf_container .tdf_dialog_header::before{background-image:url(S_PATH/fe/nfec/img/blackfriday.png);margin-bottom:-10px}.tdf_theme_4 #tdf_notify.tdf_container .tdf_one_img .tdf_swiper_slide,.tdf_theme_4 #tdf_upsell.tdf_container .tdf_one_img .tdf_swiper_slide,.tdf_theme_4 #tdf_quickview.tdf_container .tdf_one_img .tdf_swiper_slide{background-color:#f2f3f5}@media screen and (min-width: 768px){.tdf_theme_4 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_4 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_4 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_4 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_4 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_4 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_4 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_4 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_4 #tdf_quickview.tdf_container .tdf_dialog_header::before{margin-bottom:-15px}.tdf_theme_4 #tdf_notify.tdf_container .tdf_one_img .tdf_swiper_slide,.tdf_theme_4 #tdf_upsell.tdf_container .tdf_one_img .tdf_swiper_slide,.tdf_theme_4 #tdf_quickview.tdf_container .tdf_one_img .tdf_swiper_slide{background-color:unset}}.tdf_theme_5 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_5 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_5 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_5 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_5 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_5 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_5 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_5 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_5 #tdf_quickview.tdf_container .tdf_dialog_header::before{background-image:url(S_PATH/fe/nfec/img/cybermonday.png);margin-bottom:-10px}@media screen and (min-width: 768px){.tdf_theme_5 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_5 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_5 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_5 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_5 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_5 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_5 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_5 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_5 #tdf_quickview.tdf_container .tdf_dialog_header::before{margin-bottom:-15px}}.tdf_theme_6 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_6 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_6 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_6 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_6 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_6 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_6 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_6 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_6 #tdf_quickview.tdf_container .tdf_dialog_header::before{background-image:url(S_PATH/fe/nfec/img/christmas.png)}.tdf_theme_6 #tdf_notify.tdf_container .tdf_bs_offer,.tdf_theme_6 #tdf_upsell.tdf_container .tdf_bs_offer,.tdf_theme_6 #tdf_quickview.tdf_container .tdf_bs_offer{border-top:2px solid #d4d6e4}@media screen and (min-width: 768px){.tdf_theme_6 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_6 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_6 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_6 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_6 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_6 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_6 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_6 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_6 #tdf_quickview.tdf_container .tdf_dialog_header::before{margin-bottom:-5px}}.tdf_theme_holiday #tdf_notify.tdf_container .tdf_quickview_title_holiday,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_quickview_title_holiday,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_quickview_title_holiday{display:block}.tdf_theme_holiday #tdf_notify.tdf_container .tdf_quickview_title_holiday,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_quickview_title_holiday,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_quickview_title_holiday{background:#f2f3f5}.tdf_theme_holiday #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_holiday #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_holiday #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_dialog_header::before{content:\'\';position:absolute;height:70px;width:80%;left:20%;background-size:contain;background-repeat:no-repeat;bottom:100%;pointer-events:none}.tdf_theme_holiday #tdf_notify.tdf_container .tdf_dialog_qv,.tdf_theme_holiday #tdf_notify.tdf_container .tdf_dialog_content,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_dialog_qv,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_dialog_content,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_dialog_qv,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_dialog_content{top:60px}.tdf_theme_holiday #tdf_notify.tdf_container .tdf_qv_product_content .tdf_qv_product_name,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_qv_product_content .tdf_qv_product_name,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_qv_product_content .tdf_qv_product_name{display:none}.tdf_theme_holiday #tdf_notify.tdf_container .tdf_quickview_title_holiday .tdf_qv_product_name,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_quickview_title_holiday .tdf_qv_product_name,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_quickview_title_holiday .tdf_qv_product_name{padding:20px 25px;color:#212B30}@media screen and (min-width: 768px){.tdf_theme_holiday #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_holiday #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_dialog_header::before{height:100px;width:50%;left:50%}.tdf_theme_holiday #tdf_notify.tdf_container .tdf_one_img .tdf_swiper_slide,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_one_img .tdf_swiper_slide,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_one_img .tdf_swiper_slide{background-color:unset}.tdf_theme_holiday #tdf_notify.tdf_container .tdf_quickview_title_holiday .tdf_qv_product_name,.tdf_theme_holiday #tdf_upsell.tdf_container .tdf_quickview_title_holiday .tdf_qv_product_name,.tdf_theme_holiday #tdf_quickview.tdf_container .tdf_quickview_title_holiday .tdf_qv_product_name{white-space:nowrap;text-overflow:ellipsis}}.tdf_theme_2 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_2 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_2 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_2 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_2 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_2 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_2 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_2 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_2 #tdf_quickview.tdf_container .tdf_dialog_header::before{background-image:url(S_PATH/fe/nfec/img/halloween1.png);margin-bottom:-10px}.tdf_theme_2 #tdf_notify.tdf_container .tdf_one_img .tdf_swiper_slide,.tdf_theme_2 #tdf_upsell.tdf_container .tdf_one_img .tdf_swiper_slide,.tdf_theme_2 #tdf_quickview.tdf_container .tdf_one_img .tdf_swiper_slide{background-color:#f2f3f5}@media screen and (min-width: 768px){.tdf_theme_2 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_2 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_2 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_2 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_2 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_2 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_2 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_2 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_2 #tdf_quickview.tdf_container .tdf_dialog_header::before{margin-bottom:-15px}.tdf_theme_2 #tdf_notify.tdf_container .tdf_one_img .tdf_swiper_slide,.tdf_theme_2 #tdf_upsell.tdf_container .tdf_one_img .tdf_swiper_slide,.tdf_theme_2 #tdf_quickview.tdf_container .tdf_one_img .tdf_swiper_slide{background-color:unset}}.tdf_theme_7 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_7 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_7 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_7 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_7 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_7 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_7 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_7 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_7 #tdf_quickview.tdf_container .tdf_dialog_header::before{background-image:url(S_PATH/fe/nfec/img/newyear.png);margin-bottom:-10px}@media screen and (min-width: 768px){.tdf_theme_7 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_7 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_7 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_7 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_7 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_7 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_7 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_7 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_7 #tdf_quickview.tdf_container .tdf_dialog_header::before{margin-bottom:-15px}}.tdf_theme_9 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_9 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_9 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_9 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_9 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_9 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_9 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_9 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_9 #tdf_quickview.tdf_container .tdf_dialog_header::before{background-image:url(S_PATH/fe/nfec/img/spring1.png);margin-bottom:-10px}.tdf_theme_9 #tdf_notify.tdf_container a.tdf_link_view_cart,.tdf_theme_9 #tdf_upsell.tdf_container a.tdf_link_view_cart,.tdf_theme_9 #tdf_quickview.tdf_container a.tdf_link_view_cart{color:#fffffe}@media screen and (min-width: 768px){.tdf_theme_9 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_9 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_9 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_9 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_9 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_9 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_9 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_9 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_9 #tdf_quickview.tdf_container .tdf_dialog_header::before{margin-bottom:-15px}}.tdf_theme_10 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_10 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_10 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_10 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_10 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_10 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_10 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_10 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_10 #tdf_quickview.tdf_container .tdf_dialog_header::before{background-image:url(S_PATH/fe/nfec/img/summer1.png);margin-bottom:-10px}@media screen and (min-width: 768px){.tdf_theme_10 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_10 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_10 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_10 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_10 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_10 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_10 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_10 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_10 #tdf_quickview.tdf_container .tdf_dialog_header::before{margin-bottom:-15px}}.tdf_theme_8 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_8 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_8 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_8 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_8 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_8 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_8 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_8 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_8 #tdf_quickview.tdf_container .tdf_dialog_header::before{background-image:url(S_PATH/fe/nfec/img/valentine.png);margin-bottom:-10px}@media screen and (min-width: 768px){.tdf_theme_8 #tdf_notify.tdf_container .tdf_dialog_footer::before,.tdf_theme_8 #tdf_notify.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_8 #tdf_notify.tdf_container .tdf_dialog_header::before,.tdf_theme_8 #tdf_upsell.tdf_container .tdf_dialog_footer::before,.tdf_theme_8 #tdf_upsell.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_8 #tdf_upsell.tdf_container .tdf_dialog_header::before,.tdf_theme_8 #tdf_quickview.tdf_container .tdf_dialog_footer::before,.tdf_theme_8 #tdf_quickview.tdf_container .tdf_quickview_title_holiday::before,.tdf_theme_8 #tdf_quickview.tdf_container .tdf_dialog_header::before{margin-bottom:-15px}}.tdf_bundle.tdf_container{width:100%;clear:both;padding-top:15px}.tdf_bundle.tdf_container hr{border-top:1px solid #212B35;opacity:.1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=10)";filter:alpha(opacity=10)}.tdf_bundle.tdf_container .tdf_vertical_name{cursor:pointer}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_plus_icon{position:absolute;z-index:2;margin-left:-10px;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;border-radius:50%;background-color:#fff;margin-top:50px}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product{width:192px;background-color:#fafbfd;margin-bottom:5px;position:relative;padding-bottom:24px}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product .tdf_bundle_item_bottom{position:absolute;bottom:0;width:100%}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product .tdf_vertical_title{text-align:center}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product .tdf_vertical_name{margin:5px 0}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product .tdf_checkbox_container{margin-top:0;margin-left:5px;float:left}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product .tdf_money.money{margin-right:5px;font-size:14px}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product .tdf_vertical_price{margin-top:0;text-align:right;display:block;padding-left:24px}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product .tdf_select_input{border:1px solid #f4f4f9}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_bundle_img{width:100%;height:120px}@media screen and (max-width: 768px){.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product{width:120px}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product .tdf_money.money{margin-right:0px;font-size:13px}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_vertical_product .tdf_checkbox_container{margin-left:0px}.tdf_bundle.tdf_container .tdf_bundle_style_1 .tdf_plus_icon{margin-left:-10px}}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_bundle_product_container{white-space:unset;font-size:0;text-align:left}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_bundle_product_item{width:50%;padding:1px}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_plus_icon{margin-top:50px}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_vertical_product{width:100%;background-color:#fafbfd;margin-bottom:5px;position:relative;padding-bottom:24px}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_vertical_product .tdf_bundle_item_bottom{position:absolute;bottom:0;width:100%}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_vertical_product .tdf_vertical_title{text-align:center}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_vertical_product .tdf_vertical_name{margin:5px 0}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_vertical_product .tdf_checkbox_container{margin-top:0;margin-left:5px;float:left}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_vertical_product .tdf_money.money{margin-right:5px;font-size:14px}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_vertical_product .tdf_vertical_price{margin-top:0;text-align:right;display:block;padding-left:24px}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_vertical_product .tdf_select_input{border:1px solid #f4f4f9}.tdf_bundle.tdf_container .tdf_bundle_style_5 .tdf_bundle_img{width:100%;height:120px}.tdf_bundle.tdf_container .tdf_bundle_style_6{max-width:1000px;margin:0 auto}.tdf_bundle.tdf_container .tdf_bundle_style_6.tdf_bundle_content{padding-left:10px}.tdf_bundle.tdf_container .tdf_bundle_style_6 .tdf_bundle_product{width:auto;margin-right:10px}.tdf_bundle.tdf_container .tdf_bundle_style_6 .tdf_bundle_product,.tdf_bundle.tdf_container .tdf_bundle_style_6 .tdf_bundle_left{display:inline-block;vertical-align:top}.tdf_bundle.tdf_container .tdf_bundle_style_6 h2{font-size:24px}.tdf_bundle.tdf_container .tdf_bundle_style_6 .tdf_bundle_title h4{font-size:18px;display:inline;font-weight:600}.tdf_bundle.tdf_container .tdf_bundle_style_6 .tdf_bundle_title .tdf_bundle_product_item{display:block;clear:both;margin-top:8px;padding-left:22px;position:relative}.tdf_bundle.tdf_container .tdf_bundle_style_6 .tdf_bundle_title .tdf_bundle_product_item .tdf_vertical_product{text-align:left}.tdf_bundle.tdf_container .tdf_bundle_style_6 .tdf_bundle_title .tdf_bundle_product_item .tdf_checkbox_container{position:absolute;top:-3px;left:0}.tdf_bundle.tdf_container .tdf_bundle_style_6 .tdf_bundle_title .tdf_bundle_product_item .tdf_vertical_product>span{text-align:left;vertical-align:middle;margin-right:4px;height:36px;line-height:36px}.tdf_bundle.tdf_container .tdf_bundle_style_6 .tdf_bundle_title .tdf_select_input{width:auto;background-image:url(S_PATH/fe/nfec/img/icon-select.png);background-repeat:no-repeat;background-position:right 0px center}.tdf_bundle.tdf_container .tdf_bundle_style_6 .tdf_current_item{cursor:text}.tdf_bundle.tdf_container .tdf_bundle_content{overflow:hidden;padding:15px 0;width:100%}.tdf_bundle.tdf_container .tdf_bundle_message{margin-bottom:15px}.tdf_bundle.tdf_container .tdf_bundle_message a{color:#4267b3}.tdf_bundle.tdf_container .tdf_bundle_product{overflow:hidden;width:100%}.tdf_bundle.tdf_container .tdf_bundle_product_container{overflow:auto;white-space:nowrap;width:100%;position:relative;float:left;overflow-y:hidden}.tdf_bundle.tdf_container .tdf_bundle_product_container.tdf_hover_scroll{overflow:hidden}.tdf_bundle.tdf_container .tdf_bundle_content:hover .tdf_bundle_product_container.tdf_hover_scroll{overflow:auto}.tdf_bundle.tdf_container .tdf_bundle_product_item{vertical-align:top;position:relative;min-height:1px;display:inline-block}.tdf_bundle.tdf_container .tdf_bundle_img{width:96px;height:96px;margin:0;position:relative;cursor:pointer;background-position:center;background-repeat:no-repeat;background-size:contain;background-color:#fafbfd;display:block}.tdf_bundle.tdf_container .tdf_bundle_more_option{position:relative;text-align:right;margin-top:5px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:75px}.tdf_bundle.tdf_container .tdf_bundle_more_option a{white-space:nowrap;color:#4267b3}.tdf_bundle.tdf_container .tdf_plus_icon{content:"";background-image:url(S_PATH/fe/nfec/img/plusboldx64.png);display:inline-block;height:15px;width:15px;margin-top:40px;background-position:center;background-size:cover}.tdf_bundle.tdf_container .tdf_bundle_price{position:relative;margin-left:4px}.tdf_bundle.tdf_container .tdf_bundle_price div{line-height:25px}.tdf_bundle.tdf_container .tdf_bundle_content button{width:auto;margin-top:5px;margin-left:4px}#tdf_currency.tdf_container{position:fixed;top:80px;right:10px;overflow-y:auto;overflow-x:hidden;max-height:400px;-webkit-box-shadow:0 2px 12px #c4c6d5;-moz-box-shadow:0 2px 12px #c4c6d5;box-shadow:0 2px 12px #c4c6d5;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;z-index:9999}#tdf_currency.tdf_container.tdf_sticky{top:10px}#tdf_currency.tdf_container .tdf_currency_container{position:relative}#tdf_currency.tdf_container .tdf_currency_item{background:#fff;display:block;height:40px;padding:10px 8px 10px 5px;line-height:20px}#tdf_currency.tdf_container .tdf_currency_item img{width:20px;height:20px;float:left;margin-right:10px;-webkit-border-radius:20px;-moz-border-radius:20px;-ms-border-radius:20px;border-radius:20px}#tdf_currency.tdf_container .tdf_currency_item .tdf_currency_code{display:none}#tdf_currency.tdf_container .tdf_currency_selected .tdf_currency_item:after{display:inline-block;position:absolute;top:0;right:3px;width:15px;height:39px;background-position:50%;background-size:11px;background-image:url(data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI4NC45IDI4NC45Ij48cGF0aCBkPSJNMjgyIDc2LjVsLTE0LjItMTQuM2E5IDkgMCAwIDAtMTMuMSAwTDE0Mi41IDE3NC40IDMwLjMgNjIuMmE5IDkgMCAwIDAtMTMuMiAwTDMgNzYuNWE5IDkgMCAwIDAgMCAxMy4xbDEzMyAxMzNhOSA5IDAgMCAwIDEzLjEgMGwxMzMtMTMzYTkgOSAwIDAgMCAwLTEzeiIvPjwvc3ZnPg==);background-repeat:no-repeat;line-height:37px;content:"";transform:rotate(-90deg)}#tdf_currency.tdf_container .tdf_currency_item:hover{background-color:#f2f2f2}@media screen and (min-width: 768px){#tdf_currency.tdf_container .tdf_currency_container{max-height:600px}#tdf_currency.tdf_container .tdf_currency_item{padding:10px 30px 10px 10px}#tdf_currency.tdf_container .tdf_currency_item .tdf_currency_code{display:inline}#tdf_currency.tdf_container .tdf_currency_selected .tdf_currency_item:after{right:10px}}.tdf-product-page form .shopify-payment-button{cursor:pointer}.tdf-product-page form .shopify-payment-button>div{pointer-events:none}.paypalLightBoxy,.allLightBoxy{display:none}.additional-checkout-buttons.tdf_discount_ck_btn{cursor:pointer}.additional-checkout-buttons.tdf_discount_ck_btn>div,.additional-checkout-buttons.tdf_discount_ck_btn>button,.additional-checkout-buttons.tdf_discount_ck_btn>a{pointer-events:none}.additional-checkout-buttons.tdf_discount_ck_btn .paypalLightBoxy,.additional-checkout-buttons.tdf_discount_ck_btn .allLightBoxy{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.additional-checkout-buttons.tdf_discount_ck_btn .paypalLightBoxy{max-width:750px;max-height:60px}#satcb_checkout_btn{pointer-events:none}#tdf_wholesale.tdf_container .tdf_discountable_product,#tdf_modal.tdf_container .tdf_discountable_product,#tdf_sale_widget.tdf_container .tdf_discountable_product,.tdf_bundle.tdf_container .tdf_discountable_product,#tdf_notify.tdf_container .tdf_discountable_product,#tdf_upsell.tdf_container .tdf_discountable_product,#tdf_discount_widget.tdf_container .tdf_discountable_product,#tdf_quickview.tdf_container .tdf_discountable_product,#tdf_discount_box.tdf_container .tdf_discountable_product{display:inline-block;position:relative}#tdf_wholesale.tdf_container .tdf_gift_title,#tdf_modal.tdf_container .tdf_gift_title,#tdf_sale_widget.tdf_container .tdf_gift_title,.tdf_bundle.tdf_container .tdf_gift_title,#tdf_notify.tdf_container .tdf_gift_title,#tdf_upsell.tdf_container .tdf_gift_title,#tdf_discount_widget.tdf_container .tdf_gift_title,#tdf_quickview.tdf_container .tdf_gift_title,#tdf_discount_box.tdf_container .tdf_gift_title{position:relative;overflow:hidden;display:inline;text-decoration:none}#tdf_wholesale.tdf_container .tdf_discount_icon,#tdf_modal.tdf_container .tdf_discount_icon,#tdf_sale_widget.tdf_container .tdf_discount_icon,.tdf_bundle.tdf_container .tdf_discount_icon,#tdf_notify.tdf_container .tdf_discount_icon,#tdf_upsell.tdf_container .tdf_discount_icon,#tdf_discount_widget.tdf_container .tdf_discount_icon,#tdf_quickview.tdf_container .tdf_discount_icon,#tdf_discount_box.tdf_container .tdf_discount_icon{width:50px;height:50px;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;border-radius:50%;display:block;background-position:center;position:absolute;background-repeat:no-repeat}#tdf_wholesale.tdf_container .tdf_discount_icon_0,#tdf_modal.tdf_container .tdf_discount_icon_0,#tdf_sale_widget.tdf_container .tdf_discount_icon_0,.tdf_bundle.tdf_container .tdf_discount_icon_0,#tdf_notify.tdf_container .tdf_discount_icon_0,#tdf_upsell.tdf_container .tdf_discount_icon_0,#tdf_discount_widget.tdf_container .tdf_discount_icon_0,#tdf_quickview.tdf_container .tdf_discount_icon_0,#tdf_discount_box.tdf_container .tdf_discount_icon_0{background-color:#fafbfd;background-size:contain}#tdf_wholesale.tdf_container .tdf_discount_icon_1,#tdf_wholesale.tdf_container .tdf_discount_icon_2,#tdf_modal.tdf_container .tdf_discount_icon_1,#tdf_modal.tdf_container .tdf_discount_icon_2,#tdf_sale_widget.tdf_container .tdf_discount_icon_1,#tdf_sale_widget.tdf_container .tdf_discount_icon_2,.tdf_bundle.tdf_container .tdf_discount_icon_1,.tdf_bundle.tdf_container .tdf_discount_icon_2,#tdf_notify.tdf_container .tdf_discount_icon_1,#tdf_notify.tdf_container .tdf_discount_icon_2,#tdf_upsell.tdf_container .tdf_discount_icon_1,#tdf_upsell.tdf_container .tdf_discount_icon_2,#tdf_discount_widget.tdf_container .tdf_discount_icon_1,#tdf_discount_widget.tdf_container .tdf_discount_icon_2,#tdf_quickview.tdf_container .tdf_discount_icon_1,#tdf_quickview.tdf_container .tdf_discount_icon_2,#tdf_discount_box.tdf_container .tdf_discount_icon_1,#tdf_discount_box.tdf_container .tdf_discount_icon_2{background-image:url(S_PATH/fe/nfec/img/discount.png);background-size:36px}#tdf_wholesale.tdf_container .tdf_discount_icon_4,#tdf_modal.tdf_container .tdf_discount_icon_4,#tdf_sale_widget.tdf_container .tdf_discount_icon_4,.tdf_bundle.tdf_container .tdf_discount_icon_4,#tdf_notify.tdf_container .tdf_discount_icon_4,#tdf_upsell.tdf_container .tdf_discount_icon_4,#tdf_discount_widget.tdf_container .tdf_discount_icon_4,#tdf_quickview.tdf_container .tdf_discount_icon_4,#tdf_discount_box.tdf_container .tdf_discount_icon_4{background-image:url(S_PATH/fe/nfec/img/gift_icon.png);background-size:28px}#tdf_wholesale.tdf_container .tdf_discount_icon_3,#tdf_modal.tdf_container .tdf_discount_icon_3,#tdf_sale_widget.tdf_container .tdf_discount_icon_3,.tdf_bundle.tdf_container .tdf_discount_icon_3,#tdf_notify.tdf_container .tdf_discount_icon_3,#tdf_upsell.tdf_container .tdf_discount_icon_3,#tdf_discount_widget.tdf_container .tdf_discount_icon_3,#tdf_quickview.tdf_container .tdf_discount_icon_3,#tdf_discount_box.tdf_container .tdf_discount_icon_3{background-image:url(S_PATH/fe/nfec/img/freeship_1.png);background-size:36px}#tdf_wholesale.tdf_container .tdf_discount_icon_6,#tdf_modal.tdf_container .tdf_discount_icon_6,#tdf_sale_widget.tdf_container .tdf_discount_icon_6,.tdf_bundle.tdf_container .tdf_discount_icon_6,#tdf_notify.tdf_container .tdf_discount_icon_6,#tdf_upsell.tdf_container .tdf_discount_icon_6,#tdf_discount_widget.tdf_container .tdf_discount_icon_6,#tdf_quickview.tdf_container .tdf_discount_icon_6,#tdf_discount_box.tdf_container .tdf_discount_icon_6{background-image:url(S_PATH/fe/nfec/img/coupon2.png);background-size:34px}#tdf_wholesale.tdf_container .tdf_discount_icon.tdf_discount_icon_9,#tdf_modal.tdf_container .tdf_discount_icon.tdf_discount_icon_9,#tdf_sale_widget.tdf_container .tdf_discount_icon.tdf_discount_icon_9,.tdf_bundle.tdf_container .tdf_discount_icon.tdf_discount_icon_9,#tdf_notify.tdf_container .tdf_discount_icon.tdf_discount_icon_9,#tdf_upsell.tdf_container .tdf_discount_icon.tdf_discount_icon_9,#tdf_discount_widget.tdf_container .tdf_discount_icon.tdf_discount_icon_9,#tdf_quickview.tdf_container .tdf_discount_icon.tdf_discount_icon_9,#tdf_discount_box.tdf_container .tdf_discount_icon.tdf_discount_icon_9{background-image:url(S_PATH/fe/nfec/img/loyalty-icon-w.png);background-size:34px;background-position:8px 10px}#tdf_wholesale.tdf_container br.tdf_auto_br,#tdf_modal.tdf_container br.tdf_auto_br,#tdf_sale_widget.tdf_container br.tdf_auto_br,.tdf_bundle.tdf_container br.tdf_auto_br,#tdf_notify.tdf_container br.tdf_auto_br,#tdf_upsell.tdf_container br.tdf_auto_br,#tdf_discount_widget.tdf_container br.tdf_auto_br,#tdf_quickview.tdf_container br.tdf_auto_br,#tdf_discount_box.tdf_container br.tdf_auto_br{line-height:0}#tdf_wholesale.tdf_container .tdf_discount_content,#tdf_modal.tdf_container .tdf_discount_content,#tdf_sale_widget.tdf_container .tdf_discount_content,.tdf_bundle.tdf_container .tdf_discount_content,#tdf_notify.tdf_container .tdf_discount_content,#tdf_upsell.tdf_container .tdf_discount_content,#tdf_discount_widget.tdf_container .tdf_discount_content,#tdf_quickview.tdf_container .tdf_discount_content,#tdf_discount_box.tdf_container .tdf_discount_content{text-align:left;display:inline-block;padding-left:56px;min-height:50px;line-height:22px;margin-bottom:10px;max-width:250px}#tdf_wholesale.tdf_container .tdf_discount_content br.tdf_auto_br,#tdf_modal.tdf_container .tdf_discount_content br.tdf_auto_br,#tdf_sale_widget.tdf_container .tdf_discount_content br.tdf_auto_br,.tdf_bundle.tdf_container .tdf_discount_content br.tdf_auto_br,#tdf_notify.tdf_container .tdf_discount_content br.tdf_auto_br,#tdf_upsell.tdf_container .tdf_discount_content br.tdf_auto_br,#tdf_discount_widget.tdf_container .tdf_discount_content br.tdf_auto_br,#tdf_quickview.tdf_container .tdf_discount_content br.tdf_auto_br,#tdf_discount_box.tdf_container .tdf_discount_content br.tdf_auto_br{display:none}#tdf_wholesale.tdf_container .tdf_discount_text,#tdf_modal.tdf_container .tdf_discount_text,#tdf_sale_widget.tdf_container .tdf_discount_text,.tdf_bundle.tdf_container .tdf_discount_text,#tdf_notify.tdf_container .tdf_discount_text,#tdf_upsell.tdf_container .tdf_discount_text,#tdf_discount_widget.tdf_container .tdf_discount_text,#tdf_quickview.tdf_container .tdf_discount_text,#tdf_discount_box.tdf_container .tdf_discount_text{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:25px}#tdf_wholesale.tdf_container .tdf_discount_tag_freeship,#tdf_modal.tdf_container .tdf_discount_tag_freeship,#tdf_sale_widget.tdf_container .tdf_discount_tag_freeship,.tdf_bundle.tdf_container .tdf_discount_tag_freeship,#tdf_notify.tdf_container .tdf_discount_tag_freeship,#tdf_upsell.tdf_container .tdf_discount_tag_freeship,#tdf_discount_widget.tdf_container .tdf_discount_tag_freeship,#tdf_quickview.tdf_container .tdf_discount_tag_freeship,#tdf_discount_box.tdf_container .tdf_discount_tag_freeship{position:relative}#tdf_wholesale.tdf_container .tdf_discount_tag_freeship,#tdf_wholesale.tdf_container .tdf_discount_tag,#tdf_modal.tdf_container .tdf_discount_tag_freeship,#tdf_modal.tdf_container .tdf_discount_tag,#tdf_sale_widget.tdf_container .tdf_discount_tag_freeship,#tdf_sale_widget.tdf_container .tdf_discount_tag,.tdf_bundle.tdf_container .tdf_discount_tag_freeship,.tdf_bundle.tdf_container .tdf_discount_tag,#tdf_notify.tdf_container .tdf_discount_tag_freeship,#tdf_notify.tdf_container .tdf_discount_tag,#tdf_upsell.tdf_container .tdf_discount_tag_freeship,#tdf_upsell.tdf_container .tdf_discount_tag,#tdf_discount_widget.tdf_container .tdf_discount_tag_freeship,#tdf_discount_widget.tdf_container .tdf_discount_tag,#tdf_quickview.tdf_container .tdf_discount_tag_freeship,#tdf_quickview.tdf_container .tdf_discount_tag,#tdf_discount_box.tdf_container .tdf_discount_tag_freeship,#tdf_discount_box.tdf_container .tdf_discount_tag{font-weight:500;line-height:25px}#tdf_wholesale.tdf_container .tdf_motivator_container .tdf_money.money,#tdf_wholesale.tdf_container .tdf_motivator_container .tdf_discount_tag,#tdf_modal.tdf_container .tdf_motivator_container .tdf_money.money,#tdf_modal.tdf_container .tdf_motivator_container .tdf_discount_tag,#tdf_sale_widget.tdf_container .tdf_motivator_container .tdf_money.money,#tdf_sale_widget.tdf_container .tdf_motivator_container .tdf_discount_tag,.tdf_bundle.tdf_container .tdf_motivator_container .tdf_money.money,.tdf_bundle.tdf_container .tdf_motivator_container .tdf_discount_tag,#tdf_notify.tdf_container .tdf_motivator_container .tdf_money.money,#tdf_notify.tdf_container .tdf_motivator_container .tdf_discount_tag,#tdf_upsell.tdf_container .tdf_motivator_container .tdf_money.money,#tdf_upsell.tdf_container .tdf_motivator_container .tdf_discount_tag,#tdf_discount_widget.tdf_container .tdf_motivator_container .tdf_money.money,#tdf_discount_widget.tdf_container .tdf_motivator_container .tdf_discount_tag,#tdf_quickview.tdf_container .tdf_motivator_container .tdf_money.money,#tdf_quickview.tdf_container .tdf_motivator_container .tdf_discount_tag,#tdf_discount_box.tdf_container .tdf_motivator_container .tdf_money.money,#tdf_discount_box.tdf_container .tdf_motivator_container .tdf_discount_tag{font-size:unset}#tdf_wholesale.tdf_container .tdf_discounting_dcode .tdf_discount_content,#tdf_wholesale.tdf_container .tdf_discounted_dcode .tdf_discount_content,#tdf_modal.tdf_container .tdf_discounting_dcode .tdf_discount_content,#tdf_modal.tdf_container .tdf_discounted_dcode .tdf_discount_content,#tdf_sale_widget.tdf_container .tdf_discounting_dcode .tdf_discount_content,#tdf_sale_widget.tdf_container .tdf_discounted_dcode .tdf_discount_content,.tdf_bundle.tdf_container .tdf_discounting_dcode .tdf_discount_content,.tdf_bundle.tdf_container .tdf_discounted_dcode .tdf_discount_content,#tdf_notify.tdf_container .tdf_discounting_dcode .tdf_discount_content,#tdf_notify.tdf_container .tdf_discounted_dcode .tdf_discount_content,#tdf_upsell.tdf_container .tdf_discounting_dcode .tdf_discount_content,#tdf_upsell.tdf_container .tdf_discounted_dcode .tdf_discount_content,#tdf_discount_widget.tdf_container .tdf_discounting_dcode .tdf_discount_content,#tdf_discount_widget.tdf_container .tdf_discounted_dcode .tdf_discount_content,#tdf_quickview.tdf_container .tdf_discounting_dcode .tdf_discount_content,#tdf_quickview.tdf_container .tdf_discounted_dcode .tdf_discount_content,#tdf_discount_box.tdf_container .tdf_discounting_dcode .tdf_discount_content,#tdf_discount_box.tdf_container .tdf_discounted_dcode .tdf_discount_content{position:relative;font-size:20px}#tdf_wholesale.tdf_container .dcode_remove_btn,#tdf_modal.tdf_container .dcode_remove_btn,#tdf_sale_widget.tdf_container .dcode_remove_btn,.tdf_bundle.tdf_container .dcode_remove_btn,#tdf_notify.tdf_container .dcode_remove_btn,#tdf_upsell.tdf_container .dcode_remove_btn,#tdf_discount_widget.tdf_container .dcode_remove_btn,#tdf_quickview.tdf_container .dcode_remove_btn,#tdf_discount_box.tdf_container .dcode_remove_btn{opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);cursor:pointer}#tdf_wholesale.tdf_container .dcode_remove_btn:hover,#tdf_modal.tdf_container .dcode_remove_btn:hover,#tdf_sale_widget.tdf_container .dcode_remove_btn:hover,.tdf_bundle.tdf_container .dcode_remove_btn:hover,#tdf_notify.tdf_container .dcode_remove_btn:hover,#tdf_upsell.tdf_container .dcode_remove_btn:hover,#tdf_discount_widget.tdf_container .dcode_remove_btn:hover,#tdf_quickview.tdf_container .dcode_remove_btn:hover,#tdf_discount_box.tdf_container .dcode_remove_btn:hover{opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}#tdf_wholesale.tdf_container .tdf_nonpopup .tdf_discount_icon,#tdf_modal.tdf_container .tdf_nonpopup .tdf_discount_icon,#tdf_sale_widget.tdf_container .tdf_nonpopup .tdf_discount_icon,.tdf_bundle.tdf_container .tdf_nonpopup .tdf_discount_icon,#tdf_notify.tdf_container .tdf_nonpopup .tdf_discount_icon,#tdf_upsell.tdf_container .tdf_nonpopup .tdf_discount_icon,#tdf_discount_widget.tdf_container .tdf_nonpopup .tdf_discount_icon,#tdf_quickview.tdf_container .tdf_nonpopup .tdf_discount_icon,#tdf_discount_box.tdf_container .tdf_nonpopup .tdf_discount_icon{background-color:#BF0712}#tdf_wholesale.tdf_container .tdf_nonpopup .tdf_discount_icon_0,#tdf_modal.tdf_container .tdf_nonpopup .tdf_discount_icon_0,#tdf_sale_widget.tdf_container .tdf_nonpopup .tdf_discount_icon_0,.tdf_bundle.tdf_container .tdf_nonpopup .tdf_discount_icon_0,#tdf_notify.tdf_container .tdf_nonpopup .tdf_discount_icon_0,#tdf_upsell.tdf_container .tdf_nonpopup .tdf_discount_icon_0,#tdf_discount_widget.tdf_container .tdf_nonpopup .tdf_discount_icon_0,#tdf_quickview.tdf_container .tdf_nonpopup .tdf_discount_icon_0,#tdf_discount_box.tdf_container .tdf_nonpopup .tdf_discount_icon_0{background-color:#fafbfd}#tdf_wholesale.tdf_container .tdf_nonpopup .tdf_gift_title,#tdf_modal.tdf_container .tdf_nonpopup .tdf_gift_title,#tdf_sale_widget.tdf_container .tdf_nonpopup .tdf_gift_title,.tdf_bundle.tdf_container .tdf_nonpopup .tdf_gift_title,#tdf_notify.tdf_container .tdf_nonpopup .tdf_gift_title,#tdf_upsell.tdf_container .tdf_nonpopup .tdf_gift_title,#tdf_discount_widget.tdf_container .tdf_nonpopup .tdf_gift_title,#tdf_quickview.tdf_container .tdf_nonpopup .tdf_gift_title,#tdf_discount_box.tdf_container .tdf_nonpopup .tdf_gift_title{color:#4267b3}#tdf_wholesale.tdf_container .tdf_nonpopup .tdf_product_title,#tdf_modal.tdf_container .tdf_nonpopup .tdf_product_title,#tdf_sale_widget.tdf_container .tdf_nonpopup .tdf_product_title,.tdf_bundle.tdf_container .tdf_nonpopup .tdf_product_title,#tdf_notify.tdf_container .tdf_nonpopup .tdf_product_title,#tdf_upsell.tdf_container .tdf_nonpopup .tdf_product_title,#tdf_discount_widget.tdf_container .tdf_nonpopup .tdf_product_title,#tdf_quickview.tdf_container .tdf_nonpopup .tdf_product_title,#tdf_discount_box.tdf_container .tdf_nonpopup .tdf_product_title{display:none}#tdf_wholesale.tdf_container .tdf_nonpopup .tdf_discount_content br.tdf_auto_br,#tdf_modal.tdf_container .tdf_nonpopup .tdf_discount_content br.tdf_auto_br,#tdf_sale_widget.tdf_container .tdf_nonpopup .tdf_discount_content br.tdf_auto_br,.tdf_bundle.tdf_container .tdf_nonpopup .tdf_discount_content br.tdf_auto_br,#tdf_notify.tdf_container .tdf_nonpopup .tdf_discount_content br.tdf_auto_br,#tdf_upsell.tdf_container .tdf_nonpopup .tdf_discount_content br.tdf_auto_br,#tdf_discount_widget.tdf_container .tdf_nonpopup .tdf_discount_content br.tdf_auto_br,#tdf_quickview.tdf_container .tdf_nonpopup .tdf_discount_content br.tdf_auto_br,#tdf_discount_box.tdf_container .tdf_nonpopup .tdf_discount_content br.tdf_auto_br{display:block}#tdf_wholesale.tdf_container .tdf_discounted_product,#tdf_modal.tdf_container .tdf_discounted_product,#tdf_sale_widget.tdf_container .tdf_discounted_product,.tdf_bundle.tdf_container .tdf_discounted_product,#tdf_notify.tdf_container .tdf_discounted_product,#tdf_upsell.tdf_container .tdf_discounted_product,#tdf_discount_widget.tdf_container .tdf_discounted_product,#tdf_quickview.tdf_container .tdf_discounted_product,#tdf_discount_box.tdf_container .tdf_discounted_product{position:relative}@media screen and (min-width: 413px){#tdf_wholesale.tdf_container .tdf_discount_content,#tdf_modal.tdf_container .tdf_discount_content,#tdf_sale_widget.tdf_container .tdf_discount_content,.tdf_bundle.tdf_container .tdf_discount_content,#tdf_notify.tdf_container .tdf_discount_content,#tdf_upsell.tdf_container .tdf_discount_content,#tdf_discount_widget.tdf_container .tdf_discount_content,#tdf_quickview.tdf_container .tdf_discount_content,#tdf_discount_box.tdf_container .tdf_discount_content{max-width:360px}}@media screen and (min-width: 374px){#tdf_wholesale.tdf_container .tdf_discount_content,#tdf_modal.tdf_container .tdf_discount_content,#tdf_sale_widget.tdf_container .tdf_discount_content,.tdf_bundle.tdf_container .tdf_discount_content,#tdf_notify.tdf_container .tdf_discount_content,#tdf_upsell.tdf_container .tdf_discount_content,#tdf_discount_widget.tdf_container .tdf_discount_content,#tdf_quickview.tdf_container .tdf_discount_content,#tdf_discount_box.tdf_container .tdf_discount_content{max-width:330px}}#tdf_modal.tdf_container .tdf_gift_title,#tdf_notify.tdf_container .tdf_gift_title,#tdf_upsell.tdf_container .tdf_gift_title,#tdf_quickview.tdf_container .tdf_gift_title{color:#4267b2}#tdf_modal.tdf_container .tdf_discount_icon,#tdf_notify.tdf_container .tdf_discount_icon,#tdf_upsell.tdf_container .tdf_discount_icon,#tdf_quickview.tdf_container .tdf_discount_icon{background-color:#BF0711}#tdf_modal.tdf_container .tdf_discount_tag_freeship,#tdf_modal.tdf_container .tdf_discount_tag,#tdf_notify.tdf_container .tdf_discount_tag_freeship,#tdf_notify.tdf_container .tdf_discount_tag,#tdf_upsell.tdf_container .tdf_discount_tag_freeship,#tdf_upsell.tdf_container .tdf_discount_tag,#tdf_quickview.tdf_container .tdf_discount_tag_freeship,#tdf_quickview.tdf_container .tdf_discount_tag{color:#000002}#tdf_wholesale.tdf_container .tdf_gift_title,#tdf_sale_widget.tdf_container .tdf_gift_title,.tdf_bundle.tdf_container .tdf_gift_title,#tdf_discount_widget.tdf_container .tdf_gift_title{color:#4267b3}#tdf_wholesale.tdf_container .tdf_discount_icon,#tdf_sale_widget.tdf_container .tdf_discount_icon,.tdf_bundle.tdf_container .tdf_discount_icon,#tdf_discount_widget.tdf_container .tdf_discount_icon{background-color:#BF0712}#tdf_wholesale.tdf_container .tdf_discount_tag_freeship,#tdf_wholesale.tdf_container .tdf_discount_tag,#tdf_sale_widget.tdf_container .tdf_discount_tag_freeship,#tdf_sale_widget.tdf_container .tdf_discount_tag,.tdf_bundle.tdf_container .tdf_discount_tag_freeship,.tdf_bundle.tdf_container .tdf_discount_tag,#tdf_discount_widget.tdf_container .tdf_discount_tag_freeship,#tdf_discount_widget.tdf_container .tdf_discount_tag{color:#000001}.tdf-cart-item-p,.tdf-cart-item-lp{display:none}.tdf_price_save{display:block;color:#BF0712}.tdf_price_normal .tdf_money{font-weight:bold}.tdf_price_original .tdf_money{text-decoration:line-through !important}.tdf_price_original .tdf_money2{text-decoration:line-through !important}#tdf_upsell.tdf_container .tdf_discount_content br.tdf_auto_br{display:block}#tdf_upsell.tdf_container .tdf_product_title{display:none}#tdf_upsell.tdf_container .tdf_discountable_product{width:100%}@media screen and (max-width: 768px){#tdf_upsell.tdf_container .tdf_bs_offer_product .tdf_discount_icon{width:30px;height:30px;margin-top:5px}#tdf_upsell.tdf_container .tdf_bs_offer_product .tdf_discount_icon_4,#tdf_upsell.tdf_container .tdf_bs_offer_product .tdf_discount_icon_3{background-size:18px}#tdf_upsell.tdf_container .tdf_bs_offer_product .tdf_discount_content{padding-left:32px;width:90%}#tdf_upsell.tdf_container .tdf_bs_offer_product .tdf_discount_tag{font-size:13px}}#tdf_quickview.tdf_container .tdf_discount_content br.tdf_auto_br{display:block}#tdf_quickview.tdf_container .tdf_discountable_product{text-align:left}#tdf_quickview.tdf_container .tdf_product_title{display:none}#tdf_sale_widget.tdf_container,#tdf_discount_widget.tdf_container{width:100%;clear:both}.tdf_notify_opening #tdf_discount_widget.tdf_container{display:none}#tdf_discount_widget.tdf_container .tdf_motivator .tdf_gift{max-width:440px;margin:auto}.tdf_ribbon,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_ribbon,#tdf_quickview.tdf_container .tdf_ribbon{position:absolute;left:-5px;top:-5px;z-index:12;overflow:hidden;text-align:right}.tdf_ribbon span.tdf_ribbon_span,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_ribbon span.tdf_ribbon_span,#tdf_quickview.tdf_container .tdf_ribbon span.tdf_ribbon_span{font-weight:bold;color:#FFF;text-align:center;-moz-transform:rotate(-45deg);-o-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-webkit-transform:rotate(-45deg);transform:rotate(-45deg);width:100px;display:block;background:#BF0712;-webkit-box-shadow:inset 0 3px 10px -5px;-moz-box-shadow:inset 0 3px 10px -5px;box-shadow:inset 0 3px 10px -5px;position:absolute}.tdf_ribbon span.tdf_ribbon_span .tdf_money.money,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_ribbon span.tdf_ribbon_span .tdf_money.money,#tdf_quickview.tdf_container .tdf_ribbon span.tdf_ribbon_span .tdf_money.money{color:#fffffe;position:initial}.tdf_ribbon span.tdf_ribbon_span::before,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_ribbon span.tdf_ribbon_span::before,#tdf_quickview.tdf_container .tdf_ribbon span.tdf_ribbon_span::before{content:"";position:absolute;left:0px;top:100%;border-left:3px solid #BF0712;border-right:3px solid transparent;border-bottom:3px solid transparent;border-top:3px solid #BF0712}.tdf_ribbon span.tdf_ribbon_span::after,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_ribbon span.tdf_ribbon_span::after,#tdf_quickview.tdf_container .tdf_ribbon span.tdf_ribbon_span::after{content:"";position:absolute;right:0px;top:100%;border-left:3px solid transparent;border-right:3px solid #BF0712;border-bottom:3px solid transparent;border-top:3px solid #BF0712}.tdf_ribbon.tdf_ribbon_right,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_ribbon.tdf_ribbon_right,#tdf_quickview.tdf_container .tdf_ribbon.tdf_ribbon_right{right:-5px;top:-5px;left:initial}.tdf_ribbon.tdf_ribbon_right span.tdf_ribbon_span,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_ribbon.tdf_ribbon_right span.tdf_ribbon_span,#tdf_quickview.tdf_container .tdf_ribbon.tdf_ribbon_right span.tdf_ribbon_span{transform:rotate(45deg);-webkit-transform:rotate(45deg)}.tdf_label_v,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_label_v,#tdf_quickview.tdf_container .tdf_label_v{position:absolute;z-index:12;background:#BF0712;display:block;padding:3px;-webkit-border-radius:1px;-moz-border-radius:1px;-ms-border-radius:1px;border-radius:1px}.tdf_label_v span.tdf_ribbon_span,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_label_v span.tdf_ribbon_span,#tdf_quickview.tdf_container .tdf_label_v span.tdf_ribbon_span{color:#FFF;font-size:14px}.tdf_label_v span.tdf_ribbon_span .tdf_money.money,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_label_v span.tdf_ribbon_span .tdf_money.money,#tdf_quickview.tdf_container .tdf_label_v span.tdf_ribbon_span .tdf_money.money{color:#FFF}.tdf_label_v2,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_label_v2,#tdf_quickview.tdf_container .tdf_label_v2{top:0;left:0}.tdf_label_v3,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_label_v3,#tdf_quickview.tdf_container .tdf_label_v3{top:0;right:0}.tdf_label_v4,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_label_v4,#tdf_quickview.tdf_container .tdf_label_v4{bottom:0;left:0}.tdf_label_v5,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_label_v5,#tdf_quickview.tdf_container .tdf_label_v5{bottom:0;right:0}.woodmart-hover-alt .hover-img .tdf_label{display:none}.media>.tdf_label{height:auto !important;width:auto !important}#tdf_loyal.tdf_container{width:100%;clear:both;text-align:center;padding-top:15px}#tdf_loyal.tdf_container a.tdf_loyal_login{background-color:#fffffd;color:#4267b3}#tdf_loyal.tdf_container a{padding:8px 13px;font-size:16px;line-height:20px;width:100%;color:#fffffd;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;cursor:pointer;background:#4267b3;margin:5px;border:1px solid #4267b3}#tdf_loyal.tdf_container .tdf_loyal_container{padding:15px;-webkit-box-shadow:0 2px 12px #637381;-moz-box-shadow:0 2px 12px #637381;box-shadow:0 2px 12px #637381;width:90%;margin-left:auto;margin-right:auto;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;min-height:130px}#tdf_loyal.tdf_container .tdf_loyal_container div:nth-child(2){margin-bottom:15px}#tdf_message_2.tdf_notify_msg .tdf_loyal_discountable,#tdf_notify.tdf_container .tdf_content_section_discountable .tdf_loyal_discountable{padding:5px 10px 10px 10px;line-height:30px}#tdf_message_2.tdf_notify_msg .tdf_loyal_discountable a,#tdf_notify.tdf_container .tdf_content_section_discountable .tdf_loyal_discountable a{color:#4267b3}#tdf_notify.tdf_container .tdf_loyal_discountable span.tdf_point,#tdf_modal #tdf_loyal_rewards span.tdf_point{color:#61bd4e}#tdf_modal.tdf_container .tdf_point_message,#tdf_modal.tdf_container .tdf_loyal_earn{line-height:24px}#tdf_modal.tdf_container .tdf_loyal_earn{margin-bottom:5px}#tdf_modal.tdf_container .tdf_loyal_offer_point{color:#637381}#tdf_modal.tdf_container #tdf_loyal_rewards{width:100%}#tdf_modal.tdf_container .tdf_loyal_rewards_btn{background:#4267b2;display:inline-block;width:100px;margin:10px 0;float:right}#tdf_modal.tdf_container button.tdf_loyal_disable_btn{background-color:#d4d6e4;cursor:unset}#tdf_modal.tdf_container .tdf_loyal_offer{display:inline-block;width:62%;padding:10px 0;text-align:left}#tdf_modal.tdf_container .tdf_loyal_offer_message{font-weight:bold}@media screen and (min-width: 768px){#tdf_loyal.tdf_container .tdf_loyal_container{padding:15px;-webkit-box-shadow:0 2px 12px #637381;-moz-box-shadow:0 2px 12px #637381;box-shadow:0 2px 12px #637381;width:60%}#tdf_modal.tdf_container .tdf_loyal_rewards_btn{width:120px}#tdf_modal.tdf_container .tdf_loyal_offer{width:72%}}#tdf_discount_widget.tdf_container,#tdf_discount_box.tdf_container{text-align:left}#tdf_discount_widget.tdf_container .tdf_input_form .tdf_input_discount,#tdf_discount_box.tdf_container .tdf_input_form .tdf_input_discount{width:130px;border:1px solid #d3d3db;margin-right:5px;display:inline-block;padding:11px 12px;font-size:14px;height:36px}#tdf_discount_widget.tdf_container .tdf_input_form .tdf_normal_btn,#tdf_discount_box.tdf_container .tdf_input_form .tdf_normal_btn{width:80px;font-size:15px}.tdf_qv_recommend .tdf_no_gift{display:none}#tdf_discount_box.tdf_container{text-align:right;margin-bottom:10px}#tdf_discount_box.tdf_container .tdf_normal_btn{background-color:#4267b2;border:none}#tdf_notify .tdf_motivator.tdf_container .tdf_motivator_container,#tdf_discount_widget .tdf_motivator.tdf_container .tdf_motivator_container{z-index:2147483647;width:100%;background-color:#fffefe;text-align:center;font-size:18px;padding-bottom:20px;line-height:26px}#tdf_notify .tdf_motivator.tdf_container .tdf_motivator_border,#tdf_discount_widget .tdf_motivator.tdf_container .tdf_motivator_border{position:relative;height:20px;width:100%;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;border-radius:10px;border:3px solid #61bd4f;max-width:300px;margin-left:auto;margin-right:auto}#tdf_notify .tdf_motivator.tdf_container .tdf_motivator_progress,#tdf_discount_widget .tdf_motivator.tdf_container .tdf_motivator_progress{position:absolute;height:10px;top:2px;left:2px;background-color:#61bd4f;-webkit-border-radius:10px;-moz-border-radius:10px;-ms-border-radius:10px;border-radius:10px;color:#fffefe;text-align:center;font-weight:600;font-size:10px;line-height:10px}@media screen and (min-width: 768px){#tdf_notify .tdf_motivator.tdf_container .tdf_motivator_container,#tdf_discount_widget .tdf_motivator.tdf_container .tdf_motivator_container{font-size:20px}#tdf_notify .tdf_motivator.tdf_container .tdf_motivator_border,#tdf_discount_widget .tdf_motivator.tdf_container .tdf_motivator_border{height:30px}#tdf_notify .tdf_motivator.tdf_container .tdf_motivator_progress,#tdf_discount_widget .tdf_motivator.tdf_container .tdf_motivator_progress{top:4px;height:16px;left:4px;line-height:16px;font-size:16px}}#tdf_psale.tdf_container{width:100%;clear:both;padding-top:15px;background-color:#ffffff}#tdf_psale.tdf_container .tdf_psale_title{font-size:20px}#tdf_psale.tdf_container .tdf_psale_code_container{margin:10px 0;max-width:414px}#tdf_psale.tdf_container .tdf_psale_code{display:inline-block;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;width:65%;height:38px;border:1px dashed #BF0712;padding:2px}#tdf_psale.tdf_container .tdf_psale_code input{-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;text-align:center;background-color:#BF0712;color:#ffffff;height:32px;width:100%}#tdf_psale.tdf_container button.tdf_normal_btn{width:33%;margin-left:2%;color:#212B35;background-color:#ffffff;border:1px solid #cac5c5}#tdf_psale.tdf_container .tdf_psale_second_message{padding:10px 0;font-size:16px}#tdf_psale.tdf_container .tdf_psale_product_container{margin:10px 0;font-size:0}#tdf_psale.tdf_container .tdf_psale_product_img{padding:3px;display:inline-block;height:120px;width:50%}#tdf_psale.tdf_container .tdf_psale_product_img div{background-color:#fafbfd;background-repeat:no-repeat;background-size:contain;background-position:center;width:100%;height:100%}@media screen and (min-width: 768px){#tdf_psale.tdf_container .tdf_psale_product_img{width:25%}}#tdf_quickview.tdf_container .tdf_dialog_modal.tdf_dialog_modal_qv{z-index:2147483647}#tdf_quickview.tdf_container .tdf_quickview_title_holiday{display:none;line-height:60px;width:100%}#tdf_quickview.tdf_container .tdf_qv_content{font-size:0}#tdf_quickview.tdf_container .tdf_carousel_container{position:relative;overflow:hidden}#tdf_quickview.tdf_container .tdf_swiper_wrapper{width:100%;height:100%;font-size:0;position:relative;overflow-x:scroll;white-space:nowrap}#tdf_quickview.tdf_container .tdf_swiper_slide_container{position:relative;overflow:hidden;display:inline-block}#tdf_quickview.tdf_container div.tdf_one_img{overflow:hidden;font-size:0}#tdf_quickview.tdf_container div.tdf_one_img .tdf_swiper_slide_container{width:100%}#tdf_quickview.tdf_container .tdf_swiper_slide{height:250px;min-width:60px;background-color:#F9FAFB}#tdf_quickview.tdf_container .tdf_swiper_slide img{height:100%}#tdf_quickview.tdf_container .tdf_qv_product_content{text-align:left;padding:8px 12px 12px 12px}#tdf_quickview.tdf_container .tdf_qv_wsale_div{margin-bottom:10px}#tdf_quickview.tdf_container .tdf_qv_variants_container{margin-right:4px}#tdf_quickview.tdf_container .tdf_qv_product_name{display:block;line-height:24px;font-size:20px}#tdf_quickview.tdf_container .tdf_qv_product_price{font-size:18px}#tdf_quickview.tdf_container .tdf_qv_title{vertical-align:top;line-height:32px;padding-right:5px;display:inline-block}#tdf_quickview.tdf_container .tdf_qv_variants_swatch{display:inline-block;line-height:36px;font-size:0}#tdf_quickview.tdf_container .tdf_qv_label{display:inline-block;vertical-align:top}#tdf_quickview.tdf_container .tdf_qv_swatch_real{vertical-align:top;border-color:#c4c6d5;font-size:16px;display:inline-block;min-width:32px;line-height:32px;font-weight:700;text-align:center;border-style:solid;border-width:1px;padding:0 5px;cursor:pointer;margin-right:4px}#tdf_quickview.tdf_container .tdf_qv_swatch_real.selecting{color:#fffffe;border-color:#4267b2;background-color:#4267b2}#tdf_quickview.tdf_container .tdf_qv_swatch_real.available{border-color:#4267b2;color:#4267b2}#tdf_quickview.tdf_container .tdf_qv_swatch_real.unavailable{color:#fffffe;border-color:#c4c6d5;background-color:#c4c6d5}#tdf_quickview.tdf_container .tdf_qv_product_name,#tdf_quickview.tdf_container .tdf_qv_product_price,#tdf_quickview.tdf_container .tdf_qv_variants_container,#tdf_quickview.tdf_container div.tdf_select_box,#tdf_quickview.tdf_container .tdf_qv_quantity_container,#tdf_quickview.tdf_container .tdf_qv_btn>button,#tdf_quickview.tdf_container .x_body_htm{margin-bottom:8px}#tdf_quickview.tdf_container .tdf_qv_product_name *,#tdf_quickview.tdf_container .tdf_qv_product_price *,#tdf_quickview.tdf_container .tdf_qv_variants_container *,#tdf_quickview.tdf_container div.tdf_select_box *,#tdf_quickview.tdf_container .tdf_qv_quantity_container *,#tdf_quickview.tdf_container .tdf_qv_btn>button *,#tdf_quickview.tdf_container .x_body_htm *{max-width:100%}#tdf_quickview.tdf_container .tdf_qv_share_container{padding:5px 0;margin-top:15px;opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);margin:0 8px}#tdf_quickview.tdf_container .tdf_icon_wrapper{text-align:center}#tdf_quickview.tdf_container .tdf_qv_decscription_link a{color:#4267b2}#tdf_quickview.tdf_container .tdf_qv_decscription_link a:hover{text-decoration:underline}#tdf_quickview.tdf_container .tdf_qv_recommend{text-align:left;background:#F9FAFB;padding:12px}#tdf_quickview.tdf_container .tdf_qv_recommend .tdf_products_vertical_content{margin-right:12px}#tdf_quickview.tdf_container .tdf_qv_recommend .tdf_products_vertical_content:last-child{margin-right:0}#tdf_quickview.tdf_container .tdf_qv_recommend_title h3{line-height:40px}#tdf_quickview.tdf_container .tdf_qv_recommend_content{font-size:0;overflow-x:auto;width:100%;white-space:nowrap}#tdf_quickview.tdf_container .tdf_qv_swatch_item{display:none}#tdf_quickview.tdf_container .tdf_qv_qty_span{display:inline-block;width:32px;line-height:32px;text-align:center;font-weight:700;-moz-transition:color 0.2s;-o-transition:color 0.2s;-webkit-transition:color 0.2s;transition:color 0.2s;font-size:24px;cursor:pointer}#tdf_quickview.tdf_container .tdf_qv_qty_span.tdf_disable{color:#c4c6d5;cursor:not-allowed}#tdf_quickview.tdf_container .tdf_qty_change{display:inline-block}#tdf_quickview.tdf_container .tdf_qty_change input{width:40px;height:32px;border:1px solid #c4c6d5;text-align:center;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px}#tdf_quickview.tdf_container .tdf_qv_bottom_stuff button{padding:8px 0}@media screen and (min-width: 768px){#tdf_quickview.tdf_container .tdf_quickview_title_holiday{-webkit-border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;-ms-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0}#tdf_quickview.tdf_container .tdf_carousel_container{display:inline-block;width:50%;padding:20px 0 20px 20px}#tdf_quickview.tdf_container div.tdf_swiper_slide_container.tdf_img_inactive{display:none}#tdf_quickview.tdf_container .tdf_swiper_slide{height:400px;min-width:100px}#tdf_quickview.tdf_container .tdf_qv_product_content{width:50%;display:inline-block;height:420px;overflow:auto;vertical-align:top;padding:16px 20px 20px 20px}#tdf_quickview.tdf_container .tdf_qv_product_content .tdf_select_box .tdf_select_icon{right:8px}#tdf_quickview.tdf_container .tdf_qv_decscription_link,#tdf_quickview.tdf_container .tdf_qv_product_name,#tdf_quickview.tdf_container .tdf_qv_product_price,#tdf_quickview.tdf_container .tdf_qv_variants_container,#tdf_quickview.tdf_container .tdf_qv_quantity_container{overflow:hidden}#tdf_quickview.tdf_container .tdf_qv_product_name,#tdf_quickview.tdf_container .tdf_qv_product_price,#tdf_quickview.tdf_container .tdf_qv_variants_container,#tdf_quickview.tdf_container div.tdf_select_box,#tdf_quickview.tdf_container .tdf_qv_quantity_container,#tdf_quickview.tdf_container .tdf_qv_btn>button,#tdf_quickview.tdf_container .x_body_htm{margin-bottom:12px}#tdf_quickview.tdf_container .tdf_qv_share_container{padding:8px 0}#tdf_quickview.tdf_container .tdf_qv_recommend{padding:20px;-webkit-border-radius:8px;-moz-border-radius:8px;-ms-border-radius:8px;border-radius:8px}#tdf_quickview.tdf_container .tdf_qv_recommend .tdf_products_vertical_content{margin-right:20px}}.tdf_rec{clear:both;padding-top:20px}.tdf_rec h2.tdf_rec_h2{text-align:center;margin-top:20px}.tdf_rec .tdf_rec_product_li{clear:initial}.tdf_rec .tdf_img{width:48%;padding-top:50%;display:inline-block;background-repeat:no-repeat;background-position:center;background-size:contain;background-color:#fafbfd;position:relative;margin:1px}.tdf_rec .tdf_img .tdf_img_title{position:absolute;bottom:0;background-color:#fafbfd;color:#000001;padding:0;margin-bottom:-10px;font-size:15px;width:100%;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (min-width: 768px){.tdf_rec .tdf_img{width:24%;padding-top:25%}}.tdf_rec_stable_2.tdf_rec h2.tdf_rec_h2{font-size:24px}.tdf_rec_stable_2.tdf_rec .tdf_rec_stable_div{white-space:nowrap;overflow:auto;text-align:center}.tdf_rec_stable_2.tdf_rec .tdf_rec_stable_div .tdf_rec_product{position:relative;vertical-align:top;display:inline-block;width:124px;margin-right:4px}.tdf_rec_stable_2.tdf_rec .tdf_rec_stable_div .tdf_rec_product .tdf_img{width:100%}@media screen and (min-width: 768px){.tdf_rec_stable_2.tdf_rec h2.tdf_rec_h2{font-size:26px}.tdf_rec_stable_2.tdf_rec .tdf_rec_stable_div{padding-bottom:16px}.tdf_rec_stable_2.tdf_rec .tdf_rec_stable_div .tdf_rec_product{width:230px}}#tdf_bar.tdf_container{position:relative;z-index:2;overflow-x:auto;overflow-y:hidden}#tdf_bar.tdf_container .tdf_bar_mm{display:inline-block;margin:0 7px}#tdf_bar.tdf_container .tdf_bar_left_img{vertical-align:top;display:none}#tdf_bar.tdf_container .tdf_bar_img{vertical-align:top;margin:0 5px;height:56px}#tdf_bar.tdf_container .tdf_bar_img:first-child{margin-left:0}#tdf_bar.tdf_container .tdf_bar_content{line-height:56px;white-space:nowrap;height:56px;cursor:pointer}#tdf_bar.tdf_container .tdf_bar_content .tdf_bar_btn{line-height:42px;vertical-align:top;display:inline-block;position:relative;background:#212B37;top:7px;height:42px;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;margin-left:8px;padding:0 8px}#tdf_bar.tdf_container .tdf_bar_content .tdf_bar_btn button{color:#fffffc}#tdf_bar.tdf_container span{vertical-align:top;display:none}#tdf_bar.tdf_container .tdf_countdown{vertical-align:top;position:relative;display:inline-block;font-size:20px;margin-left:5px;line-height:60px}@media screen and (min-width: 375px){#tdf_bar.tdf_container .tdf_countdown{font-size:30px}}@media screen and (min-width: 768px){#tdf_bar.tdf_container{overflow-x:hidden;text-align:center}#tdf_bar.tdf_container .tdf_bar_img:first-child{margin-left:12px}#tdf_bar.tdf_container .tdf_bar_img,#tdf_bar.tdf_container .tdf_countdown,#tdf_bar.tdf_container .tdf_bar_btn{margin:0 12px}#tdf_bar.tdf_container span{vertical-align:top;display:inline-block;position:relative;line-height:56px;font-size:20px;margin:0 12px}#tdf_bar.tdf_container .tdf_bar_left_img{display:inline-block}}#tdf_notify.tdf_container .tdf_notify_container{position:fixed;bottom:30px}#tdf_notify.tdf_container .tdf_notify_msgs{bottom:75px;z-index:2147483647;left:10px;right:10px}#tdf_notify.tdf_container .tdf_notify_msg{background-color:#fffefe;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;-webkit-box-shadow:0 2px 12px #637381;-moz-box-shadow:0 2px 12px #637381;box-shadow:0 2px 12px #637381;padding:10px 10px 0 10px;animation-name:slideIn;-webkit-animation-name:slideIn;-moz-animation-name:slideIn;-ms-animation-name:slideIn;animation-duration:.4s;-webkit-animation-duration:.4s;-moz-animation-duration:.4s;-ms-animation-duration:.4s;z-index:2147483647;margin-bottom:10px}#tdf_notify.tdf_container .tdf_notify_popup{max-height:380px;bottom:75px;overflow:auto;z-index:9999;left:10px;right:16px;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px}#tdf_notify.tdf_container .tdf_notify_popup .tdf_cta_btn{margin-top:10px}#tdf_notify.tdf_container .tdf_notify_minicon{background-image:url(S_PATH/fe/nfec/img/gift_1.png);background-size:30px;background-repeat:no-repeat;background-position:5px 4px;right:20px;width:40px;height:40px;background-color:#4267b3;-webkit-box-shadow:0 0 5px #212B35;-moz-box-shadow:0 0 5px #212B35;box-shadow:0 0 5px #212B35;-webkit-border-radius:50%;-moz-border-radius:50%;-ms-border-radius:50%;border-radius:50%;cursor:pointer;z-index:9999;left:5px}#tdf_notify.tdf_container .tdf_notify_minicon.tdf_notify_minicon_close{background-color:#4267b3;background-image:url(S_PATH/fe/nfec/img/close-mini-1.png);background-size:20px;background-position:center;background-repeat:no-repeat;z-index:2147483647}#tdf_notify.tdf_container h5{font-size:14px}#tdf_notify.tdf_container p{max-height:60px}#tdf_notify.tdf_container .tdf_content_section_discountable{-webkit-box-shadow:0 1px 7px #637381;-moz-box-shadow:0 1px 7px #637381;box-shadow:0 1px 7px #637381;padding:10px 10px 0 10px;margin:10px 1px;background-color:#fffefe}#tdf_notify.tdf_container .tdf_content_section_discounted{-webkit-box-shadow:0 1px 7px #637381;-moz-box-shadow:0 1px 7px #637381;box-shadow:0 1px 7px #637381;padding:10px;margin:10px 1px;background-color:#fffefe}#tdf_notify.tdf_container .tdf_discount_title{font-size:20px;margin-bottom:10px}#tdf_notify.tdf_container .tdf_notify_mobile .tdf_notify_popup{background-color:#F9FAFB;width:100%;bottom:0;top:34px;max-height:unset;left:0}#tdf_notify.tdf_container .tdf_content_section_discountable{-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px}#tdf_notify.tdf_container .tdf_content_section_discounted{-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px}@media screen and (min-width: 768px){#tdf_notify.tdf_container .tdf_notify_container{left:auto;bottom:200px}#tdf_notify.tdf_container .tdf_notify_msgs{width:400px;bottom:240px;right:18px}#tdf_notify.tdf_container .tdf_notify_popup{width:400px;bottom:240px;max-height:600px;background:none;-webkit-box-shadow:inset 0 0 0 0;-moz-box-shadow:inset 0 0 0 0;box-shadow:inset 0 0 0 0}#tdf_notify.tdf_container .tdf_notify_popup .tdf_notify_popup_content{padding:5px}}#tdf_upsell.tdf_container .tdf_dialog_header{padding:20px 8px;background-color:#f2f3f5}#tdf_upsell.tdf_container .tdf_dialog_header_body{padding:0 8px;overflow:hidden}#tdf_upsell.tdf_container .tdf_cart_amount,#tdf_upsell.tdf_container .tdf_cart_items,#tdf_upsell.tdf_container .tdf_cart_amount .tdf_money{color:#212B30}#tdf_upsell.tdf_container .tdf_target_left{float:left;width:100%}#tdf_upsell.tdf_container .tdf_image_target{display:inline;float:left}#tdf_upsell.tdf_container .tdf_image_target img{width:auto;height:auto;max-width:50px;max-height:50px;vertical-align:middle;margin:0 auto;display:inline-block}#tdf_upsell.tdf_container .tdf_detail_image{display:block}#tdf_upsell.tdf_container .tdf_detail_image strong{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block;color:#000008}#tdf_upsell.tdf_container .tdf_target_name{float:left;line-height:25px;text-align:left;padding-left:10px;white-space:nowrap;width:230px}#tdf_upsell.tdf_container .tdf_header_message{color:#637386}#tdf_upsell.tdf_container .tdf_target_right{display:inline;float:left;width:100%}#tdf_upsell.tdf_container .tdf_detail{float:left;padding-top:15px;width:100%}#tdf_upsell.tdf_container .tdf_cart_detail{float:left;text-align:left}#tdf_upsell.tdf_container .tdf_action{float:left;padding-top:10px;width:100%}#tdf_upsell.tdf_container .tdf_bs_offer{padding:20px 8px}#tdf_upsell.tdf_container .tdf_offer_message{color:#637381;margin:0 8px 20px 8px;font-size:16px;text-align:left}#tdf_upsell.tdf_container .tdf_offer_message a{color:#4267b2}#tdf_upsell.tdf_container .tdf_qty_input{width:40px;height:22px;border:1px solid #c4c6d5;text-align:center}#tdf_upsell.tdf_container .tdf_qv_quantity_container{margin-bottom:10px}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_bs_offer_product{margin:0 0 16px;height:220px;clear:both}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_horizontal_product{width:100%}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_horizontal_img_left{width:50%;float:left;position:relative;min-height:1px;padding-left:8px;padding-right:8px}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_horizontal_content_right{width:50%;float:left;position:relative;min-height:1px;padding-left:8px;padding-right:8px;text-align:left}#tdf_upsell.tdf_container .tdf_bs_offer_1 .tdf_bs_offer_products{white-space:nowrap;overflow:auto;padding-bottom:16px}#tdf_upsell.tdf_container .tdf_bs_offer_1 .tdf_bs_offer_products .tdf_bs_offer_product{white-space:normal;position:relative;vertical-align:top;display:inline-block;margin-right:4px;width:180px}#tdf_upsell.tdf_container .tdf_bs_offer_1 .tdf_bs_offer_products .tdf_bs_offer_product .tdf_discount_content{width:100%}#tdf_upsell.tdf_container .tdf_dialog_footer{background-color:#f2f3f5}#tdf_upsell.tdf_container .tdf_dialog_footer.tdf_upsell_checkout{padding:10px 16px}#tdf_upsell.tdf_container .tdf_dialog_footer.tdf_upsell_checkout div{font-size:20px;color:#637386}#tdf_upsell.tdf_container .tdf_dialog_footer.tdf_upsell_checkout div .tdf_money.money{color:#000008;font-size:20px}@media screen and (min-width: 360px){#tdf_upsell.tdf_container .tdf_target_name{width:270px}}@media screen and (min-width: 400px){#tdf_upsell.tdf_container .tdf_target_name{width:320px}}@media screen and (min-width: 568px){#tdf_upsell.tdf_container .tdf_target_name{width:90%}}@media screen and (min-width: 768px){#tdf_upsell.tdf_container .tdf_dialog_header{-webkit-border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;-ms-border-radius:4px 4px 0 0;border-radius:4px 4px 0 0}#tdf_upsell.tdf_container .tdf_dialog_header_body{padding-left:15px;padding-right:0}#tdf_upsell.tdf_container .tdf_target_left{width:50%}#tdf_upsell.tdf_container .tdf_image_target img{max-width:80px;max-height:80px}#tdf_upsell.tdf_container .tdf_target_name{float:left;max-width:75%}#tdf_upsell.tdf_container .tdf_target_right{float:right;width:50%;padding-left:12px}#tdf_upsell.tdf_container .tdf_detail{padding-top:0;padding-right:15px;width:100%}#tdf_upsell.tdf_container .tdf_bs_offer{padding:24px 16px}#tdf_upsell.tdf_container .tdf_offer_message{margin:0 16px 24px 16px}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_bs_offer_product{height:300px;margin-bottom:24px}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_horizontal_product{max-width:860px}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_horizontal_content_right{padding-left:15px}#tdf_upsell.tdf_container .tdf_bs_offer_1 .tdf_bs_offer_products .tdf_bs_offer_product{width:230px}#tdf_upsell.tdf_container .tdf_dialog_footer.tdf_upsell_checkout{padding:20px 28px;overflow:hidden;-webkit-border-radius:8px;-moz-border-radius:8px;-ms-border-radius:8px;border-radius:8px}#tdf_upsell.tdf_container .tdf_dialog_footer.tdf_upsell_checkout div{width:50%;display:inline-block;float:left;text-align:left}}@media screen and (min-width: 1024px){#tdf_upsell.tdf_container .tdf_dialog_header{padding:24px 12px}#tdf_upsell.tdf_container .tdf_target_left{width:60%}#tdf_upsell.tdf_container .tdf_target_right{width:40%}#tdf_upsell.tdf_container .tdf_bs_offer{padding:24px 12px;-webkit-border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;-ms-border-radius:0 0 4px 4px;border-radius:0 0 4px 4px}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_horizontal_img_left,#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_horizontal_content_right{padding-left:16px;padding-right:16px}}@media screen and (min-width: 1441px){#tdf_upsell.tdf_container .tdf_bs_offer,#tdf_upsell.tdf_container .tdf_dialog_header{padding:30px 24px}#tdf_upsell.tdf_container .tdf_dialog_header_body{padding-left:21px;padding-right:8px}#tdf_upsell.tdf_container .tdf_offer_message{margin:0 24px 24px 24px}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_bs_offer_product{height:378px}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_horizontal_product{max-width:900px}#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_horizontal_img_left,#tdf_upsell.tdf_container .tdf_bs_offer_0 .tdf_horizontal_content_right{padding-left:24px;padding-right:24px}#tdf_upsell.tdf_container .tdf_dialog_footer.tdf_upsell_checkout{padding:30px 48px}}#tdf_wholesale.tdf_container{width:100%;clear:both;margin-top:10px;padding-top:10px}#tdf_wholesale.tdf_container table th{background-color:#fffff1;color:#212B39}#tdf_wholesale.tdf_container.tdf_wholesale_2 table td{border-top:solid 1px;border-bottom:solid 1px;border-right:none;border-left:none}#tdf_wholesale.tdf_container .tdf_normal_btn{min-height:30px;min-width:80px}#tdf_wholesale.tdf_container .tdf_nonpopup h2 a{color:#4267b3}#tdf_discount_widget .tdf_wholesale_moti button.tdf_lite_btn{vertical-align:middle;width:80px}'),sl9.main&&sl9.main.Start&&sl9.main.Start()},!0),tdfEventHub.TriggerEventOnce("jsloaded_sl9",{});var nfec={styleVars:{p_btn_txt_c:"#fffffe",p_btn_txt_2_c:"#fffffb",p_btn_txt_3_c:"#637387",p_btn_txt_lite_c:"#637383",p_btn_bg_c:"#4267b2",p_btn_bg_2_c:"#61bd4f",p_btn_bg_lite_c:"#d4d6e4",p_btn_bg_3_c:"#d4d6e7",p_txt_c:"#212B36",p_txt_bold_c:"#000002",p_txt_lite_c:"#637381",p_txt_litest_c:"#c4c6d5",p_txt_info_c:"#61bd4d",p_bg_c:"#fffefe",p_bg_lite_c:"#F9FAFB",p_header_bg_c:"#f2f3f5",p_header_txt_c:"#212B30",p_header_txt_bold_c:"#000008",p_header_txt_lite_c:"#637386",p_discount_bg_c:"#BF0711",p_overlay_c:"#000000",txt_c:"#212B35",txt_info_c:"#61bd4e",txt_bold_c:"#000001",btn_bg_c:"#4267b3",btn_txt_c:"#fffffd",discount_bg_c:"#BF0712",img_bg_c:"#fafbfd",explore_txt_c:"#fffffc",explore_bg_c:"#212B37",table_h_bg_c:"#fffff1",table_h_txt_c:"#212B39"},style:{},consta:{env_dev:"dev",api_path:"https://fe.abrye.com",track_path:"https://t.abrye.com",PageTypeProduct:1,PageTypeHome:2,PageTypeCart:3,PageTypeCollection:4,PageTypeCheckout:5,PageTypePostCheckout:6,PageTypeProcessCheckout:7,OptionDisplayTypeNone:0,OptionDisplayTypeSelect:1,OptionDisplayTypeCheckboxs:2,DiscountTypeNone:0,DiscountTypePercent:1,DiscountTypeValue:2,DiscountTypeFreeShip:3,DiscountTypeFreeGift:4,DiscountTypeWholesale:5,DiscountTypePrice:7,DiscountTypeCode:6}};nfec.event_hub={callbacks:{},triggered:{},pastev:{notify_discount_msg:[]},IsLoaded:function(t){return nfec.event_hub.triggered.hasOwnProperty(t)?nfec.event_hub.triggered[t]:null},ListenToMulti:function(t,e){if(t.length)for(var n=[],i=function(c){n.indexOf(c)===-1&&n.push(c),n.length==t.length&&e()},o=0,r=t.length;o<r;o++)nfec.event_hub.ListenTo(t[o],i,!0);else e()},ListenPast:function(t,e){for(var n=0;n<nfec.event_hub.pastev[t].length;n++)e(t,nfec.event_hub.pastev[t][n]);nfec.event_hub.callbacks[t]||(nfec.event_hub.callbacks[t]=[]),nfec.event_hub.callbacks[t].push(e)},ListenTo:function(t,e,n,i){n&&nfec.event_hub.triggered.hasOwnProperty(t)&&(e(t,nfec.event_hub.triggered[t]),!i)||(nfec.event_hub.callbacks[t]||(nfec.event_hub.callbacks[t]=[]),nfec.event_hub.callbacks[t].push(e))},Trigger:function(t,e){var n=nfec.event_hub.callbacks[t],i=n?n.length:0;nfec.event_hub.triggered[t]=e,nfec.event_hub.pastev[t]&&nfec.event_hub.pastev[t].push(e);for(var o=0;o<i;o++)try{n[o](t,e)}catch(r){console.log(t,r)}},TriggerOnce:function(t,e){nfec.event_hub.triggered.hasOwnProperty(t)||nfec.event_hub.Trigger(t,e)}},nfec.main={style:"",PRo:"/",TF:function(t,e,n){return nfec.main.TFR?nfec.main.TN(t,e,n)+"":t.toFixed(e)},TN:function(t,e,n){return Number(n?Math.floor(t+"e"+e)+"e-"+e:Math.ceil(t+"e"+e)+"e-"+e)},Init:function(){window.nfecLV&&window.Shopify&&Shopify.routes&&(nfec.main.PRo=Shopify.routes.root||"/"),nfec.util.tpl.Init(),nfec.polyfil.Start(),nfec.util.tool.WaitToLoad(["jQuery"],function(){jQuery.fn.on||(jQuery.fn.on=function(){var e,n,i,o=Array.prototype.slice.call(arguments);if(typeof o[2]=="function"?(e=o[0],n=o[1],i=o[2]):typeof o[1]=="function"&&(e=o[0],i=o[1]),typeof e=="string"&&(e=e.split(" "),(!n||typeof n=="string")&&i))return this.each(function(r,c){jQuery.each(e,function(a,f){n?jQuery.fn.delegate&&jQuery(c).delegate(n,f,i):jQuery(c).bind(f,i)})})}),jQuery.fn.prop||(jQuery.fn.prop=function(e,n){return e=="type"&&n?this.each(function(i,o){o[e]=n}):this.attr(e,n)}),nfec.store.control.Start(),nfec.start.dom.Start(),nfec.platform.current=nfec.platform.shopify;var t=nfec.platform.current.page.Detect();return nfec.sync.country.Start(),nfec.sync.customer.Start(),nfec.sync.currency.Start(),nfec.platform.base.page.IsInCheckout(t.type)?(nfec.sync.cart.Start(),nfec.sync.product.Start(),nfec.modal.control.Start(),tdfEventHub.TriggerEventOnce("core_ready"),void nfec.event_hub.ListenTo("theme_style_ready",function(){nfec.main.doAddStyle()},!0)):t.type==nfec.consta.PageTypePostCheckout?(nfec.sync.cart.Start(1),nfec.sync.product.Start(),nfec.modal.control.Start(),tdfEventHub.TriggerEventOnce("core_ready"),nfec.event_hub.ListenTo("theme_style_ready",function(){nfec.main.doAddStyle()},!0),void(jQuery("head").html().indexOf("cdn.refersion")!=-1&&jQuery.getScript("/apps/sap/5/fe/refersion.js"))):(nfec.sync.ctotal.Start(),nfec.sync.shopversion.Start(),nfec.sync.theme_v.Start(),nfec.start.request_listener.Start(),setTimeout(function(){var e=jQuery("head").html();e&&(e.indexOf("js.smile.io")!=-1&&jQuery.getScript("https://js.smile.io/v1/smile-shopify.js?vry=1"),window.Privy||e.indexOf(".privy.com")==-1||jQuery.getScript("https://shopify.privy.com/widget.js?shop="+Shopify.shop+"&vry=1"))},100),nfec.start.pagescroll.Start(),nfec.sync.cart.Start(),nfec.sync.product.Start(),nfec.noti.control.Start(),nfec.modal.control.Start(),nfec.start.cartform.Start(),nfec.start.variantform.Start(),nfec.start.redirect.Start(),tdfEventHub.TriggerEventOnce("core_ready"),nfec.event_hub.ListenTo("theme_style_ready",function(){nfec.main.doAddStyle()},!0),void nfec.start.preload.Start())})},AddStyle:function(t){nfec.main.style+=t},AddStyleVars:function(t){nfec.main.styleVars=t,nfec.event_hub.Trigger("theme_style_ready",{})},doAddStyle:function(){var t,e=nfec.main.styleVars||{},n=nfec.styleVars,i={};for(a in n)n.hasOwnProperty(a)&&n[a]&&(i[n[a]]=a);for(a in e)if(e.hasOwnProperty(a)&&e[a]&&(t=e[a],nfec.styleVars[a])){var o=nfec.styleVars[a],r=new RegExp(o,"g");i[t]&&a!=i[t]&&(t=t.slice(0,-1)+"a"),nfec.main.style=nfec.main.style.replace(r,t)}var c=nfec.manager.setting.Data.id,a="";2783<c&&(a+="#tdf_wholesale th, #tdf_wholesale td{padding: 13px}"),2971<c&&(a+="#tdf_wholesale h2{font-size: 22px}"),5985<c&&(a+="#tdf_wholesale table{width: 100%; text-align: left}.tdf_wholesale_2 .tdf_wholesale_level td:nth-child(2){text-align: right}"),7e3<c&&(a+="#tdf_discount_widget.tdf_nonpopup h3{margin-bottom: 5px}"),9587<c&&(a+=".tdf_container :first-letter {text-transform: capitalize}"),nfec.platform.current.element.CheckTheme("Warehouse")&&(a+=".mini-cart[aria-hidden=true] #tdf_discount_widget{display:none}");var f=nfec.util.request.GetCDN();o="S_PATH",r=new RegExp(o,"g"),nfec.main.style=nfec.main.style.replace(r,f),window.jQuery("head").append("<style>"+nfec.main.style+a+"</style>")}},nfec.polyfil={Start:function(){var t;Array.isArray||(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}),String.prototype.trim||(t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(t,"")})}},nfec.img={},nfec.img.flag={},nfec.manager={},nfec.manager.cart={CartAtStart:null,Current:null,Total:0,Set:function(t){nfec.manager.cart.Current=t,nfec.store.control.Set("cart",t.toState(),86400,!0),nfec.manager.cart.CartAtStart||(nfec.manager.cart.CartAtStart=t.toState()),nfec.manager.cart.Total=t.getTotalPrice()},Get:function(){return nfec.manager.cart.Current},GetCartAtStart:function(){var t=new nfec.model.cart;return t.parseState(nfec.manager.cart.CartAtStart),t},GetOldTotal:function(){for(var t,e,n,i,o=0,r=nfec.manager.cart.Current.items,c=0,a=r.length;c<a;c++)t=r[c],(e=nfec.manager.product.FindByID(t.product_id))&&(n=e.getVariantByID(t.variant_id))&&(i=n.display_old_price())&&i>r[c].price?o+=i*r[c].quantity:o+=r[c].price*r[c].quantity;return o},GetState:function(){var t=nfec.store.control.Get("cart");if(t){var e=new nfec.model.cart;return e.parseState(t),e}},GetCurrentProductIDs:function(){var t=nfec.manager.cart.Get();return t?t.getProductIDs():[]}},nfec.manager.coupon={Flag:function(t){var e=new Date,n=Math.floor(e.getTime()/1e3);nfec.store.control.Set("dcf_"+t.toLowerCase(),n,864e4,!0)},CkFlag:function(t){var e=nfec.store.control.Get("dcf_"+t.toLowerCase());if(e){if((e=parseInt(e))==1)return e;var n=nfec.store.control.Get("lordr");if(n&&!(parseInt(n)<e))return e}},Get:function(){return nfec.store.control.Get("cpn")},Set:function(t){nfec.store.control.Set("cpn",t,186400,!0)},Remove:function(t){var e=nfec.store.control.Get("cpn");e&&(t&&sl9.nfec.store.control.Remove("dcf_"+e.toLowerCase()),nfec.store.control.Remove("cpn"))}},nfec.manager.ctotal={getKey:function(t){return t.type!=sl9.nfec.consta.PageTypeCart?"ctp":"ctc"},Get:function(t){return nfec.store.control.Get(nfec.manager.ctotal.getKey(t))},Set:function(t,e){nfec.store.control.Set(nfec.manager.ctotal.getKey(t),e,86400,!0)},Del:function(){nfec.store.control.Remove("ctc"),nfec.store.control.Remove("ctp")}},nfec.manager.currency={Set:function(t){nfec.store.control.Set("cuyf_"+t.code,1,600,!0),nfec.store.control.Set("cuy_"+t.code,t.toState(),864e3,!0)},Find:function(t){var e=nfec.store.control.Get("cuy_"+t),n=new nfec.model.currency;return e?(n.parseState(e),nfec.manager.setting.GetCurrency()==t&&(n.formatString=nfec.manager.setting.GetCurrencyFormat()),n):null},Get:function(t,e){var n=nfec.manager.currency.Find(t),i=!1;if(n){if(e(n),nfec.store.control.Get("cuyf_"+t))return;i=!0}n=new nfec.model.currency;var o=nfec.util.request.GetVersion(68);t=t.toLowerCase();var r=function(c){i||e(c)};nfec.util.request.Run({url:nfec.util.request.GetPath()+"/"+o+"/api/c/"+t+".json",timeout:6e3,success:function(c){c&&c.c&&(n.fromJSON(c.c),nfec.manager.currency.Set(n)),r(n)},error:function(){r(n)}})},SetSelected:function(t){nfec.store.control.Set("curs",t,864e3,!0)},GetSelected:function(){return nfec.store.control.Get("curs")},GetCartCurrency:function(){return nfec.store.control.Get("curc")},DelCartCurrency:function(){nfec.store.control.Remove("curc")},SetCartCurrency:function(t){var e=!1;nfec.manager.currency.GetCartCurrency()||(e=!0),nfec.store.control.Set("curc",t,864e3,!0),e&&nfec.sync.currency.Render(1)},GetFlag:function(t){var e,n=nfec.struct.currency;for(e in n)if(n.hasOwnProperty(e)&&n[e]==t)return e.toLowerCase();return""},srate:function(){return window.Shopify&&Shopify.currency&&Shopify.currency.rate?Shopify.currency.rate:null},RoundUp:function(t){var e=nfec.manager.currency.srate();if(!e)return t;var n=parseFloat(e);if(n==1||t==0)return t;var i=n*t;if(Shopify.currency.active=="EUR"){var o=Math.ceil(i);i=o<i+.05?o+.95:o-.05}else i=Math.ceil(i);return i/n},Convert:function(t,e,n){if(!t||!e||t==e)return n;var i=0,o=nfec.manager.currency.srate();if(o&&Shopify.currency.active){var r=[nfec.manager.setting.GetCurrency(),Shopify.currency.active],c=parseFloat(o);t==r[0]&&e==r[1]&&(i=c),e==r[0]&&t==r[1]&&(i=1/c)}if(!i){var a=nfec.manager.currency.Find(t),f=nfec.manager.currency.Find(e);if(!a||!f)return n;i=f.rate/a.rate}return n*=i},ConvertCartToDefault:function(t,e){var n=nfec.manager.setting.GetTax();return n&&(t/=n/100+1),nfec.manager.currency.Convert(e,nfec.manager.setting.GetCurrency(),t)},IsOn:function(){var t=nfec.manager.setting.Data.m_currency_on,e=nfec.manager.setting.Data.m_currency_codes;return!(!t||!e)},IsRound:function(t){return["BIF","CLP","CVE","DJF","GNF","ISK","JPY","KMF","KRW","PYG","RWF","UGX","UYI","VND","VUV","XAF","XOF","XPF","HUF","BYR","MGA"].indexOf(t)!=-1}},nfec.manager.current_product={Set:function(t){nfec.store.control.Set("c_product",t.toState(),86400,!0)},Get:function(){var t=nfec.store.control.Get("c_product");if(t){var e=new nfec.model.current_product;return e.parseState(t),e}},SetVariantTitle:function(t){var e=nfec.manager.current_product.Get();e&&(e.variant_title=t,nfec.manager.current_product.Set(e))}},nfec.manager.customer={Set:function(t){nfec.store.control.Set("cus",t.toState(),864e4,!0)},Get:function(){var t=nfec.store.control.Get("cus");if(t){var e=new nfec.model.customer;return e.parseState(t),e}},Remove:function(){nfec.store.control.Remove("cus")}},nfec.manager.discountable={Version:0,Reset:function(){nfec.manager.discountable.Version+=1,nfec.manager.discountable.Data={}},Set:function(t,e){e.version=nfec.manager.discountable.Version;var n=nfec.manager.product.FindByID(t);n&&n.applyDiscountable(e)},Get:function(t,e){var n=nfec.manager.product.FindByID(t);if(!n)return null;for(var i=0;i<n.variants.length;i++){var o=n.variants[i],r=o.getDiscountable();if(e){if(e==o.id)return r}else if(r)return r}return null},GetCurrentProductData:function(t){var e,n=nfec.manager.product.GetCurrentProductID();return n?(t&&(e=nfec.manager.product.GetCurrentVariantID()),nfec.manager.discountable.Get(n,e)):null}},nfec.manager.locale={Get:function(){return nfec.store.control.Get("lo")},GetCk:function(){var t=nfec.manager.locale.MyLang;return t=="zh"&&(t="zh-CN"),t},Del:function(){nfec.store.control.Remove("lo")},Set:function(t,e){t=t.toLowerCase(),e=e||864e5,nfec.store.control.Set("lo",t,e,!0)}},nfec.manager.lorder={Set:function(t){t<(nfec.store.control.Get("lordr")||0)||nfec.store.control.Set("lordr",t,864e4,!0)}},nfec.manager.gift={Set:function(t){nfec.store.control.Set("gif",t.toState(),86400,!0)},Get:function(){var t=nfec.store.control.Get("gif"),e=new nfec.model.gifts;return t&&e.parseState(t),e},AddItem:function(t){var e=nfec.manager.gift.Get();e.addItem(t),nfec.manager.gift.Set(e)},FindItem:function(t,e,n){return nfec.manager.gift.Get().findItem(t,e,n)},Remove:function(){nfec.store.control.Remove("gif")}},nfec.manager.recent_views={Set:function(t){nfec.store.control.Set("recent_v",t.toState(),86400,!0)},Get:function(){var t=nfec.store.control.Get("recent_v");if(t){var e=new nfec.model.recent_views;return e.parseState(t),e}},AddFromProduct:function(t){var e=new nfec.model.recent_view;e.id=t.id,e.handle=t.handle;var n=nfec.manager.recent_views.Get()||new nfec.model.recent_views;n.addItem(e),nfec.manager.recent_views.Set(n)},GetProductIDs:function(){var t=nfec.manager.recent_views.Get();if(!t)return[];for(var e=t.getProductIDs(),n=[],i=0;i<e.length;i++){var o=nfec.manager.product.FindByID(e[i]);o&&!o.isHidden()&&n.push(e[i])}return n}},nfec.manager.setting={Data:{},AddBackSettings:function(t,e){t.currency_round=nfec.manager.currency.IsRound(t.currency),jQuery.extend(nfec.manager.setting.Data,t,e),nfec.event_hub.Trigger("core_setting_ready")},IsCurrencyRound:function(){return nfec.manager.setting.Data.currency_round},GetTax:function(){return nfec.manager.setting.Data.tax||0},GetCurrencyFormat:function(){return nfec.manager.setting.Data.currency_format||"${{amount}}"},GetCurrency:function(){return nfec.manager.setting.Data.currency||"USD"},GetPubDomain:function(){return nfec.manager.setting.Data.pub_domain||nfec.manager.setting.Data.shop_domain},GetShopTimezoneOffset:function(){return nfec.manager.setting.Data.timezone_offset||0}},nfec.manager.product={data:{},AddFromJson:function(t){var e,n,i,o,r,c,a;for(e in t)if(t.hasOwnProperty(e)&&!nfec.manager.product.data.hasOwnProperty(e)&&(i=t[e]).i&&!i.no){if((n=new nfec.model.product).variants=[],n.id=i.i,n.title=i.t,n.handle=i.h,n.vendor=i.a,n.tags=i.b,n.product_type=i.c,n.source="json",n.images=[],(c=new nfec.model.product_image).src=i.p,n.image=c,i.d&&(n.body_html=i.d),i.f){if(n.is_premium=!0,n.source="api",i.o)for(var f=0;f<i.o.length;f++)(a=new nfec.model.product_option).id=i.o[f].i,a.name=i.o[f].n,a.position=i.o[f].p,a.values=i.o[f].v,n.options.push(a);if(i.e)for(f=0;f<i.e.length;f++){var l=new nfec.model.product_image;l.id=i.e[f].i,l.src=i.e[f].s,l.position=i.e[f].p,l.variant_ids=i.e[f].v,n.images.push(l)}}else i.p&&n.images.push(c);for(var _=0,u=i.v.length;_<u;_++){if(r=i.v[_],(o=new nfec.model.variant).image=c,r.o)o.image_id=r.o,o.image=n.getImageByID(o.image_id);else{var p=n.getImageByVID(r.i);o.image=p}o.id=r.i,o.position=r.p,o.option1=r.x,o.option2=r.y,o.option3=r.z,o.price=nfec.manager.currency.RoundUp(r.a),o.price==r.a&&window.location.href.indexOf("/checkouts")==-1||(o.price0=r.a),o.compare_at_price=nfec.manager.currency.RoundUp(r.b),n.variants.push(o)}nfec.manager.product.data[e]=n}},addAndMerge:function(t,e){var n=nfec.manager.product.data[t.id];if(n){for(var i=[],o=0;o<n.variants.length;o++){var r=n.variants[o],c=r.getDiscountable(),a=t.getVariantByID(r.id);a&&(c&&(a.discountable=c),r.image_id=a.image_id,r.image=a.image,i.push(a))}e||(t.variants=i),nfec.manager.currency.NotDefault&&(t.variants=n.variants),t.fvariants=n.fvariants}nfec.manager.product.data[t.id]=t},AddProduct:function(t){var e=nfec.manager.product.data[t.id];if(e&&e.source!="api"){for(var n=[],i=0,o=t.variants.length;i<o;i++)e.getVariantByID(t.variants[i].id)&&n.push(t.variants[i]);t.variants=n}nfec.manager.product.addAndMerge(t)},AddCurrentProduct:function(t){nfec.manager.product.addAndMerge(t,1)},FindRaw:function(t){return nfec.manager.product.data[t]},FindByID:function(t){var e=nfec.manager.product.data[t];return e&&e.isAvailable()?e:null},FindByHandle:function(t){var e;for(e in nfec.manager.product.data)if(nfec.manager.product.data.hasOwnProperty(e)&&nfec.manager.product.data[e].handle==t)return nfec.manager.product.data[e];return null},handling:{},GetByHandle:function(t,e){var n=nfec.manager.product.FindByHandle(t);n&&n.source!="json"?e(n):(nfec.manager.product.handling[t]||(nfec.manager.product.handling[t]=[]),nfec.manager.product.handling[t].push(e),nfec.platform.current.product.GetByHandle(t,function(i){i&&nfec.manager.product.AddProduct(i);for(var o=0;o<nfec.manager.product.handling[t].length;o++)nfec.manager.product.handling[t][o](i);nfec.manager.product.handling[t]=[]}))},RemoveSoldoutVariant:function(t,e){t.removeVariant(e)},GetCurrentProductID:function(){var t=nfec.platform.current.page.Detect();if(t.type!=nfec.consta.PageTypeProduct)return 0;var e=t.payload.id;return e||0},GetCurrentVariantID:function(t){var e=nfec.manager.product.GetCurrentProductID();if(e){var n=nfec.manager.product.FindByID(e);if(n){var i=n.current_variant_id;return t&&!i&&(i=n.variants[0].id),i}}}},nfec.manager.country={Get:function(){return nfec.store.control.Get("cc")},Set:function(t,e){t&&(t=t.replace(/"/g,"")),e=e||864e5,nfec.store.control.Set("cc",t,e,!0)},FindByName:function(t){var e=nfec.struct.country;t=t.toLowerCase();for(var n=0;n<e.length;n++)if(e[n].n.toLowerCase().replace(/\s+/g,"")==t)return e[n].c;return null}},nfec.model={},nfec.model.cart=function(){this.token="",this.note="",this.items=[],this.attributes={},this.n_p=0,this.n_o_p=0,this.findItemIndex=function(t,e){for(var n=0,i=this.items.length;n<i;n++)if(this.items[n].product_id==t&&this.items[n].variant_id==e)return n;return-1},this.getProductIDs=function(){for(var t=[],e=0,n=this.items.length;e<n;e++)t.indexOf(this.items[e].product_id)==-1&&t.push(this.items[e].product_id);return t},this.getVariantIDs=function(){for(var t,e=[],n=0,i=this.items.length;n<i;n++)t=this.items[n],e.push(t.variant_id);return e},this.getAllItems=function(){for(var t,e=[],n=0,i=0,o=this.items.length;i<o;i++)if(!((t=this.items[i]).title=="Item Customizations"&&1e3<t.quantity))for(var r=0;r<t.quantity;r++)n++,e.push({uid:t.variant_id+"_"+n,product_id:t.product_id,variant_id:t.variant_id,price:t.price,is_sub:t.is_sub});return nfec.manager.setting.Data.cheap_mode&&e.sort(function(c,a){return c.price>a.price?1:-1}),e},this.getAllTrackVariantIDs=function(){for(var t,e=[],n=0,i=this.items.length;n<i;n++){t=this.items[n];for(var o=0;o<t.quantity;o++)e.push(t.variant_id)}return e},this.getTrackVariantIDs=function(t){for(var e,n=[],i=0,o=this.items.length;i<o;i++)if(e=this.items[i],t.indexOf(e.variant_id)!=-1)for(var r=0;r<e.quantity;r++)n.push(e.variant_id);return n},this.findItemByVariant=function(t,e,n){n=n||0;for(var i=0,o=0,r=this.items.length;o<r;o++)if(this.items[o].product_id==t&&this.items[o].variant_id==e)for(var c=0;c<this.items[o].quantity;c++){if(i===n)return this.items[o];i++}return null},this.findItemByVariantID=function(t){for(var e=0,n=this.items.length;e<n;e++)if(this.items[e].variant_id==t)return this.items[e];return null},this.findItemByVariantIDs=function(t){for(var e=[],n=0,i=this.items.length;n<i;n++)t.indexOf(this.items[n].variant_id)!=-1&&e.push(this.items[n]);return e},this.findItemsByVIDs=function(t,e){for(var n=[],i=0,o=this.items.length;i<o;i++)t.indexOf(this.items[i].product_id)!=-1&&(e&&e.length&&e.indexOf(this.items[i].variant_id)==-1||n.push(this.items[i]));return n},this.findVariantIDsByVIDs=function(t,e){for(var n=[],i=0,o=this.items.length;i<o;i++)t.indexOf(this.items[i].product_id)!=-1&&(e&&e.length&&e.indexOf(this.items[i].variant_id)==-1||n.push(this.items[i].variant_id));return n},this.countByVIDs=function(t){for(var e=0,n=0,i=this.items.length;n<i;n++)t.indexOf(this.items[n].variant_id)!=-1&&(e+=this.items[n].quantity);return e},this.findItemByProduct=function(t){for(var e=0,n=this.items.length;e<n;e++)if(this.items[e].product_id==t)return this.items[e];return null},this.findItemsByProduct=function(t){for(var e=[],n=0,i=this.items.length;n<i;n++)this.items[n].product_id==t&&e.push(this.items[n]);return e},this.compareWithState=function(t){for(var e,n,i,o,r={added:[],removed:[]},c={},a=0,f=this.items.length;a<f;a++)c[(e=this.items[a]).variant_id]||(c[e.variant_id]=1,i=t.countByVIDs([e.variant_id]),o=this.countByVIDs([e.variant_id]),e.quantity_changed=o-i,0<e.quantity_changed&&r.added.push(e),e.quantity_changed<0&&r.removed.push(e));for(a=0,f=t.items.length;a<f;a++)n=t.items[a],this.findItemByVariant(n.product_id,n.variant_id)||(n.quantity_changed=-n.quantity,r.removed.push(n));return r},this.getTotalPrice=function(t){for(var e=0,n=0,i=this.items.length;n<i;n++)t&&(this.items[n].gift_card||this.items[n].is_sub)||(e+=this.items[n].price*this.items[n].quantity);return e},this.getTotalAddeds=function(t){for(var e=0,n=0,i=this.items.length;n<i;n++)t&&t.indexOf(this.items[n].product_id)==-1||(e+=this.items[n].quantity);return e},this.countVoP=function(t,e){for(var n,i=0,o=0,r=this.items.length;o<r;o++)n=this.items[o],(t.length||e.length)&&t.indexOf(n.product_id)==-1&&e.indexOf(n.variant_id)==-1||(i+=n.quantity);return i},this.getProductVariantMap=function(){for(var t,e={},n=0,i=this.items.length;n<i;n++)e[(t=this.items[n]).product_id]||(e[t.product_id]=[]),e[t.product_id].push(t.variant_id);return e},this.updateItem=function(t){for(var e=0,n=this.items.length;e<n;e++)if(this.items[e].product_id==t.product_id&&this.items[e].variant_id==t.variant_id)return void(this.items[e].quantity=t.quantity);this.items.unshift(t)},this.removeOneItem=function(t){for(var e=[],n=!1,i=0,o=this.items.length;i<o;i++)n||this.items[i].product_id!=t.product_id||this.items[i].variant_id!=t.variant_id?e.push(this.items[i]):(this.items[i].quantity-=1,0<this.items[i].quantity&&e.push(this.items[i]),n=!0);this.items=e},this.addOneItem=function(t){t.quantity=1;for(var e=0,n=this.items.length;e<n;e++)if(this.items[e].product_id==t.product_id&&this.items[e].variant_id==t.variant_id)return void(this.items[e].quantity+=1);this.items.push(t)},this.parseState=function(t){var e=JSON.parse(t);if(this.token=e.t||"",this.items=[],e.i)for(var n,i=0,o=e.i.length;i<o;i++)(n=new nfec.model.cart_item).parseState(e.i[i]),this.items.push(n)},this.toState=function(){for(var t={t:this.token,i:[]},e=0,n=this.items.length;e<n;e++)t.i.push(this.items[e].toState());return JSON.stringify(t)},this.getLastItem=function(){return this.items[0]},this.isRecharge=function(){for(var t,e=0,n=this.items.length;e<n;e++)if((t=this.items[e]).is_sub||t.properties&&t.properties.shipping_interval_frequency)return!0;return!1},this.isBoldS=function(){for(var t,e=0,n=this.items.length;e<n;e++)if((t=this.items[e]).is_sub||t.properties&&t.properties.frequency_num)return!0;return!1},this.getTotalPriceByPV=function(t,e){for(var n,i=0,o=0;o<this.items.length;o++)n=this.items[o],t&&t.length&&t.indexOf(n.product_id)==-1||e&&e.length&&e.indexOf(n.variant_id)==-1||(i+=n.price*n.quantity);return i}},nfec.model.address=function(){this.address="",this.city="",this.company="",this.country_code="",this.province="",this.province_code="",this.street="",this.zip="",this.fromJson=function(t){t&&(this.address=t.address1+" "+t.address2,this.city=t.city,this.company=t.company,this.country_code=t.country_code,this.province=t.province,this.province_code=t.province_code,this.street=t.street,this.zip=t.zip)},this.parseState=function(t){this.address=t.a,this.city=t.c,this.company=t.co,this.country_code=t.cc,this.province=t.p,this.province_code=t.pc,this.street=t.s,this.zip=t.z},this.toState=function(){return{a:this.address,c:this.city,cc:this.country_code,co:this.company,p:this.province,pc:this.province_code,s:this.street,z:this.zip}}},nfec.model.cart_item=function(){this.id=0,this.properties=null,this.variant_id=0,this.variant_title="",this.title="",this.image="",this.price=0,this.quantity=0,this.sku="",this.product_title="",this.product_id=0,this.handle="",this.url="",this.quantity_changed=0,this.gift_card=!1,this.is_sub=!1,this.getTitle=function(){return nfec.util.tpl.ToCustomTrans(this.title)},this.toState=function(){return{p:this.product_id,v:this.variant_id,q:this.quantity}},this.parseState=function(t){this.product_id=t.p,this.variant_id=t.v,this.quantity=t.q},this.mediumImageSrc=function(){return nfec.platform.current.element.GetImageSrcBySize(this.image,"medium")}},nfec.model.current_product=function(){this.id=0,this.product_type="",this.tags="",this.vendor="",this.title="",this.price=0,this.collections=[],this.variant_title=null,this.fromProduct=function(t){this.id=t.id,this.product_type=t.product_type,this.tags=t.tags,this.vendor=t.vendor,this.title=t.title,this.price=t.getMaxPrice(),this.collections=[]},this.parseState=function(t){var e=JSON.parse(t);this.product_type=e.pt,this.tags=e.ta,this.vendor=e.v,this.collections=e.c,this.title=e.t,this.variant_title=e.o,this.id=e.i,this.price=e.p},this.toState=function(){var t={i:this.id,p:this.price,pt:this.product_type,ta:this.tags,v:this.vendor,c:this.collections,t:this.title,o:this.variant_title};return JSON.stringify(t)}},nfec.model.customer=function(){this.id=0,this.email="",this.name="",this.tags="",this.total_spent=0,this.orders_count=0,this.phone="",this.orders=[],this.address=new nfec.model.address,this.parseState=function(t){var e=JSON.parse(t);this.id=e.i,this.email=e.e,this.name=e.n,this.tags=e.t,this.total_spent=e.s,this.orders_count=e.c,this.phone=e.p,this.orders=e.o;var n=new nfec.model.address;n.parseState(e.a),this.address=n},this.toState=function(){var t={i:this.id,e:this.email,n:this.name,t:this.tags,s:this.total_spent,c:this.orders_count,p:this.phone,o:this.orders,a:this.address.toState()};return JSON.stringify(t)}},nfec.model.currency=function(){this.code="",this.flag="",this.symbol="",this.rate=1,this.decimal=2,this.format="${{ amount }}",this.formatString="",this.toState=function(){var t={i:this.code,s:this.symbol,fl:this.flag,r:this.rate,d:this.decimal,f:this.format};return JSON.stringify(t)},this.fromJSON=function(t){this.code=t.i,this.symbol=t.s,this.flag=t.fl,this.rate=t.r,this.decimal=t.d,this.format=t.f||"${{ amount }}",this.formatString=this.format},this.parseState=function(t){var e=JSON.parse(t);this.fromJSON(e)},this.getNum=function(t){if(this.formatString){var e=this.formatString.split("{{");if(t=t.replace(e[0],""),e[1]){var n=e[1].split("}}");t=t.replace(n[1],"")}this.formatString.indexOf("comma")!=-1&&(t=(t=t.replace(/\./g,"")).replace(/\,/g,"."))}return t=t.replace(/[^0-9.]/g,""),t=parseFloat(t)}},nfec.model.discountable=function(){this.discount_type=0,this.discount_value=null,this.is_cart=!1,this.offer_id=0,this.offer_type_id=0,this.app_id=0,this.product_id=0,this.version=0,this.message="",this.vids=[],this.hasMessage=function(){return this.message?1:0},this.getDiscountedPrice=function(t){return this.calculateDiscountedPrice(t)},this.isNormalDiscount=function(){return[nfec.consta.DiscountTypeValue,nfec.consta.DiscountTypePercent].indexOf(this.discount_type)!=-1},this.calculateDiscountedPrice=function(t){switch(this.discount_type){case nfec.consta.DiscountTypeValue:var e=t;return nfec.manager.setting.IsCurrencyRound()?e=Math.round(e-Math.floor(this.discount_value)):e-=this.discount_value,e<0?0:e;case nfec.consta.DiscountTypePercent:return nfec.manager.setting.IsCurrencyRound()?Math.round(t-Math.floor(t*this.discount_value/100)):t*(100-this.discount_value)/100;default:return t}},this.firstFreeGiftID=function(){return this.freeGiftIDs()[0]},this.freeGiftIDs=function(){for(var t=this.discount_value?this.discount_value.split(","):[],e=[],n=0;n<t.length;n++)e.push(parseInt(t[n]));return e}},nfec.model.gift=function(){this.variant_id=0,this.product_id=0,this.offer_id=0,this.offer_type_id=0,this.app_id=0,this.toState=function(){return{v:this.variant_id,p:this.product_id,oi:this.offer_id,ot:this.offer_type_id,a:this.app_id}},this.parseState=function(t){this.variant_id=t.v,this.product_id=t.p,this.offer_id=t.oi,this.offer_type_id=t.ot,this.app_id=t.a}},nfec.model.gifts=function(){this.items=[],this.addItem=function(t){for(var e,n=0;n<this.items.length;n++)if((e=this.items[n]).app_id==t.app_id&&e.offer_type_id==t.offer_type_id&&e.offer_id==t.offer_id)return void(this.items[n]=t);this.items.push(t)},this.findItem=function(t,e,n){for(var i,o=0;o<this.items.length;o++)if((i=this.items[o]).app_id==t&&i.offer_type_id==e&&i.offer_id==n)return i;return null},this.parseState=function(t){var e=JSON.parse(t);if(this.items=[],e.i)for(var n,i=0,o=e.i.length;i<o;i++)(n=new nfec.model.gift).parseState(e.i[i]),this.items.push(n)},this.toState=function(){for(var t={i:[]},e=0,n=this.items.length;e<n;e++)t.i.push(this.items[e].toState());return JSON.stringify(t)}},nfec.model.product_image=function(){this.id=0,this.position=0,this.src="",this.variant_ids=[],this.smallSrc=function(){return nfec.platform.current.element.GetImageSrcBySize(this.src,"small")},this.mediumSrc=function(){var t=nfec.manager.setting.Data.img_size||"medium";return nfec.platform.current.element.GetImageSrcBySize(this.src,t)},this.largeSrc=function(){return nfec.platform.current.element.GetImageSrcBySize(this.src,"large")},this.grandeSrc=function(){return nfec.platform.current.element.GetImageSrcBySize(this.src,"grande")}},nfec.model.product_option=function(){this.id=0,this.name="",this.position=0,this.values=[]},nfec.model.recent_view=function(){this.id=0,this.handle="",this.toState=function(){return{i:this.id,h:this.handle}},this.parseState=function(t){this.id=t.i,this.handle=t.h}},nfec.model.recent_views=function(){this.items=[],this.getProductIDs=function(){for(var t=this.items.length,e=[],n=0;n<t;n++)e.push(this.items[n].id);return e},this.addItem=function(t){var e=[t],n=this.items.length;8<n&&(n=8);for(var i=0;i<n;i++)this.items[i].id!=t.id&&e.push(this.items[i]);this.items=e},this.parseState=function(t){var e=JSON.parse(t);if(this.items=[],e.i)for(var n,i=0,o=e.i.length;i<o;i++)(n=new nfec.model.recent_view).parseState(e.i[i]),this.items.push(n)},this.toState=function(){for(var t={i:[]},e=0,n=this.items.length;e<n;e++)t.i.push(this.items[e].toState());return JSON.stringify(t)}},nfec.model.product=function(){this.id=0,this.title="",this.body_html="",this.handle="",this.vendor="",this.product_type="",this.tags="",this.created_at=0,this.options=[],this.variants=[],this.images=[],this.image={},this.source="",this.unavailable=!1,this.current_variant_id=0,this.is_premium=!1,this.getDes=function(){return this.body_html?this.body_html.replace("[/shortdesc]","").replace("[shortdesc]",""):""},this.getTitle=function(){var t=this.title,e=nfec.util.customPT;return e&&(t=e(this)),nfec.util.tpl.ToCustomTrans(t)},this.getMaxPrice=function(){for(var t=0,e=0;e<this.variants.length;e++)this.variants[e].price>t&&(t=this.variants[e].price);return t},this.isHidden=function(){if(this.is_premium)return!1;if(!this.getMaxPrice())return!0;var t=this.tags;if(!t)return!1;if(t.search(/hide/i)!=-1)return!0;for(var e=["tdf_bundle_","no_add_to_cart","no_purchase"],n=0;n<e.length;n++)if(t.indexOf(e[n])!=-1)return!0;return!1},this.url=function(){var t=nfec.platform.current.product.GetUrl(this.handle),e=nfec.manager.locale.Get();return e&&location.href.indexOf("/"+e+"/")!=-1&&(t="/"+e+t),t},this.isAvailable=function(){return!this.unavailable&&!!this.variants.length},this.current_sale_variant=function(){if(this.current_variant_id&&(e=this.getVariantByID(this.current_variant_id)).is_discountable())return e;for(var t=0;t<this.variants.length;t++){var e;if((e=this.variants[t]).is_discountable())return e}return this.variants[0]},this.hasImage=function(){return 0<this.images.length},this.applyDiscountable=function(t){for(var e=0,n=this.variants.length;e<n;e++)if(!t.vids||!t.vids.length||t.vids.indexOf(this.variants[e].id)!=-1){var i=this.variants[e].getDiscountable();if(i&&(i.offer_type_id>t.offer_type_id||i.offer_type_id==t.offer_type_id&&i.isNormalDiscount()&&(i.discount_type!=t.discount_type||i.discount_value>t.discount_value)))continue;this.variants[e].discountable=t}},this.getVariantByID=function(t){for(var e=0,n=this.variants.length;e<n;e++)if(this.variants[e].id==t)return this.variants[e];return null},this.getVariantIDs=function(){for(var t=[],e=0,n=this.variants.length;e<n;e++)t.push(this.variants[e].id);return t},this.filterVarIDs=function(t,e){if(!t||!t.length)return this.getVariantIDs();for(var n,i=[],o=0,r=this.variants.length;o<r;o++)n=this.variants[o],t.indexOf(n.id)!=-1&&i.push(n.id);return e&&!i.length?this.getVariantIDs():i},this.filterVars=function(t,e){if(!t||!t.length)return this.variants;for(var n,i=[],o=0,r=this.variants.length;o<r;o++)n=this.variants[o],t.indexOf(n.id)!=-1&&i.push(n);return e&&!i.length?this.variants:i},this.variantMap=function(){for(var t={},e=0,n=this.variants.length;e<n;e++){var i=this.variants[e];t[i.id]=i}return t},this.getImageByID=function(t){for(var e=0,n=this.images.length;e<n;e++)if(this.images[e].id==t)return this.images[e];return this.image},this.getImageByVID=function(t){for(var e=0,n=this.images.length;e<n;e++){var i=this.images[e].variant_ids;if(i&&i.indexOf(t)!=-1)return this.images[e]}return this.image},this.getOptionByPosition=function(t){for(var e=0,n=this.options.length;e<n;e++)if(this.options[e].position==t)return this.options[e];return null},this.getAvailableOptions=function(){var t,e,n={};t:for(var i=0,o=this.variants.length;i<o;i++)for(var r=1;r<4;r++){if(e=this.variants[i]["option"+r],!n[r]){if(!(t=this.getOptionByPosition(r)))continue t;n[r]=new nfec.model.product_option,n[r].position=r,n[r].name=t.name,n[r].values=[]}n[r].values.indexOf(e)===-1&&n[r].values.push(e)}return n},this.getAvailableOptionsForOptionValue=function(t,e){for(var n,i,o={},r=0,c=this.variants.length;r<c;r++)if((i=this.variants[r]["option"+t])==e){for(var a=1;a<4;a++)if(a!=t&&(i=this.variants[r]["option"+a])!==void 0){if(!o[a]){if(!(n=this.getOptionByPosition(a)))break;o[a]=new nfec.model.product_option,o[a].position=a,o[a].name=n.name,o[a].values=[]}o[a].values.indexOf(i)===-1&&o[a].values.push(i)}}return o},this.getVariantByOptionValues=function(t){var e;t:for(var n=0,i=this.variants.length;n<i;n++){for(e in t)if(t.hasOwnProperty(e)&&t[e]!=this.variants[n]["option"+e])continue t;return this.variants[n]}return null},this.removeVariant=function(t){for(var e=[],n=0,i=this.variants.length;n<i;n++)this.variants[n].id!=t&&e.push(this.variants[n]);this.variants=e},this.getOptionsDisplayType=function(){if(nfec.manager.setting.Data.qv_sel_option)return nfec.consta.OptionDisplayTypeSelect;var t,e=this.getAvailableOptions(),n=1;for(t in e)e.hasOwnProperty(t)&&(n*=e[t].values.length);return this.variants.length/n<.7?nfec.consta.OptionDisplayTypeSelect:nfec.consta.OptionDisplayTypeCheckboxs}},nfec.model.variant=function(){this.id=0,this.title="",this.option1="",this.option2="",this.option3="",this.sku="",this.available=!0,this.price=0,this.compare_at_price=0,this.position=1,this.product_id=0,this.grams=0,this.image_id=0,this.image={},this.discountable=null,this.getTitle=function(){if(this.title)return nfec.util.tpl.ToCustomTrans(this.title);for(var t=[],e=1;e<4;e++)this["option"+e]&&t.push(nfec.util.tpl.ToCustomTrans(this["option"+e]));return t.join(" ")},this.getDiscountable=function(){if(this.discountable&&this.discountable.version==nfec.manager.discountable.Version)return this.discountable},this.is_discountable=function(){return!!this.getDiscountable()},this.display_price=function(){return this.getDiscountable()?this.discountable.getDiscountedPrice(this.price):this.price},this.display_old_price=function(){var t=this.display_price();return!nfec.manager.setting.Data.no_cpa_price&&(!window.dsqion||nfec.manager.setting.Data.y_cpa)&&this.compare_at_price>this.price?this.compare_at_price:this.price>t?this.price:0}},nfec.loading={},nfec.loading.control={countLoading:0,idLoading:0,Start:function(t){this.countLoading+=1,this.idLoading&&clearTimeout(this.idLoading),jQuery("#tdf_loading").length||jQuery("body").prepend('<div id="tdf_loading" class="animated yt_loader progress_loader"></div>'),t=t||25e3,this.idLoading=setTimeout(function(){nfec.loading.control.countLoading=0,nfec.loading.control.Stop()},t)},Stop:function(){this.countLoading+=-1,this.countLoading<=0&&(this.countLoading=0,clearTimeout(this.idLoading),this.idLoading=0,jQuery("body").prepend('<div id="tdf_full_loading" class="progress_loader" style="width: 100%"></div>'),jQuery("#tdf_loading").remove(),setTimeout(function(){jQuery("#tdf_full_loading").remove()},400))}},nfec.noti={},nfec.noti.control={id:1,getId:function(){return this.id+=1,this.id},Start:function(){nfec.event_hub.ListenTo("close_noti",function(t,e){nfec.noti.control.Close(e.els.data("id"))})},Run:function(t,e){jQuery("#tdf_notifies").length||jQuery("body").first().append('<div id="tdf_notifies" class="tdf_container"></div>');var n=jQuery("#tdf_notifies"),i=this.getId();n.append(nfec.util.tpl.RenderTpl(nfec.noti.tplhtm,{id:i,message:t})),n.css("display","block");var o=jQuery("#my_notify_"+i);jQuery(".tdf_notify_close",o).css({height:o.height()+"px",lineHeight:o.height()+"px"});var r=nfec.util.tool.GetReadT(t);if(e!==void 0){if(!e)return;r=e}setTimeout(function(){nfec.noti.control.Close(i)},r)},Close:function(t){var e=jQuery("#tdf_notify_"+t);e.slideUp(),setTimeout(function(){e.remove()},500)}},nfec.noti.tplhtm={m:'<div id="tdf_notify_{{id}}" class="tdf_notify"><a class="tdf_notify_close tdfe" data-e="close_noti" href="javascript:;" data-id="{{id}}">&times;</a><div class="tdf_notify_content"> {{message.toTranslate}} </div></div>',subs:[]},nfec.start={},nfec.start.cartform={Start:function(){if(nfec.platform.current.page.Detect().type==nfec.consta.PageTypeCart&&!window.nocartcheck){var t=jQuery(sl9.nfec.platform.current.element.GetCartForms()),e="t-serial-data",n=function(i,o){var r,c,a=i.attr(e),f=i.serialize();if(i.attr(e,f),a)return a!=f?((c=(r=i).attr("toid"))&&clearTimeout(c),c=setTimeout(function(){jQuery.ajax({type:"POST",url:nfec.main.PRo+"cart",data:r.serialize(),success:function(l){}})},2e3),void r.attr("toid",c)):void 0};t.each(function(){var i=jQuery(this);setTimeout(function(){i.attr(e,i.serialize())},100),i.find("select").on("change",function(){n(i)}),i.find("input,textarea").on("input",function(){isNaN($(this).val()),n(i)}),i.on("click",function(){setTimeout(function(){n(i)},10)})})}}},nfec.start.dom={Start:function(){jQuery(".globomenu-btn").closest("form").addClass("formignore"),window.onresize=function(){nfec.event_hub.Trigger("window_resize",{})},window.onpageshow||(window.onpageshow=function(t){t.persisted&&(nfec.start.redirect.IsProcessCheckout=!1)}),jQuery(document).on("click",".tdf_ec",function(t){var e=jQuery(this);e.prop("tagName")=="A"&&t.preventDefault(),nfec.event_hub.Trigger(e.data("e"),{els:e,event:t})}),nfec.util.tool.WaitToLoad(["Privy"],function(){setTimeout(function(){nfec.start.request_listener.Start(1)},5e3),Privy.vent&&Privy.vent.on&&Privy.vent.on("display:shown",function(){setTimeout(function(){jQuery(".tdf_dialog_modal").length&&jQuery(".privy-x").trigger("click")},300)})}),setTimeout(function(){if(window.Shopify&&Shopify.checkout&&Shopify.checkout.created_at){var t=Math.floor(new Date(Shopify.checkout.created_at).getTime()/1e3);nfec.manager.lorder.Set(t)}},10)}},nfec.start.pagescroll={Start:function(){var t=window.pageYOffset/90,e=window.onscroll;window.onscroll=function(){if(e)try{e()}catch(o){}var i=parseInt(window.pageYOffset/90);i<=t||(t=i,nfec.event_hub.Trigger("page_scroll",{}))};var n=location.href;jQuery(document).on("click",function(){var i=location.href;n!=i&&(n=i,setTimeout(function(){nfec.event_hub.Trigger("url_change",{})},2e3),setTimeout(function(){nfec.event_hub.Trigger("url_change",{})},5e3))})}},nfec.start.preload={Start:function(){var t=nfec.platform.shopify.element.GetCartMiniIcon(),e=jQuery(t);if(e.addClass("tdf_cart_icon"),e.on("click",function(){nfec.event_hub.Trigger("reload_cart",{})}),!nfec.store.control.Get("plo")){nfec.store.control.Set("plo",1,864e3,!0);for(var n,i=[nfec.util.request.GetCDN()+"/fe/nfec/img/background_bg.png"],o=0;o<i.length;o++)n=i[o],new Image().src=n}}},nfec.start.redirect={Start:function(){var t;window.onbeforeunload=function(){nfec.start.redirect.unload=1},nfec.event_hub.ListenTo("close_popup",function(){if(t)setTimeout(function(){nfec.start.redirect.IsProcessCheckout||nfec.start.redirect.Is2Cart||nfec.util.tool.Reload()},150);else if(nfec.platform.current.page.Detect().type==nfec.consta.PageTypeCart){var n=nfec.manager.cart.Get(),i=nfec.manager.cart.GetCartAtStart(),o=n.compareWithState(i);(o.added.length||o.removed.length)&&nfec.util.tool.Reload()}});var e=0;sl9.nfec.event_hub.ListenTo("showing_gift",function(){var n=new Date;e=n.getTime()}),nfec.event_hub.ListenTo("cart_item_added",function(n,i){if(i.is_tdf&&nfec.platform.current.page.Detect().type==nfec.consta.PageTypeCart){var o=new Date;setTimeout(function(){!jQuery(".tdf_dialog_modal").length&&o.getTime()>e&&nfec.util.tool.Reload()},1200)}}),nfec.event_hub.ListenTo("need_reload_page",function(){t=!0},!0)}},nfec.start.request_listener={Start:function(t){if(t){if(window.PrivyLoaded)return}else window.Privy&&(window.PrivyLoaded=1);var e=0;if(window.XMLHttpRequest){window.xhook&&window.xhook.XMLHttpRequest&&!t&&(window.XMLHttpRequest=window.xhook.XMLHttpRequest);var n=window.XMLHttpRequest.prototype.send,i=window.XMLHttpRequest.prototype.open;if(window.XMLHttpRequest.prototype.open=function(a,f,l,_,u){return this._tdfmethod=a,this._tdfurl=f||"",this._url||(this._url=f||""),i.apply(this,arguments)},!t){window.XMLHttpRequest.prototype.send=function(a){if(this._url){if(this._url.indexOf("/cart")==-1)return n.apply(this,arguments);if(this._url.indexOf("/cart.js?_=")!=-1&&16<e)return n.apply(this,arguments);if(120<e)return n.apply(this,arguments)}e++,this.onreadystatechange&&!this._tdfonreadystatechange&&(this._tdfonreadystatechange=this.onreadystatechange),this.onreadystatechange=c,this._tdfdata=a||{};var f,l=this,_=0;return f=setInterval(function(){if(l.readyState==4&&l.status==200)return r(l),void clearInterval(f);20<=++_&&clearInterval(f)},300),n.apply(this,arguments)};var o=window.fetch;typeof o=="function"&&(window.fetch=function(){var a=arguments;return o.apply(this,Array.prototype.slice.call(arguments)).then(function(f){if(!f||!f.ok||!f.url||f.url.indexOf("/cart")==-1)return f;try{var l="GET",_="";if(a[1]&&(a[1].method&&(l=a[1].method),_=a[1].body),_)try{_=JSON.parse(_)}catch(p){_={}}else _={};if(f.url.indexOf("/cart?view=")!==-1)nfec.event_hub.Trigger("request_complete",{location:nfec.util.tool.GetLocation(f.url),query:nfec.util.tool.GetURLParams(f.url),method:l,data:{},responseText:"{}",responseJSON:{},isTdf:!1,isReplace:!1});else{var u=f.clone();setTimeout(function(){u.json().then(function(p){nfec.event_hub.Trigger("request_complete",{location:nfec.util.tool.GetLocation(f.url),query:nfec.util.tool.GetURLParams(f.url),method:l,data:_,responseText:"{}",responseJSON:p,isTdf:!1,isReplace:!1})}).catch(function(p){console.log("Req ",p)})},100)}}catch(p){console.log(p)}return f})})}}function r(a){a.tdf_request_completed||(a.tdf_request_completed=1,nfec.event_hub.Trigger("request_complete",{location:nfec.util.tool.GetLocation(a._tdfurl),query:nfec.util.tool.GetURLParams(a._tdfurl),method:a._tdfmethod,data:a._tdfdata,responseText:a.responseText,responseJSON:a.responseJSON,isTdf:a._istdf,isReplace:a._isreplace}))}function c(){if(this.readyState==4&&this.status==200&&r(this),this._tdfonreadystatechange)return this._tdfonreadystatechange.apply(this,arguments)}}},nfec.start.variantform={Start:function(){nfec.event_hub.ListenTo("product_ready",function(){var t=nfec.platform.current.page.Detect();if(t.type==nfec.consta.PageTypeProduct){var e=t.payload.id;if(e&&nfec.manager.product.FindByID(e)){var n=nfec.platform.current.element.GetAddCartForms(!0),i=function(){var o=n.find('[name="id"],[name="id[]"]').first(),r="tdf-old-val",c=o.val()||window.currentVariantID;if(c&&(c=parseInt(c)),o.attr(r)!=c){o.attr(r,c);var a=nfec.manager.product.FindByID(e);a.getVariantByID(c)&&(a.current_variant_id=c,nfec.event_hub.Trigger("store_form_change_variant",{variant_id:c,product_id:e}))}};n.find("select,input").on("change",function(){jQuery(this).closest(".tdf_container").length||setTimeout(function(){i()},300)}),n.on("mousedown touchstart",function(o){jQuery(o.target).closest(".tdf_container").length||setTimeout(function(){i()},300)}),i()}}})}},nfec.store={},nfec.store._localstore={cleaned:!1,Get:function(t){return localStorage.getItem(t)},Set:function(t,e,n){try{if(localStorage.setItem(t,e),n){var i=new Date;localStorage.setItem("et_"+t,Math.round(i.getTime()/1e3+n))}}catch(o){localStorage.clear()}},Remove:function(t){localStorage.removeItem(t),localStorage.removeItem("et_"+t)},RemoveByPrefix:function(t){if(window.nfecParams.supportLocalStorage)for(var e=0;e<localStorage.length;e++)localStorage.key(e).indexOf(t)!==-1&&localStorage.removeItem(localStorage.key(e))},Clean:function(){if(!this.cleaned){var t;this.cleaned=!0;for(var e=0;e<localStorage.length;e++)(t=localStorage.key(e))&&t.indexOf("et_nf_")===0&&parseInt(localStorage.getItem(t))<Date.now()/1e3&&(localStorage.removeItem(t),localStorage.removeItem(t.substr(3)));localStorage.removeItem("bk_ss")}}},nfec.store._cookie={Set:function(t,e,n){var i=new Date;i.setTime(i.getTime()+1e3*n);var o="expires="+i.toUTCString();document.cookie=t+"="+e+";"+o+";path=/"},Get:function(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];o.charAt(0)===" ";)o=o.substring(1);if(o.indexOf(e)===0)return o.substring(e.length,o.length)}return""},Remove:function(t){this.Set(t,"",-1)}},nfec.store.control={prefix:"nf_",db:{},Set:function(t,e,n,i,o){var r=this.getKey(t,o);n=n||86400,nfec.store.control.IsSupportLocalStorage?nfec.store._localstore.Set(r,e,n):i&&nfec.store._cookie.Set(r,e,n),nfec.store.control.db[r]=e},Remove:function(t,e){var n=this.getKey(t,e);nfec.store.control.IsSupportLocalStorage?nfec.store._localstore.Remove(n):nfec.store._cookie.Remove(n),delete nfec.store.control.db[n]},Get:function(t,e){var n=this.getKey(t,e);if(nfec.store.control.IsSupportLocalStorage)return nfec.store._localstore.Get(n);var i=nfec.store._cookie.Get(n);return i||nfec.store.control.db[n]},getKey:function(t,e){return e?t:this.prefix+t},checkSupportLocalStorage:function(){var t="test";try{localStorage.setItem(t,t),localStorage.removeItem(t),nfec.store.control.IsSupportLocalStorage=!0}catch(e){nfec.store.control.IsSupportLocalStorage=!1}},Start:function(){this.checkSupportLocalStorage(),nfec.store.control.IsSupportLocalStorage&&nfec.store._localstore.Clean()}},nfec.struct={},nfec.struct.currency={BD:"BDT",EU:"EUR",BE:"EUR",BL:"EUR",RE:"EUR",GR:"EUR",GP:"EUR",GF:"EUR",PT:"EUR",PM:"EUR",EE:"EUR",IT:"EUR",ES:"EUR",ME:"EUR",MF:"EUR",MC:"EUR",MT:"EUR",MQ:"EUR",FR:"EUR",FI:"EUR",NL:"EUR",XK:"EUR",CY:"EUR",SK:"EUR",SI:"EUR",SM:"EUR",DE:"EUR",YT:"EUR",LV:"EUR",LU:"EUR",TF:"EUR",VA:"EUR",AD:"EUR",AT:"EUR",AX:"EUR",IE:"EUR",BF:"XOF",BJ:"XOF",GW:"XOF",ML:"XOF",NE:"XOF",CI:"XOF",SN:"XOF",TG:"XOF",BG:"BGN",BA:"BAM",BB:"BBD",NC:"XPF",WF:"XPF",PF:"XPF",BM:"BMD",BN:"BND",BO:"BOB",BH:"BHD",BI:"BIF",BT:"BTN",JM:"JMD",NO:"NOK",BV:"NOK",SJ:"NOK",BW:"BWP",WS:"WST",US:"USD",BQ:"USD",TL:"USD",GU:"USD",SV:"USD",PR:"USD",PW:"USD",EC:"USD",MH:"USD",MP:"USD",IO:"USD",FM:"USD",VG:"USD",UM:"USD",TC:"USD",VI:"USD",AS:"USD",BR:"BRL",BS:"BSD",GB:"GBP",JE:"GBP",GS:"GBP",GG:"GBP",IM:"GBP",BY:"BYR",BZ:"BZD",RU:"RUB",RW:"RWF",RS:"RSD",TM:"TMT",TJ:"TJS",RO:"RON",NZ:"NZD",TK:"NZD",PN:"NZD",NU:"NZD",CK:"NZD",GT:"GTQ",GQ:"XAF",GA:"XAF",CM:"XAF",CG:"XAF",CF:"XAF",TD:"XAF",JP:"JPY",GY:"GYD",GE:"GEL",GD:"XCD",MS:"XCD",KN:"XCD",DM:"XCD",LC:"XCD",VC:"XCD",AG:"XCD",AI:"XCD",GN:"GNF",GM:"GMD",DK:"DKK",GL:"DKK",FO:"DKK",GI:"GIP",GH:"GHS",OM:"OMR",TN:"TND",JO:"JOD",HR:"HRK",HT:"HTG",HU:"HUF",HK:"HKD",HN:"HNL",AU:"AUD",HM:"AUD",NF:"AUD",NR:"AUD",CC:"AUD",CX:"AUD",KI:"AUD",TV:"AUD",VE:"VEF",PS:"ILS",PY:"PYG",IQ:"IQD",PA:"PAB",PG:"PGK",PE:"PEN",PK:"PKR",PH:"PHP",PL:"PLN",ZM:"ZMK",EH:"MAD",EG:"EGP",ZA:"ZAR",VN:"VND",SB:"SBD",ET:"ETB",SO:"SOS",ZW:"ZWL",SA:"SAR",ER:"ERN",MD:"MDL",MG:"MGA",MA:"MAD",UZ:"UZS",MM:"MMK",MO:"MOP",MN:"MNT",MK:"MKD",MU:"MUR",MW:"MWK",MV:"MVR",MR:"MRO",UG:"UGX",TZ:"TZS",MY:"MYR",MX:"MXN",IL:"ILS",SH:"SHP",FJ:"FJD",FK:"FKP",NI:"NIO",NA:"NAD",VU:"VUV",NG:"NGN",NP:"NPR",CH:"CHF",LI:"CHF",CO:"COP",CN:"CNY",CL:"CLP",CA:"CAD",CD:"CDF",CZ:"CZK",CR:"CRC",CW:"ANG",SX:"ANG",CV:"CVE",CU:"CUC",SZ:"SZL",SY:"SYP",KG:"KGS",KE:"KES",SS:"SSP",SR:"SRD",KH:"KHR",KM:"KMF",ST:"STD",KR:"KRW",KP:"KPW",KW:"KWD",SL:"SLL",SC:"SCR",KZ:"KZT",KY:"KYD",SG:"SGD",SE:"SEK",SD:"SDG",DO:"DOP",DJ:"DJF",YE:"YER",DZ:"DZD",UY:"UYU",LB:"LBP",LA:"LAK",TW:"TWD",TT:"TTD",TR:"TRY",LK:"LKR",TO:"TOP",LT:"LTL",LR:"LRD",LS:"LSL",TH:"THB",LY:"LYD",AE:"AED",AF:"AFN",IS:"ISK",IR:"IRR",AM:"AMD",AL:"ALL",AO:"AOA",AR:"ARS",AW:"AWG",IN:"INR",AZ:"AZN",ID:"IDR",UA:"UAH",QA:"QAR",MZ:"MZN"},nfec.struct.country=[{n:"Afghanistan",c:"AF"},{n:"\xC3\u2026land Islands",c:"AX"},{n:"Albania",c:"AL"},{n:"Algeria",c:"DZ"},{n:"American Samoa",c:"AS"},{n:"AndorrA",c:"AD"},{n:"Angola",c:"AO"},{n:"Anguilla",c:"AI"},{n:"Antarctica",c:"AQ"},{n:"Antigua and Barbuda",c:"AG"},{n:"Argentina",c:"AR"},{n:"Armenia",c:"AM"},{n:"Aruba",c:"AW"},{n:"Australia",c:"AU"},{n:"Austria",c:"AT"},{n:"Azerbaijan",c:"AZ"},{n:"Bahamas",c:"BS"},{n:"Bahrain",c:"BH"},{n:"Bangladesh",c:"BD"},{n:"Barbados",c:"BB"},{n:"Belarus",c:"BY"},{n:"Belgium",c:"BE"},{n:"Belize",c:"BZ"},{n:"Benin",c:"BJ"},{n:"Bermuda",c:"BM"},{n:"Bhutan",c:"BT"},{n:"Bolivia",c:"BO"},{n:"Bosnia and Herzegovina",c:"BA"},{n:"Botswana",c:"BW"},{n:"Bouvet Island",c:"BV"},{n:"Brazil",c:"BR"},{n:"British Indian Ocean Territory",c:"IO"},{n:"Brunei Darussalam",c:"BN"},{n:"Bulgaria",c:"BG"},{n:"Burkina Faso",c:"BF"},{n:"Burundi",c:"BI"},{n:"Cambodia",c:"KH"},{n:"Cameroon",c:"CM"},{n:"Canada",c:"CA"},{n:"Cape Verde",c:"CV"},{n:"Cayman Islands",c:"KY"},{n:"Central African Republic",c:"CF"},{n:"Chad",c:"TD"},{n:"Chile",c:"CL"},{n:"China",c:"CN"},{n:"Christmas Island",c:"CX"},{n:"Cocos (Keeling) Islands",c:"CC"},{n:"Colombia",c:"CO"},{n:"Comoros",c:"KM"},{n:"Congo",c:"CG"},{n:"Congo, The Democratic Republic of the",c:"CD"},{n:"Cook Islands",c:"CK"},{n:"Costa Rica",c:"CR"},{n:"Cote D'Ivoire",c:"CI"},{n:"Croatia",c:"HR"},{n:"Cuba",c:"CU"},{n:"Cyprus",c:"CY"},{n:"Czech Republic",c:"CZ"},{n:"Denmark",c:"DK"},{n:"Djibouti",c:"DJ"},{n:"Dominica",c:"DM"},{n:"Dominican Republic",c:"DO"},{n:"Ecuador",c:"EC"},{n:"Egypt",c:"EG"},{n:"El Salvador",c:"SV"},{n:"Equatorial Guinea",c:"GQ"},{n:"Eritrea",c:"ER"},{n:"Estonia",c:"EE"},{n:"Ethiopia",c:"ET"},{n:"Falkland Islands (Malvinas)",c:"FK"},{n:"Faroe Islands",c:"FO"},{n:"Fiji",c:"FJ"},{n:"Finland",c:"FI"},{n:"France",c:"FR"},{n:"French Guiana",c:"GF"},{n:"French Polynesia",c:"PF"},{n:"French Southern Territories",c:"TF"},{n:"Gabon",c:"GA"},{n:"Gambia",c:"GM"},{n:"Georgia",c:"GE"},{n:"Germany",c:"DE"},{n:"Ghana",c:"GH"},{n:"Gibraltar",c:"GI"},{n:"Greece",c:"GR"},{n:"Greenland",c:"GL"},{n:"Grenada",c:"GD"},{n:"Guadeloupe",c:"GP"},{n:"Guam",c:"GU"},{n:"Guatemala",c:"GT"},{n:"Guernsey",c:"GG"},{n:"Guinea",c:"GN"},{n:"Guinea-Bissau",c:"GW"},{n:"Guyana",c:"GY"},{n:"Haiti",c:"HT"},{n:"Heard Island and Mcdonald Islands",c:"HM"},{n:"Holy See (Vatican City State)",c:"VA"},{n:"Honduras",c:"HN"},{n:"Hong Kong",c:"HK"},{n:"Hungary",c:"HU"},{n:"Iceland",c:"IS"},{n:"India",c:"IN"},{n:"Indonesia",c:"ID"},{n:"Iran, Islamic Republic Of",c:"IR"},{n:"Iraq",c:"IQ"},{n:"Ireland",c:"IE"},{n:"Isle of Man",c:"IM"},{n:"Israel",c:"IL"},{n:"Italy",c:"IT"},{n:"Jamaica",c:"JM"},{n:"Japan",c:"JP"},{n:"Jersey",c:"JE"},{n:"Jordan",c:"JO"},{n:"Kazakhstan",c:"KZ"},{n:"Kenya",c:"KE"},{n:"Kiribati",c:"KI"},{n:"Korea, Democratic People'S Republic of",c:"KP"},{n:"Korea, Republic of",c:"KR"},{n:"Kuwait",c:"KW"},{n:"Kyrgyzstan",c:"KG"},{n:"Lao People'S Democratic Republic",c:"LA"},{n:"Latvia",c:"LV"},{n:"Lebanon",c:"LB"},{n:"Lesotho",c:"LS"},{n:"Liberia",c:"LR"},{n:"Libyan Arab Jamahiriya",c:"LY"},{n:"Liechtenstein",c:"LI"},{n:"Lithuania",c:"LT"},{n:"Luxembourg",c:"LU"},{n:"Macao",c:"MO"},{n:"Macedonia, The Former Yugoslav Republic of",c:"MK"},{n:"Madagascar",c:"MG"},{n:"Malawi",c:"MW"},{n:"Malaysia",c:"MY"},{n:"Maldives",c:"MV"},{n:"Mali",c:"ML"},{n:"Malta",c:"MT"},{n:"Marshall Islands",c:"MH"},{n:"Martinique",c:"MQ"},{n:"Mauritania",c:"MR"},{n:"Mauritius",c:"MU"},{n:"Mayotte",c:"YT"},{n:"Mexico",c:"MX"},{n:"Micronesia, Federated States of",c:"FM"},{n:"Moldova, Republic of",c:"MD"},{n:"Monaco",c:"MC"},{n:"Mongolia",c:"MN"},{n:"Montserrat",c:"MS"},{n:"Morocco",c:"MA"},{n:"Mozambique",c:"MZ"},{n:"Myanmar",c:"MM"},{n:"Namibia",c:"NA"},{n:"Nauru",c:"NR"},{n:"Nepal",c:"NP"},{n:"Netherlands",c:"NL"},{n:"Netherlands Antilles",c:"AN"},{n:"New Caledonia",c:"NC"},{n:"New Zealand",c:"NZ"},{n:"Nicaragua",c:"NI"},{n:"Niger",c:"NE"},{n:"Nigeria",c:"NG"},{n:"Niue",c:"NU"},{n:"Norfolk Island",c:"NF"},{n:"Northern Mariana Islands",c:"MP"},{n:"Norway",c:"NO"},{n:"Oman",c:"OM"},{n:"Pakistan",c:"PK"},{n:"Palau",c:"PW"},{n:"Palestinian Territory, Occupied",c:"PS"},{n:"Panama",c:"PA"},{n:"Papua New Guinea",c:"PG"},{n:"Paraguay",c:"PY"},{n:"Peru",c:"PE"},{n:"Philippines",c:"PH"},{n:"Pitcairn",c:"PN"},{n:"Poland",c:"PL"},{n:"Portugal",c:"PT"},{n:"Puerto Rico",c:"PR"},{n:"Qatar",c:"QA"},{n:"Reunion",c:"RE"},{n:"Romania",c:"RO"},{n:"Russian Federation",c:"RU"},{n:"RWANDA",c:"RW"},{n:"Saint Helena",c:"SH"},{n:"Saint Kitts and Nevis",c:"KN"},{n:"Saint Lucia",c:"LC"},{n:"Saint Pierre and Miquelon",c:"PM"},{n:"Saint Vincent and the Grenadines",c:"VC"},{n:"Samoa",c:"WS"},{n:"San Marino",c:"SM"},{n:"Sao Tome and Principe",c:"ST"},{n:"Saudi Arabia",c:"SA"},{n:"Senegal",c:"SN"},{n:"Serbia and Montenegro",c:"CS"},{n:"Seychelles",c:"SC"},{n:"Sierra Leone",c:"SL"},{n:"Singapore",c:"SG"},{n:"Slovakia",c:"SK"},{n:"Slovenia",c:"SI"},{n:"Solomon Islands",c:"SB"},{n:"Somalia",c:"SO"},{n:"South Africa",c:"ZA"},{n:"South Georgia and the South Sandwich Islands",c:"GS"},{n:"Spain",c:"ES"},{n:"Sri Lanka",c:"LK"},{n:"Sudan",c:"SD"},{n:"Suriname",c:"SR"},{n:"Svalbard and Jan Mayen",c:"SJ"},{n:"Swaziland",c:"SZ"},{n:"Sweden",c:"SE"},{n:"Switzerland",c:"CH"},{n:"Syrian Arab Republic",c:"SY"},{n:"Taiwan, Province of China",c:"TW"},{n:"Tajikistan",c:"TJ"},{n:"Tanzania, United Republic of",c:"TZ"},{n:"Thailand",c:"TH"},{n:"Timor-Leste",c:"TL"},{n:"Togo",c:"TG"},{n:"Tokelau",c:"TK"},{n:"Tonga",c:"TO"},{n:"Trinidad and Tobago",c:"TT"},{n:"Tunisia",c:"TN"},{n:"Turkey",c:"TR"},{n:"Turkmenistan",c:"TM"},{n:"Turks and Caicos Islands",c:"TC"},{n:"Tuvalu",c:"TV"},{n:"Uganda",c:"UG"},{n:"Ukraine",c:"UA"},{n:"United Arab Emirates",c:"AE"},{n:"United Kingdom",c:"GB"},{n:"United States",c:"US"},{n:"United States Minor Outlying Islands",c:"UM"},{n:"Uruguay",c:"UY"},{n:"Uzbekistan",c:"UZ"},{n:"Vanuatu",c:"VU"},{n:"Venezuela",c:"VE"},{n:"Viet Nam",c:"VN"},{n:"Virgin Islands, British",c:"VG"},{n:"Virgin Islands, U.S.",c:"VI"},{n:"Wallis and Futuna",c:"WF"},{n:"Western Sahara",c:"EH"},{n:"Yemen",c:"YE"},{n:"Zambia",c:"ZM"},{n:"Zimbabwe",c:"ZW"}],nfec.util={},nfec.util.btn={db:{},id:0,Fake:function(t,e,n){window.inspectDOM=function(){};var i,o,r="tdf-btn-id",c="oasdblhk";e.each(function(a,f){var l=jQuery(this);if(!l.hasClass(t)){var _="mincartDisabled";if(l.hasClass(_)){if(l.val()=="Loading"){var u="Checkout";if(window.mincartSettings&&mincartSettings.texts){var p=mincartSettings.texts.checkoutText;p&&(u=p)}l.val(u)}l.removeClass(_)}(i=l.attr(r))||(nfec.util.btn.id+=1,i=nfec.util.btn.id,l.attr(r,i),l.attr("tdf-btn-f",1),nfec.util.btn.db[i]=l),(o=l.clone()).attr("onclick","event.preventDefault();");var h=o.prop("tagName");["BUTTON","INPUT"].indexOf(h)!=-1&&o.prop("type")!="hidden"&&o.prop("type","button"),o.removeClass("disabled"),o.prop("disabled",!1),o.removeAttr("data-ocu-checkout"),o.attr(r,i),o.addClass(t),o.addClass(c[6]+"ulkapps-ignore"),o.addClass(c[2]+"aso-ignore"),o.addClass("b"+c[7]+"-btn-cl"+c[0]+"ne"),o.addClass("b"+c[0]+"ld_cl"+c[0]+"ne"),window.callbackAdvanceReorder&&o.addClass("c"+c[1]+NaN);var m=o.attr("name");m&&(m.indexOf(!0)||m=="goto_pp")&&o.attr("name",""),o.attr("href")&&o.attr("href","javascript:;"),l.replaceWith(o),typeof n=="function"&&n(o)}})},StopRedirect:function(t,e,n,i){if(window.ZapTree||nfec.manager.setting.Data.overwrite_ck_no){var o="oasdblhk",r=o[2]+o[1]+o[2]+o[0],c=o[4]+o[0]+o[0]+"ster";e.each(function(l,_){var u=jQuery(this);u.hasClass(t)||(u.attr("type")=="submit"&&(u.attr("is-sbm",1),u.prop("type","button")),u.data("tdf-bound")||(u.data("tdf-bound",1),u.on("click",function(p){jQuery(this).hasClass(t)&&p.preventDefault()})),u.prop("disabled",!1),u.removeAttr("data-ocu-checkout"),u.addClass(t),u.addClass(o[6]+"ulkapps-ignore"),u.addClass(o[2]+"aso-ignore"),u.addClass("b"+o[7]+"-btn-cl"+o[0]+"ne"),u.addClass("b"+o[0]+"ld_cl"+o[0]+"ne"),typeof n=="function"&&n(u))});var a=window[r+"Checkout"];a&&!window.bkfss&&(window["bk"+r]=a),window[r+"Checkout"]=function(){},window.bkfss=1;var f=r+"_agree "+r+"agr";window[c]&&jQuery("body").append('<input id="agree" class="'+f+'" style="display:none" type="checkbox">'),window[r]&&jQuery("body").append('<input class="'+f+'" style="display:none" type="checkbox">')}else nfec.util.btn.Fake(t,e,n)},Revert:function(t,e){var n=jQuery("."+t);if(n&&n.length){var i,o="oasdblhk",r=o[2]+o[1]+o[2]+o[0];n.each(function(c,a){var f=jQuery(this);if(f.hasClass(t)){if(i=f.attr("tdf-btn-id"))return f.replaceWith(nfec.util.btn.db[i]),void(typeof e=="function"&&nfec.util.btn.db[i]&&e(nfec.util.btn.db[i]));f.attr("tdf-btn-f")||(f.attr("is-sbm")&&f.prop("type","submit"),f.prop("disabled",!1),f.removeClass(t),f.removeClass(o[6]+"ulkapps-ignore"),f.removeClass(o[2]+"aso-ignore"),f.removeClass("b"+o[7]+"-btn-cl"+o[0]+"ne"),f.removeClass("b"+o[0]+"ld_cl"+o[0]+"ne"),typeof e=="function"&&e(f))}}),window["bk"+r]&&(window[r+"Checkout"]=window["bk"+r]),setTimeout(function(){jQuery("."+r+"agr").remove()},400)}}},nfec.util.request={page:1,totalTrack:0,GetPath:function(){return"/apps/sap"},GetCDN:function(){return window.usecdn?"https://d5zu2f4xvqanl.cloudfront.net":"/apps/sap"},Run:function(t){t.timeout=t.timeout||1e4,t.xhrFields=t.xhrFields||{},t.xhrFields._istdf=!0,t.dataType=t.dataType||"json",t.type=t.method,jQuery.ajax(t)},Api:function(t,e){var n=nfec.manager.setting.Data.key,i=nfec.manager.setting.Data.id;if(n){var o=e?"/apps/sap":nfec.consta.api_path;return t.url=o+"/"+t.url+".json?tk="+n+"&sid="+i,["POST","PUT"].indexOf(t.method)!==-1&&(t.data=t.data||{},t.data=JSON.stringify(t.data)),t.timeout=t.timeout||36e3,nfec.util.request.Run(t)}},Track:function(t,e){if(nfec.util.request.totalTrack++,!(30<nfec.util.request.totalTrack)){var n=nfec.manager.setting.Data.key,i=nfec.manager.setting.Data.id;if(n){var o=e?"/apps/sap/t":nfec.consta.track_path;return t.url=o+"/"+t.url+"?tk="+n+"&sid="+i,t.dataType=t.dataType||"text",nfec.util.request.Run(t)}}},GetVersion:function(t){var e=new Date;return Math.floor(e.getTime()/(60*t*1e3))}},nfec.util.tpl={snippets:{},data:{},dataID:1,LangOffset:-1,CustomTrans:[],Init:function(){String.prototype.RenderTpl=function(t){return t=t||{},this.valueOf().replace(/{{([^}]+)}}/g,function(e,n){for(var i=n.split("."),o=t[i[0]],r=1,c=i.length;r<c;r++){if(!o||typeof o!="object"){o="";break}o=o[i[r]]}return typeof o!="string"?"":o})},String.prototype.RenderTpls=function(t){for(var e="",n=0,i=t.length;n<i;n++)e+=this.RenderTpl(t[n]);return e}},AddSnippet:function(t,e){nfec.util.tpl.snippets[t]=e},FormatCurrency:function(t,e,n){var i=e||nfec.manager.setting.GetCurrencyFormat();window.DoublyGlobalCurrency||window.fullcurrencyformat||(i.indexOf("\xE2\u201A\xAC")!=-1&&(i=i.replace("EUR","")),i.indexOf("USD")!=-1&&i.indexOf("$")!=-1&&(i=i.replace("USD","")),i.indexOf("\xC2\xA3")!=-1&&(i=i.replace("GBP","")));var o=nfec.manager.setting.GetTax(),r="",c=t,a=parseFloat(t);if(isNaN(a))r=t;else{var f=/\{\{\s*(\w+)\s*\}\}/;c=a,o&&(c+=c*o/100);var l=i.match(f);if(l!=null&&1<l.length)switch(i.match(f)[1]){case"amount":r=nfec.main.TF(c,2,n).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"amount_no_decimals":r=nfec.main.TF(c,0,n).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"amount_no_decimals_with_comma_separator":r=nfec.main.TF(c,0,n).replace(/\./,",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.");break;case"amount_no_decimals_with_space_separator":r=nfec.main.TF(c,0,n).replace(/\./," ").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ");break;case"amount_no_trailing_zeros":r=nfec.main.TF(c,2,n).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");break;case"amount_with_comma_separator":r=nfec.main.TF(c,2,n).replace(/\./,",").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.");break;case"amount_with_apostrophe_separator":r=nfec.main.TF(c,2,n).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1'");break;default:r=nfec.main.TF(c,2,n)}r=i.replace(f,r)}return jQuery("<div>").html(r).text().trim()},GetCent:function(t){var e=t,n=parseFloat(t);return isNaN(n)||(e=Math.round(100*n)),e},ToCurrency:function(t,e){var n=nfec.util.tpl.GetCent(t),i=nfec.util.tpl.FormatCurrency(t,null,e),o=nfec.manager.setting.Data.currency;return'<span class="tdf_money money" style="float:none;" data-tov="'+t+'" data-tovc="'+o+'" data-origin-value="'+n+'" data-currency="'+o+'">'+i+"</span>"},ToCurrencyN:function(t){return nfec.manager.currency.NotDefault?'<span class="tdf_money2 money" style="float:none;">'+nfec.util.tpl.FormatCurrency(t,"{{amount}} "+nfec.platform.shopify.cart_api.fcur)+"</span>":nfec.util.tpl.ToCurrency(t)},GetTplData:function(t){return t=parseInt(t),nfec.util.tpl.data[t]},toInput:function(t){return typeof t!="string"?t:t.replace(/"/g,"&quot;")},ToTranslate:function(t){if(typeof t!="string")return t;var e=nfec.util.tpl.LangOffset;if(e<0)return t;var n=(t=t.replace(/\|\|/g,"tdf_ory")).split("|"),i=n[e];return i||(i=n[0]||""),(i=i.replace(/tdf_ory/g,"||")).trim()},ToCustomTrans:function(t){return nfec.util.tpl.toCustomTrans(t)},toCustomTrans:function(t){if(typeof t!="string")return t;var e=nfec.util.tpl.LangOffset;if(!e||e<0)return t;for(var n=t.trim(),i=0;i<nfec.util.tpl.CustomTrans.length;i++)if(n==nfec.util.tpl.CustomTrans[i][0]){var o=nfec.util.tpl.CustomTrans[i][e];return o||t}return t},RenderTpl:function(tpl,raw,isBulk,isStore){raw.products=nfec.manager.product.data,raw.cart=nfec.manager.cart.Get(),raw.consta=nfec.consta,raw.percentsymbol="%",raw.isSmallScreen=window.innerWidth<768,raw.current_pid=nfec.manager.product.GetCurrentProductID(),raw.cdnpath=nfec.util.request.GetCDN(),raw.proot=nfec.main.PRo,isStore&&(nfec.util.tpl.data[nfec.util.tpl.dataID]=raw,raw.tpl_data_id=nfec.util.tpl.dataID,nfec.util.tpl.dataID++);var handleDsc=function(t,e,n){var i="";switch(t.discount_type){case nfec.consta.DiscountTypePercent:i=t.discount_value,n&&(i=t.discount_value_round()),i+="%";break;case nfec.consta.DiscountTypeValue:i=nfec.util.tpl.ToCurrency(t.discount_value,1);break;default:return""}return!(9990<nfec.manager.setting.Data.id||nfec.manager.setting.Data.dsc_f)||window.Shopify&&Shopify.locale&&["ar","ru","id","ie","it","km","th","ms","vi","fa","pl","he"].indexOf(Shopify.locale)!=-1?e+" "+i:i+" "+e},d=new Date,dt=d.getTime(),o_params=jQuery.extend({},raw),renderStr=function(s,params){params=params||{};var getParam=function(t,e){var n=getRealParam(t,e);return n===null?"":n},getRealParam=function(t,e){var n=t.split("."),i=e[n[0]];typeof i=="function"&&(i=e[n[0]]());for(var o=1,r=n.length;o<r;o++)if(n[o]!="toTranslate")if(n[o]!="toCustomTrans")if(n[o]!="toInput")if(n[o]!="toCurrency")if(n[o]!="toCurrencyN")if(n[o]!="toCrcF")if(n[o]!="toDscR")if(n[o]!="toDsc")if(n[o]!="toCDsc"){if(!i||typeof i!="object"){i=null;break}i=typeof i[n[o]]=="function"?i[n[o]]():i[n[o]]}else i=handleDsc(i,nfec.manager.transl.cart_discount);else i=handleDsc(i,nfec.manager.transl.discount);else i=handleDsc(i,nfec.manager.transl.discount,1);else i=nfec.util.tpl.ToCurrency(i,1);else i=nfec.util.tpl.ToCurrencyN(i);else i=nfec.util.tpl.ToCurrency(i);else i=nfec.util.tpl.toInput(i);else i=nfec.util.tpl.toCustomTrans(i);else i=nfec.util.tpl.ToTranslate(i);return typeof i=="string"&&t.indexOf("snippet_")!==0&&(i=i.replace(/{/g,"maStartK").replace(/}/g,"maStopK")),i};return s=s.replace(/{{{([^}]+)}}}/g,function(t,e){var n=getParam(e,params);return!n&&isNaN(n)?"":n}),s=s.replace(/{{ assign ([^\s]+) = ([^\s]+) }}/g,function(t,e,n){return!isNaN(n)||/^'.*'$/.test(n)?params[e]=n:params[e]=getRealParam(n,params),""}),s=s.replace(/{{ for ([^\s]+),([^\s]+) in ([^\s]+) include ([^\s]+) }}/g,function(t,e,n,i,o){var r=getParam(i,params);if(!r||!Array.isArray(r))return"";for(var c="",a=0,f=r.length;a<f;a++){var l=jQuery.extend({},params);l[e]=a,l[n]=r[a],c+=nfec.util.tpl.RenderTpl(nfec.util.tpl.snippets[o],l,!0)}return c}),s=s.replace(/{{ include ([^\s]+) (with ([^\s]+) )?(plus ([^\s]+) as ([^\s]+) )?}}/g,function(t,e,n,i,o,r,c){var a=i?getRealParam(i,params):params;return r&&(a=jQuery.extend({},a),c&&(a[c]=getRealParam(r,params))),nfec.util.tpl.RenderTpl(nfec.util.tpl.snippets[e],a,!0)}),s=s.replace(/{{([^}]+)}}/g,function(t,e){var n=getParam(e,params);return!n&&isNaN(n)?"":n}),s=s.replace(/{_ if( [^}]+ )_}([0-9]+){_ endif _}/g,function(x,x1,x2){var sub=tpl.subs[parseInt(x2)],subs=sub.split("{_ else _}");x1=x1.replace(/ ([a-z_.0-9]+) /gi,function(t,e){return isNaN(e)&&(typeof(e=getRealParam(e,params))=="string"&&(e='"'+(e=e.replace(/"/g," "))+'"'),e&&typeof e=="object"&&(e=!!Object.keys(e).length&&++dt)),e});var isTrue=!1;try{isTrue=eval(x1)}catch(t){isTrue=!0,console.log("eval",x1,t)}return isTrue?renderStr(subs[0],params):subs[1]?renderStr(subs[1],params):""}),s=s.replace(/{_ for ([^\s]+),([^\s]+) in ([^\s]+) _}([0-9]+){_ endfor _}/g,function(t,e,n,i,o){var r=getParam(i,params);if(!r||typeof r!="object")return"";var c,a="";for(c in r)if(r.hasOwnProperty(c)){var f=jQuery.extend({},params);f[e]=c,f[n]=r[c],a+=renderStr(tpl.subs[parseInt(o)],f)}return a}),s},output=renderStr(tpl.m,o_params);return isBulk||nfec.util.tpl.RunAfterRender(),output.replace(/maStartK/g,"{").replace(/maStopK/g,"}")},RenderTpls:function(t,e){for(var n="",i=0,o=e.length;i<o;i++)n+=nfec.util.tpl.RenderTpl(t,e[i],!0);return nfec.util.tpl.RunAfterRender(),n},AddBtnLoading:function(t){t.addClass("tdf_btn_loading").attr("disabled","disabled")},RemoveBtnLoading:function(t){t.removeClass("tdf_btn_loading").removeAttr("disabled")},AutoSlide:function(t,e,n,i,o){setTimeout(function(){i||(i=e=="scrollLeft"?t.width():t.height());var r=r||.7,c={},a=parseInt(i/r);c[e]=i,t.animate(c,a,function(){n&&(c[e]=0,t.animate(c,a))})},300)},RunAfterRender:function(){var t=nfec.util.postRenderID;nfec.util.postRenderID&&clearTimeout(t),nfec.util.postRenderID=setTimeout(function(){jQuery(".tdfe").each(function(){var n=jQuery(this);if(!n.attr("tdfbinded")){n.attr("tdfbinded",1);var i=n.data("et")||"click",o=n.prop("tagName")=="A";n.on(i,function(r){o&&r.preventDefault(),nfec.event_hub.Trigger(n.data("e"),{els:n,event:r})})}}),jQuery(".tdfe").addClass("no-transition").removeClass("tdfe"),jQuery("[tabindex='-1']").each(function(){var n=jQuery(this);n.prop("tagName")=="IFRAME"||n.removeAttr("tabindex")});try{nfec.util.tpl.updateCurrency(),jQuery(document).trigger("tdf_render")}catch(n){console.log(n)}},300);try{nfec.util.tpl.updateCurrency();var e=window.ExemptifyTriggerUpdate;typeof e=="function"&&e()}catch(n){console.log(n)}},updateCurrency:function(){if(nfec.manager.currency.IsOn()||nfec.manager.currency.GetCartCurrency())nfec.sync.currency.Render(1);else{var t,e,n=nfec.manager.setting.GetCurrency();switch((e=window.Currency)&&typeof e.convertAll=="function"&&e.currentCurrency?1:(e=window.DoublyGlobalCurrency)&&typeof e.convertAll=="function"&&e.currentCurrency?2:!!((e=window.BOLDCURRENCY)&&e.currentCurrency&&e.converter&&typeof e.converter.convertAll=="function")&&3){case 1:n!==(t=window.Currency).currentCurrency&&t.convertAll(n,t.currentCurrency);break;case 2:n!==(t=window.DoublyGlobalCurrency).currentCurrency&&t.convertAll(t.currentCurrency);break;case 3:n!==(t=window.BOLDCURRENCY).currentCurrency&&t.converter.convertAll(t.rateInfo,jQuery(".money"),n,t.currentCurrency)}}}},nfec.util.tool={SetAtt:function(t,e,n){t.data(e,n),t.attr("data-"+e,n)},Log:function(){},WaitToLoad:function(t,e){var n,i=t.length,o=!0,r=1e3,c=setInterval(function(){if(--r<0)clearInterval(c);else{for(o=!0,n=0;n<i;n++)window[t[n]]||(o=!1);o&&(clearInterval(c),setTimeout(e,300))}},300)},GetSecond:function(){var t=new Date;return parseInt(t.getTime()/1e3)},GetLocation:function(t){var e=document.createElement("a");return e.href=t,e},GetURLParams:function(t){var e={},n=nfec.util.tool.GetLocation(t);if(!n.search)return e;var i=n.search.substring(1);try{e=JSON.parse('{"'+decodeURI(i).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(o){return{}}return e},GetQueryStringValue:function(t){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))},Redirect:function(t){if(t.indexOf("/checkout")==-1){var e=nfec.manager.locale.Get(),n=location.pathname;e&&n&&(n.indexOf("/"+e+"/")!==0&&n.indexOf(e+"/")!==0&&n!=e&&n!="/"+e||(t="/"+e+t))}window.location.href=t},Reload:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.location.reload(!0)},Shuffle:function(t){for(var e,n,i=t.length;i!==0;)n=Math.floor(Math.random()*i),e=t[i-=1],t[i]=t[n],t[n]=e;return t},DataToObject:function(t,e){var n,i=new t;for(n in e)e.hasOwnProperty(n)&&i.hasOwnProperty(n)&&(i[n]=e[n]);return i},postRenderID:0,IsTabletOrSmaller:function(){return window.innerWidth<=768},GetHtmReadT:function(t){return t=jQuery(t).text(),nfec.util.tool.GetReadT(t)},GetReadT:function(t){var e=Math.ceil(1e3*t.split(" ").length/2.3)+1e3;return e<3500&&(e=3500),8e3<e&&(e=8e3),e},ToStoreTimeUnix:function(t){return t+60*-new Date().getTimezoneOffset()*1e3-3600*nfec.manager.setting.GetShopTimezoneOffset()*1e3},Decode:function(t){return jQuery("<textarea />").html(t).text()},Replaces:function(t,e,n){if(!t)return t;for(;t.indexOf(e)!=-1;)t=t.replace(e,n);return t},H:function(t,e,n){for(var i=t+"",o=Math.floor(9e3*Math.random()+1e3),r=Math.floor(9e3*Math.random()+1e3),c=r+i+(e=e.replace(".",""))+(n=n.replace(".",""))+o,a=n+i+e,f="",l=0;l<a.length;l++)f+=c.indexOf(a[l]);return o+f+r}},nfec.sync={},nfec.sync.cart={ajaxCartID:null,Start:function(t){nfec.event_hub.ListenTo("core_setting_ready",function(){nfec.platform.current.cart_api.GetFirst(function(e){if(t)e.getTotalAddeds()||nfec.event_hub.Trigger("cart_empty",{cart:e});else{var n,i=nfec.manager.cart.GetState();i&&(n=e.compareWithState(i)),nfec.manager.cart.Set(e),nfec.event_hub.Trigger("cart_synced",{cart:e,compared:n}),e.getTotalAddeds()||nfec.event_hub.Trigger("cart_empty",{cart:e,compared:n}),nfec.event_hub.Trigger("promo_update",{compared:n}),n&&n.added.length&&(nfec.event_hub.Trigger("cart_item_added",{added:n.added}),nfec.event_hub.Trigger("cart_item_added_synced",{added:n.added})),nfec.event_hub.Trigger("cart_updated",{cart:e,compared:n}),nfec.sync.cart.ListenAjax()}})})},ListenAjax:function(){var t=new Date().getTime(),e=0;nfec.event_hub.ListenTo("request_complete",function(o,r){var c=new Date;if(e=c.getTime(),_=nfec.platform.current.cart_handle.IsAjaxAddProduct(r)){nfec.sync.cart.lastadd=e;var a=nfec.manager.cart.GetState(),f=!1;if(r.isTdf)f=!0;else if(nfec.manager.setting.Data.skip_ajax_cart)return;if(nfec.manager.setting.Data.fasterAddCart&&(f=!0),nfec.IsDmodeNone&&(f=!1),nfec.manager.current_product.SetVariantTitle(_.item.variant_title),f){var l=nfec.manager.cart.Get();l.updateItem(_.item),nfec.manager.cart.Set(l),nfec.event_hub.Trigger("promo_update",{compared:{added:[_.item]}}),nfec.event_hub.Trigger("cart_item_added",{added:[_.item],is_tdf:r.isTdf})}nfec.platform.current.cart_api.Get(function(h,m){setTimeout(function(){if(!nfec.start.redirect.unload){var g={added:[]};a&&(g=h.compareWithState(a)),g.added=[_.item],nfec.manager.cart.Set(h),f||(nfec.event_hub.Trigger("promo_update",{compared:g}),nfec.event_hub.Trigger("cart_item_added",{added:[_.item],is_tdf:r.isTdf})),nfec.event_hub.Trigger("cart_updated",{cart:h,compared:g}),nfec.event_hub.Trigger("cart_item_added_synced",{added:[_.item],is_tdf:r.isTdf})}},f?1:200),r.isTdf&&nfec.platform.current.cart_handle.UpdateThemeCart(m)})}else{var _;if(_=nfec.platform.current.cart_handle.IsAjaxUpdateCart(r)){nfec.sync.cart.lastupdate=e;var u,p=_.cart;return(a=nfec.manager.cart.GetState())&&(u=p.compareWithState(a)),nfec.manager.cart.Set(p),setTimeout(function(){nfec.event_hub.Trigger("promo_update",{compared:u}),u&&((u.added.length||u.removed.length)&&nfec.event_hub.Trigger("cart_updated",{cart:p,compared:u}),r.isReplace?(u.is_replaced=1,u.is_tdf=1,nfec.event_hub.Trigger("cart_item_added_by_update",{cart:p,compared:u})):!r.isTdf&&u.added.length&&nfec.event_hub.Trigger("cart_item_added_by_update",{cart:p,compared:u}))},100),void((u&&u.added.length||u.removed.length)&&r.isTdf&&nfec.platform.current.cart_handle.UpdateThemeCart(_.cartraw))}(_=nfec.platform.current.cart_handle.IsAjaxGetCart(r))&&(r.isTdf||(nfec.sync.cart.ajaxCartID&&clearTimeout(nfec.sync.cart.ajaxCartID),nfec.sync.cart.ajaxCartID=setTimeout(function(){nfec.event_hub.Trigger("request_got_cart",{})},300)))}});var n=0,i=function(){if(!(t+7e3<e)){var o=new Date,r=o.getTime();if(!(r+3e3<n)){var c=3e3;if(r<n){if(n<r+3300)return;c=6e3}n=o.getTime()+c,setTimeout(function(){new Date().getTime()<e+3e3||nfec.sync.cart.Check()},c)}}};jQuery(document).on("click",function(o){var r=jQuery(o.target).closest("form");if(r.length){var c=r.attr("action");c&&c.indexOf("cart")!=-1&&i()}}),jQuery(document).on("input",function(o){var r=jQuery(o.target),c=r.attr("name");(!c||c.indexOf("updates")==-1)&&r.attr("type")!="number"||i()})},Check:function(){nfec.platform.current.cart_api.Get(function(t,e){if(t&&!nfec.start.redirect.unload){var n=nfec.manager.cart.GetState(),i=t.compareWithState(n);nfec.manager.cart.Set(t),(i.added.length||i.removed.length)&&(nfec.event_hub.Trigger("promo_update",{compared:i}),nfec.event_hub.Trigger("cart_updated",{cart:t,compared:i}))}})},CheckLastListen:function(t){setTimeout(function(){var e=t?nfec.sync.cart.lastupdate:nfec.sync.cart.lastadd;e=e||0,new Date().getTime()-e<800||nfec.platform.current.redirect.GoToCartPage()},420)}},nfec.sync.ctotal={Start:function(){sl9.nfec.event_hub.ListenTo("theme_version_change",function(){nfec.manager.ctotal.Del()},!0),jQuery(".cartFlagX").length&&sl9.nfec.event_hub.ListenTo("cart_updated",function(t,e){if(e.cart.getTotalAddeds()&&!jQuery(".tdf-cart-total-flag,.tdf-cart-total-parent").length){var n=sl9.nfec.platform.current.page.Detect();if(!nfec.manager.ctotal.Get(n)){var i=function(){nfec.manager.ctotal.Set(n,"*")};nfec.util.request.Run({url:location.href,method:"GET",timeout:1e4,dataType:"html",success:function(o){var r=jQuery(o),c=r.find(".tdf-cart-total-flag").first();if(c.length){for(var a,f,l=function(p){var h=p.prop("tagName").toLowerCase(),m=p.attr("class"),g=[];m&&(g=m.split(" "));for(var v=0;v<g.length;v++){var y=g[v].trim();y&&(h+="."+y)}return h},_=[],u=0;u<5;u++)if(c=c.parent(),_.unshift(l(c)),a=_.join(">"),r.find(a).length==1&&3<u){f=!0;break}f?(nfec.manager.ctotal.Set(n,a),sl9.nfec.event_hub.Trigger("ctotal_found",{})):i()}else i()},error:function(){i()}})}}})}},nfec.sync.currency={Start:function(){nfec.event_hub.ListenToMulti(["core_setting_ready","country_ready"],function(){var t=[],e=nfec.manager.setting.GetCurrency(),n=nfec.manager.setting.Data.m_currency_on,i=nfec.manager.setting.Data.m_currency_codes,o=nfec.manager.currency.GetSelected(),r=sl9.nfec.manager.country.Get(),c=!1;if(n&&i){if(c=!0,!o){var a=sl9.nfec.struct.currency[r];a&&i.indexOf(a)!=-1&&(o=a),o||(o=e),nfec.manager.currency.SetSelected(o)}o&&o!=e&&(t.indexOf(o)==-1&&t.push(o),t.indexOf(e)==-1&&t.push(e))}var f=0,l=function(){if(f===t.length){if(nfec.event_hub.Trigger("currency_ready",{}),!c)return;nfec.sync.currency.Render(),nfec.sync.currency.listen()}};l();for(var _=0;_<t.length;_++)nfec.manager.currency.Get(t[_],function(){f++,l()})},!0)},listen:function(){var t=jQuery("form"),e=function(){nfec.sync.currency.Render()};t.find("select").on("change",function(){e()}),t.on("click",function(){setTimeout(function(){e()},10)}),sl9.nfec.event_hub.ListenTo("request_got_cart",function(){e(),setTimeout(function(){e()},1e3)}),sl9.nfec.event_hub.ListenTo("cart_updated",function(){setTimeout(function(){e()},200)}),sl9.nfec.event_hub.ListenTo("page_scroll",function(n,i){e()})},TimeoutID:0,Render:function(t){var e=nfec.sync.currency.TimeoutID;e&&clearTimeout(e),nfec.sync.currency.TimeoutID=setTimeout(function(){var n=nfec.manager.currency.GetSelected(),i=nfec.manager.setting.GetCurrency(),o=nfec.manager.currency.Find(n),r=nfec.manager.currency.IsOn();jQuery(r?".money":".tdf_money").each(function(){var c=jQuery(this),a=c.data("currency")||i;if(a!=n){var f=c.text();if(f){c.data("currency",n);var l=nfec.manager.currency.Find(a),_=c.data("tov"),u=!1;_!==void 0&&c.data("tovc")==a&&(_=parseFloat(_),isNaN(_)||(f=_,u=!0)),(u||(f=l.getNum(f)))&&(f=nfec.manager.currency.Convert(a,n,f),c.text(nfec.util.tpl.FormatCurrency(f,o.formatString,1)))}}})},t||300)}},nfec.sync.country={Start:function(){var t=function(){nfec.event_hub.Trigger("country_ready")},e="",n=nfec.store._cookie.Get("_shopify_country");if(n&&(n=n.replace(/\s+/g,""),e=nfec.manager.country.FindByName(n)),e)return nfec.manager.country.Set(e),void t();if(nfec.manager.country.Get())t();else{var i=function(){nfec.manager.country.Set("*",36e3),t()};nfec.util.request.Run({url:"https://shappify-cdn.com/cf_helper/get_country.php",dataType:"text",timeout:4e3,success:function(o){if(o&&o.length==4)return nfec.manager.country.Set(o),void t();i()},error:function(){i()}})}}},nfec.sync.customer={Start:function(){var t=nfec.manager.customer.Get(),e=jQuery(".tdf_customer").last();if(e.length){var n=new nfec.model.customer;if(n.id=parseInt(e.data("id")),n.created_at=parseInt(e.data("created_at")),n.email=e.data("e"),n.name=e.data("name"),n.phone=e.data("phone"),n.tags=e.data("tags"),n.total_spent=parseFloat(e.data("total_spent")),n.orders_count=parseInt(e.data("orders_count")),window.Shopify&&(n.address.fromJson(Shopify.customer_address),Shopify.customer_orders&&(n.orders=Shopify.customer_orders,!n.orders_count&&(n.orders_count=n.orders.length,!n.total_spent))))for(var i=0;i<n.orders.length;i++)n.total_spent+=n.orders[i].p;n.total_spent&&(n.total_spent=n.total_spent/100),nfec.manager.customer.Set(n),t?t.id==n.id&&t.total_spent==n.total_spent&&t.orders_count==n.orders_count||nfec.event_hub.Trigger("customer_update"):(nfec.event_hub.Trigger("customer_update"),nfec.event_hub.Trigger("customer_login"))}else{if(!jQuery("#tdf_pxrscript").length||!t)return;nfec.manager.customer.Remove()}}},nfec.sync.product={Start:function(){tdfEventHub.ListenToEvent("product_data",function(t,e){nfec.event_hub.ListenTo("cart_synced",function(n,i){var o=jQuery(".productInfox"),r=nfec.platform.current.product.ConvertDataToProduct(e.product),c=function(m){for(var g=m.split(","),v=[],y=0;y<g.length;y++)g[y]&&parseInt(g[y])&&v.push(parseInt(g[y]));return v};if(setTimeout(function(){nfec.event_hub.Trigger("product_data_synced")},50),o.length&&o.data("id")==r.id){if(o.data("ava")!=1)return;var a=o.data("vars");if(!a)return;for(var f=c(a),l=[],_=0,u=r.variants.length;_<u;_++)f.indexOf(r.variants[_].id)!=-1&&l.push(r.variants[_]);if(!l.length)return;r.variants=l,nfec.manager.currency.NotDefault||nfec.manager.product.AddCurrentProduct(r)}else nfec.manager.currency.NotDefault||nfec.manager.product.AddProduct(r);var p=new nfec.model.current_product;p.fromProduct(r);var h=o.data("cols");h&&(p.collections=c(h)),nfec.manager.current_product.Set(p),nfec.manager.recent_views.AddFromProduct(r),nfec.event_hub.Trigger("product_data_ava_synced")},!0)},!0)}},nfec.sync.shopversion={Start:function(){nfec.store.control.Get("sver");var t=window.nfecShopVersion;t&&nfec.store.control.Set("sver",t,186400,!0);var e=window.nfecJsVersion;e&&nfec.store.control.Set("jsv",e,86400,!0)}},nfec.sync.locale={Start:function(){var t=function(){return window.Weglot&&typeof Weglot.getCurrentLang=="function"?document.documentElement.innerHTML.indexOf("weglot_script_tag")==-1?"":Weglot.getCurrentLang():""},e=function(){var r=t();r&&r!=nfec.manager.locale.Get()&&(nfec.manager.locale.Set(r,36e3),window.location.reload())},n=function(){for(var r=["lang","locale"],c=0;c<r.length;c++){var a=nfec.util.tool.GetQueryStringValue(r[c]);if(a)return a}return!1}(),i=nfec.manager.locale.Get(),o=function(){nfec.event_hub.Trigger("locale_ready")};if(n||(n=t(),jQuery(document).on("click",".wg-li a",function(){setTimeout(e,2e3)})),n||(n=nfec.store.control.Get("ls-locale",1))&&(n=n.split("-")[0]),n||window.Shopify&&Shopify.locale&&(n=Shopify.locale),n)return nfec.manager.locale.Set(n,36e3),void o();i?o():nfec.util.request.Run({url:nfec.consta.api_path+"/2/locale.json",method:"GET",timeout:4e3,success:function(r){if(!r.la)return nfec.manager.locale.Set("*",36e3),void o();nfec.manager.locale.Set(r.la),o()},error:function(){nfec.manager.locale.Set("*",36e3),o()}})}},nfec.sync.theme_v={Start:function(){var t=nfec.store.control.Get("tver"),e=window.Shopify&&Shopify.theme?Shopify.theme.id:0;e&&nfec.store.control.Set("tver",e,186400,!0),t&e&&e!=t&&nfec.event_hub.Trigger("theme_version_change")}},nfec.modal={},nfec.modal.control={db:{},Start:function(){nfec.event_hub.ListenTo("close_modal",function(t,e){nfec.modal.control.Close(e)})},Run:function(t,e){if(e=e||"",!jQuery("#tdf_modal").length){jQuery("body").first().append(nfec.util.tpl.RenderTpl(nfec.modal.tplhtm,{name:e}));var n=document.getElementById("tdf_modal");window.onclick=function(o){o.target===n&&(n.style.display="none")}}var i=jQuery("#tdf_modal");if(e){if(i.attr("nm")===e)return void i.css("display","block");this.db[e]&&(maessage=this.db(e))}jQuery(".tdf_modal_body",i).html(t),i.css("display","block").attr("nm",e)},Remove:function(t){delete nfec.modal.control.db[t]},Close:function(t){var e=jQuery("#tdf_modal");t&&(nfec.modal.control.db[t]=e.html()),e.css("display","none")}},nfec.modal.tplhtm={m:'<div id="tdf_modal" class="tdf_container"><div class="tdf_popup_overlay tdfe" data-e="close_modal"></div><div class="tdf_modal_content"><a class="tdf_modal_close tdfe" data-e="close_modal" href="javascript:;">&times;</a><div class="tdf_modal_body"></div></div></div>',subs:[]},nfec.platform={},nfec.platform.shopify={},nfec.platform.shopify.cart_api={GetFirst:function(t){window.tdfEventHub.ListenToEvent("cart_data",function(e,n){var i=nfec.manager.setting.GetCurrency(),o=[];n.currency&&n.currency!=i&&(o.push(n.currency),o.push(i),nfec.manager.currency.NotDefault=1),o.length||nfec.manager.currency.DelCartCurrency();var r=0,c=function(){r===o.length&&(r&&(nfec.manager.currency.SetCartCurrency(n.currency),nfec.manager.currency.SetSelected(n.currency)),t(nfec.platform.shopify.cart_api.ConvertDataToCart(n)),nfec.platform.shopify.cart_api.fcur=n.currency)};c();for(var a=0;a<o.length;a++)nfec.manager.currency.Get(o[a],function(){r++,c()})},!0)},ConvertDataToCartItem:function(t,e){var n=new nfec.model.cart_item;n.id=t.id,n.properties=t.properties,n.variant_id=t.variant_id,n.variant_title=t.variant_title,n.title=t.title,n.image=t.image,n.quantity=parseInt(t.quantity),n.product_title=t.product_title||t.title,n.product_id=t.product_id,n.handle=t.handle,n.url=t.url,n.gift_card=t.gift_card,n.is_sub=!!t.selling_plan_allocation;var i=t.price;return isNaN(i)&&(i=i.replace(/[^\d.]/g,""),i=Number(i)),i=nfec.manager.currency.ConvertCartToDefault(i,e),n.price=i/100,n},ConvertDataToCart:function(t){typeof t=="string"&&(t=JSON.parse(t));var e=nfec.platform.shopify.cart_api.fcur;if(e&&t.currency&&t.currency!=e&&t.currency!=nfec.manager.setting.GetCurrency()&&!nfec.store.control.Get("rlo"))return nfec.store.control.Set("rlo","1",30,!0),void window.location.reload();var n=new nfec.model.cart;n.token=t.token,n.attributes=t.attributes||{},n.note=t.note||"",n.n_p=t.total_price/100,n.n_o_p=t.original_total_price/100;for(var i=0,o=t.items.length;i<o;i++)n.items.push(nfec.platform.shopify.cart_api.ConvertDataToCartItem(t.items[i],t.currency));return n.attributes.ml_lang&&nfec.store._cookie.Set("checkout_locale",n.attributes.ml_lang,86400),n},Get:function(t){nfec.util.request.Run({url:nfec.main.PRo+"cart.js?v="+nfec.util.tool.GetSecond(),success:function(e){t(nfec.platform.shopify.cart_api.ConvertDataToCart(e),e)},error:function(){t(null)}})},AddItem:function(t,e,n,i){var o={id:t,quantity:e};i&&(o.properties=i);var r=this;nfec.util.request.Run({method:"POST",url:nfec.main.PRo+"cart/add.js",dataType:"json",data:o,success:function(c){n&&n(r.ConvertDataToCartItem(c)),typeof window.customTdfTrack=="function"&&window.customTdfTrack(c,e),nfec.sync.cart.CheckLastListen()},error:function(){n&&n(null)}})},updateProp:function(t,e,n){var i={url:nfec.main.PRo+"cart/change.js",method:"POST",dataType:"json",data:{line:t,properties:e},success:function(o){n&&n(nfec.platform.shopify.cart_api.ConvertDataToCart(o))},error:function(){n&&n(null)}};nfec.util.request.Run(i)},AddAttr:function(t){var e={url:nfec.main.PRo+"cart/update.js",method:"POST",dataType:"json",data:{attributes:t},success:function(){},error:function(){}};nfec.util.request.Run(e)},UpdateItems:function(t,e,n){for(var i={updates:{}},o=function(f,l){try{_=f,u=l,window.ShopifyAnalytics.lib.track("Added Product",function(h,m){for(var g in m)m.hasOwnProperty(g)&&(h[g]=m[g]);return h}({variantId:_.id,productId:_.product_id,currency:window.ShopifyAnalytics.meta.currency,quantity:u,price:_.price/100,name:_.title,sku:_.sku,brand:_.vendor,variant:_.variant_title,category:_.product_type},(p={},window.ShopifyAnalytics.meta.page&&(p={pageType:window.ShopifyAnalytics.meta.page.pageType,resourceType:window.ShopifyAnalytics.meta.page.resourceType,resourceId:window.ShopifyAnalytics.meta.page.resourceId}),p))),typeof window.customTdfTrack=="function"&&window.customTdfTrack(f,l)}catch(h){console.log("Track",h)}var _,u,p},r=0,c=t.length;r<c;r++)i.updates[t[r].variant_id]=t[r].quantity;var a={url:nfec.main.PRo+"cart/update.js",method:"POST",dataType:"json",data:i,success:function(f){var l=nfec.platform.shopify.element.GetAddCartForms(!0),_=nfec.platform.shopify.cart_api.ConvertDataToCart(f),u=function(){e&&e(_)};nfec.sync.cart.CheckLastListen(1);for(var p=0;p<f.items.length;p++){var h=f.items[p];i.updates[h.variant_id]&&o(h,i.updates[h.variant_id])}var m=l.find('[name="id"],[name="id[]"]').first().val();if(m)if(m=parseInt(m)){for(var g,v,y=[],w=0,T=t.length;w<T;w++){var q=nfec.manager.product.FindByID(t[w].product_id);if(q){if(!window.tdf_merge_prop&&q.getVariantIDs().indexOf(m)==-1)continue;if(g=_.findItemIndex(t[w].product_id,t[w].variant_id),y.indexOf(g)==-1&&(y.push(g),!window.tdf_merge_prop))break}}if(y.length)if(v=_.items[y[0]]){var S=nfec.platform.shopify.element.GetItemProp(l);if(S){var k;for(var D in S)S.hasOwnProperty(D)&&(v.properties&&v.properties[D]||(k||(k={}),k[D]=S[D]));if(k){var I=0,C=function(){++I==y.length||9<I?u():nfec.platform.shopify.cart_api.updateProp(y[I]+1,k,C)};nfec.platform.shopify.cart_api.updateProp(y[I]+1,k,C)}else u()}else u()}else u();else u()}else u();else u()},error:function(){e&&e(null)}};n&&(a.xhrFields=n),nfec.util.request.Run(a)}},nfec.platform.shopify.product={ConvertDataToProduct:function(t){var e,n,i,o,r,c;(e=nfec.util.tool.DataToObject(nfec.model.product,t)).variants=[],n=t,e.images=[];for(var a=0,f=n.images.length;a<f;a++)o=n.images[a],r=nfec.util.tool.DataToObject(nfec.model.product_image,o),e.images.push(r);for(e.image=nfec.util.tool.DataToObject(nfec.model.product_image,e.image),a=0,f=n.variants.length;a<f;a++)o=n.variants[a],(i=nfec.util.tool.DataToObject(nfec.model.variant,o)).price=parseFloat(i.price),i.compare_at_price=parseFloat(i.compare_at_price),i.image=e.getImageByID(i.image_id),e.variants.push(i);for(e.options=[],a=0,f=n.options.length;a<f;a++)o=n.options[a],c=nfec.util.tool.DataToObject(nfec.model.product_option,o),e.options.push(c);return e.source="api",e},GetByHandle:function(t,e){nfec.util.request.Run({url:"/products/"+t+".json",success:function(n){e(nfec.platform.shopify.product.ConvertDataToProduct(n.product))},error:function(){e(null)}})},GetUrl:function(t){return"/products/"+t},GetHandleFromURL:function(t){var e=nfec.util.tool.GetLocation(t).pathname.split("/products/");return e.length==2?decodeURIComponent(e[1]):null},GetHandleFromHref:function(t){if(!t)return"";var e=t.split("/");return e=(e=e[e.length-1].split("?"))[0].split("#"),decodeURIComponent(e[0])}},nfec.platform.shopify.page={Detect:function(){var t=0,e={};if(window.__st&&window.__st.p)switch(window.__st.p){case"home":t=nfec.consta.PageTypeHome;break;case"product":t=nfec.consta.PageTypeProduct,e={id:parseInt(window.__st.rid)};break;case"collection":case"collections":t=nfec.consta.PageTypeCollection,e={id:window.__st.rid}}else window.__st&&window.__st.t=="checkout"?(t=window.location.pathname.indexOf("thank_you")!==-1||jQuery("html").hasClass("page--thank-you")?nfec.consta.PageTypePostCheckout:window.location.search.indexOf("previous_step")===-1?nfec.consta.PageTypeCheckout:nfec.consta.PageTypeProcessCheckout,e.isInCheckout=!0):/\/cart([^a-zA-Z0-9]|$)/.test(window.location.pathname)?t=nfec.consta.PageTypeCart:window.location.pathname==="/"&&(t=nfec.consta.PageTypeHome);return{type:t,payload:e}}},nfec.platform.shopify.cart_handle={UpdateThemeCart:function(t){var e=nfec.platform.shopify.element.GetCartForms(),n=(o=jQuery(e)).length;if(!n){var i=jQuery(".cartFlagX");i.length&&i.siblings().each(function(){(jQuery(this).find('*[data-tdf-cart-total="1"]').length||jQuery(this).find(".tdf-cart-total-flag").length)&&(o=jQuery(this),n++)})}var o,r=(o=o.first()).text();(function(){try{try{jQuery("body").trigger("added.ajaxProduct")}catch(u){}var c=window.ajaxCart;if(typeof c=="object"&&typeof c.load=="function"&&c.load(),typeof window.California=="object"){var a=nfec.platform.shopify.element.getAddCartForms(),f=jQuery(a+" a.submit.processing");f.length&&(f.prev("#addToCart").show(),f.remove())}if(!window.Shopify||nfec.platform.current.element.CheckTheme("ShowTime"))return;if(nfec.platform.current.element.CheckTheme("Narrative")){var l="ajax-cart__toggle";jQuery("a.site-header__cart."+l).removeClass(l)}if(typeof Shopify.onSuccess=="function"&&Shopify.onSuccess(),typeof Shopify.updateSideCart=="function"&&Shopify.updateSideCart(),typeof Shopify.onCartUpdate=="function"||typeof Shopify.updateQuickCart=="function"){var _=window.alert;window.alert=console.log,typeof Shopify.onCartUpdate=="function"&&Shopify.onCartUpdate(t),typeof Shopify.updateQuickCart=="function"&&Shopify.updateQuickCart(t),window.alert=_}}catch(u){console.error(u)}})(),setTimeout(function(){var c=!1;if(o.text()==r&&n)return c=!0,void nfec.event_hub.TriggerOnce("need_reload_page",{});var a=nfec.platform.shopify.element.GetCartMiniIcon(),f=jQuery(a).filter(function(){return jQuery(this).hasClass("tdf_cart_icon")}),l=!1;f.length&&(l=!0),(c||l)&&nfec.util.request.Run({url:window.location.href,dataType:"html",success:function(_){(function(u){if(l){var p=u.find(a);p.length==f.length&&p.each(function(h){try{var m=jQuery(f[h]);m.is(":visible")&&m.replaceWith(jQuery(this))}catch(g){console.error(g)}})}})(jQuery(_))}})},1e3)},IsAjaxAddProduct:function(t){if(t.location.pathname.indexOf("cart/add")==-1)return!1;var e=t.responseJSON||t.responseText||{};if(typeof e=="string"&&(e=JSON.parse(e)),!e.variant_id){if(!e.items||!e.items.length)return;e=e.items[0]}var n=nfec.platform.shopify.cart_api.ConvertDataToCartItem(e);return n.quantity_changed=t.data.quantity?t.data.quantity:1,{item:n}},IsAjaxUpdateCart:function(t){var e=t.location.pathname;if(e.indexOf("cart")==-1||t.method!="POST"&&e.indexOf("cart/change")==-1&&e.indexOf("cart/update")==-1)return!1;var n=t.responseJSON||t.responseText||{};if(typeof n=="string")try{n=JSON.parse(n)}catch(i){return!1}return!!n.items&&{cart:nfec.platform.shopify.cart_api.ConvertDataToCart(n),cartraw:n}},IsAjaxGetCart:function(t){return(t.location.pathname.indexOf("cart.js")!=-1||t.location.href.indexOf("/cart?view=")!=-1)&&{}}},nfec.platform.shopify.redirect={GoToCheckoutPage:function(t){if(!t){var e="tdf-virtual-ck-btn",n=sl9.nfec.platform.current.element.GetCartForms(),i=jQuery(n);if(i.length){var o=!1;if(i.each(function(){if(!o){var f=jQuery(this);f.find(".tdf-cart-total-flag").length&&f.height()&&(o=!0,setTimeout(function(){nfec.platform.shopify.redirect.GoToCheckoutPage(!0)},4e3),f.prop("tagName")=="FORM"&&(window.ZapTree?f.submit():(f.append('<button type="submit" name="checkout" style="display:none" class="'+e+'"></button>'),jQuery("."+e).trigger("click"))))}}),o)return}}var r=[],c=nfec.manager.coupon.Get();c&&r.push("discount="+c);var a="/checkout";r.length&&(a+="?"+r.join("&")),nfec.util.tool.Redirect(a)},GoToCartPage:function(){nfec.util.tool.Redirect(nfec.main.PRo+"cart")},GoToHomePage:function(){nfec.util.tool.Redirect(nfec.main.PRo)},GoToCollectionPage:function(){nfec.util.tool.Redirect(nfec.main.PRo+"collections/all?sort_by=best-selling")},GoToProductPage:function(t,e){e&&(t+="?variant="+e),nfec.util.tool.Redirect(nfec.main.PRo+"products/"+t)}},nfec.platform.shopify.element={GetAddCartForms:function(t){var e=jQuery('form[action*="/cart/add"]:not(.ssw-hide,.formignore)'),n=jQuery(),i=-1;return e.each(function(){var o=jQuery(this);if(!o.closest(".owl-item,#cart_form_sticky,.mega-menu,#cart-form-sticky,.sidebar-block,#quick-view,.sticky_form").length){var r=0;o.is(":visible")&&!o.is(":hidden")&&o.height()&&o.css("opacity")!="0"||(r+=-1),o.find('[name="id"],[name="id[]"]').length&&(r+=3),r<i||r==i&&o.height()<=n.height()||(i=r,n=o)}}),n},GetCartForms:function(){return'form[action$="/cart"],form[action="/checkout"],form[action*="/cart?"],form[action*="/checkout?"],.tdf-custom-cart'},GetCartFormDom:function(t){var e=jQuery(nfec.platform.shopify.element.GetCartForms()),n=jQuery(),i=-2;return e.length||(e=jQuery('form[action="/a/dropicheckout"]')),e.each(function(){var o=jQuery(this),r=0;o.is(":visible")&&!o.is(":hidden")&&o.height()&&o.css("opacity")!="0"||(r+=-1),o.find('[name="updates[]"],a[href^="/cart/change"]').length&&(r+=2),r<i||r==i&&o.height()<=n.height()||(i=r,n=o)}),n},GetCartMiniIcon:function(){return['a[href$="/cart"]','a[href="#cart"]',".cart-icon .count",".total_count_ajax"].join(",")},GetCheckoutButton:function(){return'button[name="checkout"],button[name="Checkout"],input[name="checkout"],form[action^="/checkout"] [type="submit"], .bk-cart-checkout,[href^="/checkout"],button[value="Checkout"],input[value="Checkout"],[name="goto_pp"]'},GetImageSrcBySize:function(t,e){if(!t)return"https://cdn.shopify.com/s/images/admin/no-image-large.gif";var n="https://cdn.shopify.com/";t.indexOf("https://")!==0&&(t=n+t),e==="master"&&(e="");var i=t.match(/\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\?v=\d+)?$/i);if(i!==null){var o=t.split(i[0]);o.pop(),n=o.join(i[0]);var r=i[0];return e?n+"_"+e+r:n+r}return t},GetItemProp:function(t){for(var e,n="properties[",i=t.serializeArray(),o=0;o<i.length;o++)i[o].value&&i[o].name.indexOf(n)===0&&(e||(e={}),e[i[o].name.slice(n.length,i[o].name.length-1)+""]=i[o].value+"");return e},CheckTheme:function(t){var e="";return window.BOOMR&&(e=window.BOOMR.themeName),!(!e||e.indexOf(t)==-1)||(window.Shopify&&Shopify.theme&&(e=Shopify.theme.name),!(!e||e.indexOf(t)==-1))}},nfec.platform.base={},nfec.platform.base.cart_api={Get:function(t){},GetFirst:function(t){nfec.platform.current.cart_api.Get(t)},AddItem:function(t,e,n,i){},UpdateItems:function(t,e){},ReplaceItem:function(t,e,n){var i=[],o=nfec.manager.cart.Get(),r=o.findItemByVariant(e.product_id,e.variant_id);removedItem=o.findItemByVariant(t.product_id,t.variant_id),r||((r=new nfec.model.cart_item).product_id=e.product_id,r.variant_id=e.variant_id);var c=removedItem?removedItem.quantity:1;r.quantity+=c,removedItem&&(removedItem.quantity=0,i.push(removedItem)),i.push(r),nfec.platform.current.cart_api.UpdateItems(i,n,{_isreplace:1})},AddItems:function(t,e){for(var n,i,o=[],r={},c=nfec.manager.cart.Get(),a=0,f=t.length;a<f;a++)r[i=t[a].product_id+"_"+t[a].variant_id]===void 0?((n=c.findItemByVariant(t[a].product_id,t[a].variant_id))||((n=new nfec.model.cart_item).product_id=t[a].product_id,n.variant_id=t[a].variant_id),n.quantity+=t[a].quantity,o.push(n),r[i]=o.length-1):o[r[i]].quantity+=t[a].quantity;nfec.platform.current.cart_api.UpdateItems(o,e)}},nfec.platform.base.cart_handle={UpdateThemeCart:function(t){},IsAjaxAddProduct:function(t){},IsAjaxUpdateCart:function(t){}},nfec.platform.base.element={GetAddCartForms:function(){},GetCartForms:function(){},GetCartMiniIcon:function(){},GetCheckoutButton:function(){},GetImageSrcBySize:function(t,e){return t},CheckTheme:function(t){}},nfec.platform.base.page={IsInCheckout:function(t){return[5,7].indexOf(t)!=-1}},nfec.platform.base.product={GetByHandle:function(t,e){},GetUrl:function(t){}},nfec.platform.base.redirect={GoToCheckoutPage:function(){},GoToCartPage:function(){},GoToHomePage:function(){},GoToCollectionPage:function(){}},nfec.main&&nfec.main.Init&&nfec.main.Init(),tdfEventHub.ListenToEvent("jsloaded_nfec",function(t,e){nfec.nfec=e()},!0),tdfEventHub.ListenToEvent("core_ready",function(){nfec.nfec.main.AddStyle('@-webkit-keyframes slideIn{from{bottom:-300px;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}to{bottom:0;opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}}@-moz-keyframes slideIn{from{bottom:-300px;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}to{bottom:0;opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}}@-ms-keyframes slideIn{from{bottom:-300px;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}to{bottom:0;opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}}@keyframes slideIn{from{bottom:-300px;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}to{bottom:0;opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}}@-webkit-keyframes fadeIn{from{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}to{opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}}@-moz-keyframes fadeIn{from{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}to{opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}}@-ms-keyframes fadeIn{from{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}to{opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}}@keyframes fadeIn{from{opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}to{opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}}@-webkit-keyframes sk-scaleout{0%{-webkit-transform:scale(0)}100%{-webkit-transform:scale(1);opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}}@keyframes sk-scaleout{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1);opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}}#tdf_currency.tdf_container *,#tdf_currency.tdf_container *:before,#tdf_currency.tdf_container *:after,#tdf_bar.tdf_container *,#tdf_bar.tdf_container *:before,#tdf_bar.tdf_container *:after,#tdf_notify.tdf_container *,#tdf_notify.tdf_container *:before,#tdf_notify.tdf_container *:after,#tdf_upsell.tdf_container *,#tdf_upsell.tdf_container *:before,#tdf_upsell.tdf_container *:after,#tdf_notifies.tdf_container *,#tdf_notifies.tdf_container *:before,#tdf_notifies.tdf_container *:after,#tdf_modal.tdf_container *,#tdf_modal.tdf_container *:before,#tdf_modal.tdf_container *:after,.tdf_bundle.tdf_container *,.tdf_bundle.tdf_container *:before,.tdf_bundle.tdf_container *:after,#tdf_psale.tdf_container *,#tdf_psale.tdf_container *:before,#tdf_psale.tdf_container *:after,.tdf_rec_stable_2.tdf_rec *,.tdf_rec_stable_2.tdf_rec *:before,.tdf_rec_stable_2.tdf_rec *:after,#tdf_discount_widget.tdf_container *,#tdf_discount_widget.tdf_container *:before,#tdf_discount_widget.tdf_container *:after,#tdf_discount_box.tdf_container *,#tdf_discount_box.tdf_container *:before,#tdf_discount_box.tdf_container *:after,#tdf_quickview [class^="tdf"]{-webkit-overflow-scrolling:touch;min-height:initial;min-width:initial;max-height:initial;max-width:initial;line-height:initial;height:initial;width:initial;background:initial;background-color:initial;background-image:initial;background-position:initial;background-repeat:initial;border-color:initial;border-style:initial;border-width:initial;opacity:initial;quotes:initial;font-weight:initial;font-size:initial;list-style:initial;list-style-image:initial;list-style-position:initial;list-style-type:initial;position:initial;top:initial;right:initial;bottom:initial;left:initial;right:initial;float:initial;z-index:initial;overflow:initial;visibility:initial;text-indent:initial;padding:0;margin:0;outline:none;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}#tdf_currency.tdf_container a,#tdf_bar.tdf_container a,#tdf_notify.tdf_container a,#tdf_upsell.tdf_container a,#tdf_notifies.tdf_container a,#tdf_modal.tdf_container a,.tdf_bundle.tdf_container a,#tdf_psale.tdf_container a,.tdf_rec_stable_2.tdf_rec a,#tdf_discount_widget.tdf_container a,#tdf_discount_box.tdf_container a,#tdf_quickview [class^="tdf"] a{cursor:pointer}#tdf_currency.tdf_container button,#tdf_bar.tdf_container button,#tdf_notify.tdf_container button,#tdf_upsell.tdf_container button,#tdf_notifies.tdf_container button,#tdf_modal.tdf_container button,.tdf_bundle.tdf_container button,#tdf_psale.tdf_container button,.tdf_rec_stable_2.tdf_rec button,#tdf_discount_widget.tdf_container button,#tdf_discount_box.tdf_container button,#tdf_quickview [class^="tdf"] button{padding:8px 13px;font-size:16px;line-height:20px;width:100%;color:#fffffe;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;cursor:pointer}#tdf_currency.tdf_container strong,#tdf_bar.tdf_container strong,#tdf_notify.tdf_container strong,#tdf_upsell.tdf_container strong,#tdf_notifies.tdf_container strong,#tdf_modal.tdf_container strong,.tdf_bundle.tdf_container strong,#tdf_psale.tdf_container strong,.tdf_rec_stable_2.tdf_rec strong,#tdf_discount_widget.tdf_container strong,#tdf_discount_box.tdf_container strong,#tdf_quickview [class^="tdf"] strong{font-weight:400}#tdf_currency.tdf_container h2,#tdf_bar.tdf_container h2,#tdf_notify.tdf_container h2,#tdf_upsell.tdf_container h2,#tdf_notifies.tdf_container h2,#tdf_modal.tdf_container h2,.tdf_bundle.tdf_container h2,#tdf_psale.tdf_container h2,.tdf_rec_stable_2.tdf_rec h2,#tdf_discount_widget.tdf_container h2,#tdf_discount_box.tdf_container h2,#tdf_quickview [class^="tdf"] h2{font-size:16px}#tdf_currency.tdf_container h3,#tdf_bar.tdf_container h3,#tdf_notify.tdf_container h3,#tdf_upsell.tdf_container h3,#tdf_notifies.tdf_container h3,#tdf_modal.tdf_container h3,.tdf_bundle.tdf_container h3,#tdf_psale.tdf_container h3,.tdf_rec_stable_2.tdf_rec h3,#tdf_discount_widget.tdf_container h3,#tdf_discount_box.tdf_container h3,#tdf_quickview [class^="tdf"] h3{font-size:13px}#tdf_currency.tdf_container h4,#tdf_bar.tdf_container h4,#tdf_notify.tdf_container h4,#tdf_upsell.tdf_container h4,#tdf_notifies.tdf_container h4,#tdf_modal.tdf_container h4,.tdf_bundle.tdf_container h4,#tdf_psale.tdf_container h4,.tdf_rec_stable_2.tdf_rec h4,#tdf_discount_widget.tdf_container h4,#tdf_discount_box.tdf_container h4,#tdf_quickview [class^="tdf"] h4{font-weight:500;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;position:relative;text-overflow:ellipsis;white-space:normal;word-wrap:break-word;max-height:52px;text-transform:none;font-size:13px}@media screen and (min-width: 768px){#tdf_currency.tdf_container h4,#tdf_bar.tdf_container h4,#tdf_notify.tdf_container h4,#tdf_upsell.tdf_container h4,#tdf_notifies.tdf_container h4,#tdf_modal.tdf_container h4,.tdf_bundle.tdf_container h4,#tdf_psale.tdf_container h4,.tdf_rec_stable_2.tdf_rec h4,#tdf_discount_widget.tdf_container h4,#tdf_discount_box.tdf_container h4,#tdf_quickview [class^="tdf"] h4{font-size:18px}#tdf_currency.tdf_container h3,#tdf_bar.tdf_container h3,#tdf_notify.tdf_container h3,#tdf_upsell.tdf_container h3,#tdf_notifies.tdf_container h3,#tdf_modal.tdf_container h3,.tdf_bundle.tdf_container h3,#tdf_psale.tdf_container h3,.tdf_rec_stable_2.tdf_rec h3,#tdf_discount_widget.tdf_container h3,#tdf_discount_box.tdf_container h3,#tdf_quickview [class^="tdf"] h3{font-size:18px}#tdf_currency.tdf_container button,#tdf_bar.tdf_container button,#tdf_notify.tdf_container button,#tdf_upsell.tdf_container button,#tdf_notifies.tdf_container button,#tdf_modal.tdf_container button,.tdf_bundle.tdf_container button,#tdf_psale.tdf_container button,.tdf_rec_stable_2.tdf_rec button,#tdf_discount_widget.tdf_container button,#tdf_discount_box.tdf_container button,#tdf_quickview [class^="tdf"] button{font-size:18px}}@media screen and (min-width: 1441px){#tdf_currency.tdf_container h4,#tdf_bar.tdf_container h4,#tdf_notify.tdf_container h4,#tdf_upsell.tdf_container h4,#tdf_notifies.tdf_container h4,#tdf_modal.tdf_container h4,.tdf_bundle.tdf_container h4,#tdf_psale.tdf_container h4,.tdf_rec_stable_2.tdf_rec h4,#tdf_discount_widget.tdf_container h4,#tdf_discount_box.tdf_container h4,#tdf_quickview [class^="tdf"] h4{max-height:60px}}#tdf_currency.tdf_container *,#tdf_currency.tdf_container *:before,#tdf_currency.tdf_container *:after,#tdf_bar.tdf_container *,#tdf_bar.tdf_container *:before,#tdf_bar.tdf_container *:after,#tdf_notify.tdf_container *,#tdf_notify.tdf_container *:before,#tdf_notify.tdf_container *:after,#tdf_upsell.tdf_container *,#tdf_upsell.tdf_container *:before,#tdf_upsell.tdf_container *:after,#tdf_notifies.tdf_container *,#tdf_notifies.tdf_container *:before,#tdf_notifies.tdf_container *:after,#tdf_modal.tdf_container *,#tdf_modal.tdf_container *:before,#tdf_modal.tdf_container *:after{color:#212B36}.tdf_bundle.tdf_container *,.tdf_bundle.tdf_container *:before,.tdf_bundle.tdf_container *:after,#tdf_psale.tdf_container *,#tdf_psale.tdf_container *:before,#tdf_psale.tdf_container *:after,.tdf_rec_stable_2.tdf_rec *,.tdf_rec_stable_2.tdf_rec *:before,.tdf_rec_stable_2.tdf_rec *:after,#tdf_discount_widget.tdf_container *,#tdf_discount_widget.tdf_container *:before,#tdf_discount_widget.tdf_container *:after,#tdf_discount_box.tdf_container *,#tdf_discount_box.tdf_container *:before,#tdf_discount_box.tdf_container *:after{color:#212B35}#tdf_quickview [class^="tdf"]{color:#212B36}.tdf_disable_scroll{overflow:hidden !important}.tdf_money{white-space:nowrap}#satcb_bar .tdf_select_input{display:none !important}#tdf_currency.tdf_container .tdf_hidden,#tdf_bar.tdf_container .tdf_hidden,#tdf_wholesale.tdf_container .tdf_hidden,#tdf_modal.tdf_container .tdf_hidden,#tdf_notify.tdf_container .tdf_hidden,#tdf_upsell.tdf_container .tdf_hidden,.tdf_bundle.tdf_container .tdf_hidden,#tdf_quickview.tdf_container .tdf_hidden,#tdf_sale_widget.tdf_container .tdf_hidden,#tdf_discount_widget.tdf_container .tdf_hidden,.tdf_rec_stable_2.tdf_rec .tdf_hidden,#tdf_psale.tdf_container .tdf_hidden{display:none}#tdf_currency.tdf_container .tdf_dialog_modal,#tdf_bar.tdf_container .tdf_dialog_modal,#tdf_wholesale.tdf_container .tdf_dialog_modal,#tdf_modal.tdf_container .tdf_dialog_modal,#tdf_notify.tdf_container .tdf_dialog_modal,#tdf_upsell.tdf_container .tdf_dialog_modal,.tdf_bundle.tdf_container .tdf_dialog_modal,#tdf_quickview.tdf_container .tdf_dialog_modal,#tdf_sale_widget.tdf_container .tdf_dialog_modal,#tdf_discount_widget.tdf_container .tdf_dialog_modal,.tdf_rec_stable_2.tdf_rec .tdf_dialog_modal,#tdf_psale.tdf_container .tdf_dialog_modal{min-height:100%;position:fixed;width:100%;height:100%;top:0;left:0;z-index:999999989;overflow-y:scroll;text-align:center;background-image:url(S_PATH/fe/nfec/img/background_bg.png)}#tdf_currency.tdf_container .tdf_dialog_qv,#tdf_currency.tdf_container .tdf_dialog_content,#tdf_bar.tdf_container .tdf_dialog_qv,#tdf_bar.tdf_container .tdf_dialog_content,#tdf_wholesale.tdf_container .tdf_dialog_qv,#tdf_wholesale.tdf_container .tdf_dialog_content,#tdf_modal.tdf_container .tdf_dialog_qv,#tdf_modal.tdf_container .tdf_dialog_content,#tdf_notify.tdf_container .tdf_dialog_qv,#tdf_notify.tdf_container .tdf_dialog_content,#tdf_upsell.tdf_container .tdf_dialog_qv,#tdf_upsell.tdf_container .tdf_dialog_content,.tdf_bundle.tdf_container .tdf_dialog_qv,.tdf_bundle.tdf_container .tdf_dialog_content,#tdf_quickview.tdf_container .tdf_dialog_qv,#tdf_quickview.tdf_container .tdf_dialog_content,#tdf_sale_widget.tdf_container .tdf_dialog_qv,#tdf_sale_widget.tdf_container .tdf_dialog_content,#tdf_discount_widget.tdf_container .tdf_dialog_qv,#tdf_discount_widget.tdf_container .tdf_dialog_content,.tdf_rec_stable_2.tdf_rec .tdf_dialog_qv,.tdf_rec_stable_2.tdf_rec .tdf_dialog_content,#tdf_psale.tdf_container .tdf_dialog_qv,#tdf_psale.tdf_container .tdf_dialog_content{background:#fffefe;width:100%;position:relative;top:36px}#tdf_currency.tdf_container .tdf_close_btn,#tdf_bar.tdf_container .tdf_close_btn,#tdf_wholesale.tdf_container .tdf_close_btn,#tdf_modal.tdf_container .tdf_close_btn,#tdf_notify.tdf_container .tdf_close_btn,#tdf_upsell.tdf_container .tdf_close_btn,.tdf_bundle.tdf_container .tdf_close_btn,#tdf_quickview.tdf_container .tdf_close_btn,#tdf_sale_widget.tdf_container .tdf_close_btn,#tdf_discount_widget.tdf_container .tdf_close_btn,.tdf_rec_stable_2.tdf_rec .tdf_close_btn,#tdf_psale.tdf_container .tdf_close_btn{background-position:center;background-image:url(S_PATH/fe/nfec/img/close-mini-1.png);background-size:contain;background-repeat:no-repeat;display:inline-block;height:16px;width:16px;opacity:.6;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";filter:alpha(opacity=60);position:absolute;right:10px;top:10px;z-index:2147483647;bottom:100%;cursor:pointer}#tdf_currency.tdf_container .tdf_normal_btn,#tdf_bar.tdf_container .tdf_normal_btn,#tdf_wholesale.tdf_container .tdf_normal_btn,#tdf_modal.tdf_container .tdf_normal_btn,#tdf_notify.tdf_container .tdf_normal_btn,#tdf_upsell.tdf_container .tdf_normal_btn,.tdf_bundle.tdf_container .tdf_normal_btn,#tdf_quickview.tdf_container .tdf_normal_btn,#tdf_sale_widget.tdf_container .tdf_normal_btn,#tdf_discount_widget.tdf_container .tdf_normal_btn,.tdf_rec_stable_2.tdf_rec .tdf_normal_btn,#tdf_psale.tdf_container .tdf_normal_btn{background-color:#4267b2;border:none}#tdf_currency.tdf_container .tdf_cta_btn.tdf_inactive_checkout,#tdf_bar.tdf_container .tdf_cta_btn.tdf_inactive_checkout,#tdf_wholesale.tdf_container .tdf_cta_btn.tdf_inactive_checkout,#tdf_modal.tdf_container .tdf_cta_btn.tdf_inactive_checkout,#tdf_notify.tdf_container .tdf_cta_btn.tdf_inactive_checkout,#tdf_upsell.tdf_container .tdf_cta_btn.tdf_inactive_checkout,.tdf_bundle.tdf_container .tdf_cta_btn.tdf_inactive_checkout,#tdf_quickview.tdf_container .tdf_cta_btn.tdf_inactive_checkout,#tdf_sale_widget.tdf_container .tdf_cta_btn.tdf_inactive_checkout,#tdf_discount_widget.tdf_container .tdf_cta_btn.tdf_inactive_checkout,.tdf_rec_stable_2.tdf_rec .tdf_cta_btn.tdf_inactive_checkout,#tdf_psale.tdf_container .tdf_cta_btn.tdf_inactive_checkout{background-color:#d4d6e7;color:#637387}#tdf_currency.tdf_container .tdf_cta_btn.unavailable,#tdf_currency.tdf_container .tdf_normal_btn.unavailable,#tdf_bar.tdf_container .tdf_cta_btn.unavailable,#tdf_bar.tdf_container .tdf_normal_btn.unavailable,#tdf_wholesale.tdf_container .tdf_cta_btn.unavailable,#tdf_wholesale.tdf_container .tdf_normal_btn.unavailable,#tdf_modal.tdf_container .tdf_cta_btn.unavailable,#tdf_modal.tdf_container .tdf_normal_btn.unavailable,#tdf_notify.tdf_container .tdf_cta_btn.unavailable,#tdf_notify.tdf_container .tdf_normal_btn.unavailable,#tdf_upsell.tdf_container .tdf_cta_btn.unavailable,#tdf_upsell.tdf_container .tdf_normal_btn.unavailable,.tdf_bundle.tdf_container .tdf_cta_btn.unavailable,.tdf_bundle.tdf_container .tdf_normal_btn.unavailable,#tdf_quickview.tdf_container .tdf_cta_btn.unavailable,#tdf_quickview.tdf_container .tdf_normal_btn.unavailable,#tdf_sale_widget.tdf_container .tdf_cta_btn.unavailable,#tdf_sale_widget.tdf_container .tdf_normal_btn.unavailable,#tdf_discount_widget.tdf_container .tdf_cta_btn.unavailable,#tdf_discount_widget.tdf_container .tdf_normal_btn.unavailable,.tdf_rec_stable_2.tdf_rec .tdf_cta_btn.unavailable,.tdf_rec_stable_2.tdf_rec .tdf_normal_btn.unavailable,#tdf_psale.tdf_container .tdf_cta_btn.unavailable,#tdf_psale.tdf_container .tdf_normal_btn.unavailable{background-color:#d4d6e4;color:#637383}#tdf_currency.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,#tdf_currency.tdf_container .tdf_cta_btn:hover,#tdf_currency.tdf_container .tdf_cta_btn.unavailable:hover,#tdf_currency.tdf_container .tdf_normal_btn.unavailable:hover,#tdf_currency.tdf_container .tdf_normal_btn:hover,#tdf_bar.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,#tdf_bar.tdf_container .tdf_cta_btn:hover,#tdf_bar.tdf_container .tdf_cta_btn.unavailable:hover,#tdf_bar.tdf_container .tdf_normal_btn.unavailable:hover,#tdf_bar.tdf_container .tdf_normal_btn:hover,#tdf_wholesale.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,#tdf_wholesale.tdf_container .tdf_cta_btn:hover,#tdf_wholesale.tdf_container .tdf_cta_btn.unavailable:hover,#tdf_wholesale.tdf_container .tdf_normal_btn.unavailable:hover,#tdf_wholesale.tdf_container .tdf_normal_btn:hover,#tdf_modal.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,#tdf_modal.tdf_container .tdf_cta_btn:hover,#tdf_modal.tdf_container .tdf_cta_btn.unavailable:hover,#tdf_modal.tdf_container .tdf_normal_btn.unavailable:hover,#tdf_modal.tdf_container .tdf_normal_btn:hover,#tdf_notify.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,#tdf_notify.tdf_container .tdf_cta_btn:hover,#tdf_notify.tdf_container .tdf_cta_btn.unavailable:hover,#tdf_notify.tdf_container .tdf_normal_btn.unavailable:hover,#tdf_notify.tdf_container .tdf_normal_btn:hover,#tdf_upsell.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,#tdf_upsell.tdf_container .tdf_cta_btn:hover,#tdf_upsell.tdf_container .tdf_cta_btn.unavailable:hover,#tdf_upsell.tdf_container .tdf_normal_btn.unavailable:hover,#tdf_upsell.tdf_container .tdf_normal_btn:hover,.tdf_bundle.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,.tdf_bundle.tdf_container .tdf_cta_btn:hover,.tdf_bundle.tdf_container .tdf_cta_btn.unavailable:hover,.tdf_bundle.tdf_container .tdf_normal_btn.unavailable:hover,.tdf_bundle.tdf_container .tdf_normal_btn:hover,#tdf_quickview.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,#tdf_quickview.tdf_container .tdf_cta_btn:hover,#tdf_quickview.tdf_container .tdf_cta_btn.unavailable:hover,#tdf_quickview.tdf_container .tdf_normal_btn.unavailable:hover,#tdf_quickview.tdf_container .tdf_normal_btn:hover,#tdf_sale_widget.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,#tdf_sale_widget.tdf_container .tdf_cta_btn:hover,#tdf_sale_widget.tdf_container .tdf_cta_btn.unavailable:hover,#tdf_sale_widget.tdf_container .tdf_normal_btn.unavailable:hover,#tdf_sale_widget.tdf_container .tdf_normal_btn:hover,#tdf_discount_widget.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,#tdf_discount_widget.tdf_container .tdf_cta_btn:hover,#tdf_discount_widget.tdf_container .tdf_cta_btn.unavailable:hover,#tdf_discount_widget.tdf_container .tdf_normal_btn.unavailable:hover,#tdf_discount_widget.tdf_container .tdf_normal_btn:hover,.tdf_rec_stable_2.tdf_rec .tdf_cta_btn.tdf_inactive_checkout:hover,.tdf_rec_stable_2.tdf_rec .tdf_cta_btn:hover,.tdf_rec_stable_2.tdf_rec .tdf_cta_btn.unavailable:hover,.tdf_rec_stable_2.tdf_rec .tdf_normal_btn.unavailable:hover,.tdf_rec_stable_2.tdf_rec .tdf_normal_btn:hover,#tdf_psale.tdf_container .tdf_cta_btn.tdf_inactive_checkout:hover,#tdf_psale.tdf_container .tdf_cta_btn:hover,#tdf_psale.tdf_container .tdf_cta_btn.unavailable:hover,#tdf_psale.tdf_container .tdf_normal_btn.unavailable:hover,#tdf_psale.tdf_container .tdf_normal_btn:hover{opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80)}#tdf_currency.tdf_container .tdf_cta_btn,#tdf_bar.tdf_container .tdf_cta_btn,#tdf_wholesale.tdf_container .tdf_cta_btn,#tdf_modal.tdf_container .tdf_cta_btn,#tdf_notify.tdf_container .tdf_cta_btn,#tdf_upsell.tdf_container .tdf_cta_btn,.tdf_bundle.tdf_container .tdf_cta_btn,#tdf_quickview.tdf_container .tdf_cta_btn,#tdf_sale_widget.tdf_container .tdf_cta_btn,#tdf_discount_widget.tdf_container .tdf_cta_btn,.tdf_rec_stable_2.tdf_rec .tdf_cta_btn,#tdf_psale.tdf_container .tdf_cta_btn{background-color:#61bd4f;color:#fffffb}#tdf_currency.tdf_container .tdf_popup_overlay,#tdf_bar.tdf_container .tdf_popup_overlay,#tdf_wholesale.tdf_container .tdf_popup_overlay,#tdf_modal.tdf_container .tdf_popup_overlay,#tdf_notify.tdf_container .tdf_popup_overlay,#tdf_upsell.tdf_container .tdf_popup_overlay,.tdf_bundle.tdf_container .tdf_popup_overlay,#tdf_quickview.tdf_container .tdf_popup_overlay,#tdf_sale_widget.tdf_container .tdf_popup_overlay,#tdf_discount_widget.tdf_container .tdf_popup_overlay,.tdf_rec_stable_2.tdf_rec .tdf_popup_overlay,#tdf_psale.tdf_container .tdf_popup_overlay{position:fixed;top:0;bottom:0;right:0;left:0;background:#000;opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80)}#tdf_currency.tdf_container .tdf_link_view_cart,#tdf_bar.tdf_container .tdf_link_view_cart,#tdf_wholesale.tdf_container .tdf_link_view_cart,#tdf_modal.tdf_container .tdf_link_view_cart,#tdf_notify.tdf_container .tdf_link_view_cart,#tdf_upsell.tdf_container .tdf_link_view_cart,.tdf_bundle.tdf_container .tdf_link_view_cart,#tdf_quickview.tdf_container .tdf_link_view_cart,#tdf_sale_widget.tdf_container .tdf_link_view_cart,#tdf_discount_widget.tdf_container .tdf_link_view_cart,.tdf_rec_stable_2.tdf_rec .tdf_link_view_cart,#tdf_psale.tdf_container .tdf_link_view_cart{color:#4267b2;text-decoration:none}#tdf_currency.tdf_container .tdf_link_view_cart:hover,#tdf_bar.tdf_container .tdf_link_view_cart:hover,#tdf_wholesale.tdf_container .tdf_link_view_cart:hover,#tdf_modal.tdf_container .tdf_link_view_cart:hover,#tdf_notify.tdf_container .tdf_link_view_cart:hover,#tdf_upsell.tdf_container .tdf_link_view_cart:hover,.tdf_bundle.tdf_container .tdf_link_view_cart:hover,#tdf_quickview.tdf_container .tdf_link_view_cart:hover,#tdf_sale_widget.tdf_container .tdf_link_view_cart:hover,#tdf_discount_widget.tdf_container .tdf_link_view_cart:hover,.tdf_rec_stable_2.tdf_rec .tdf_link_view_cart:hover,#tdf_psale.tdf_container .tdf_link_view_cart:hover{text-decoration:underline}#tdf_currency.tdf_container .tdf_select_box,#tdf_bar.tdf_container .tdf_select_box,#tdf_wholesale.tdf_container .tdf_select_box,#tdf_modal.tdf_container .tdf_select_box,#tdf_notify.tdf_container .tdf_select_box,#tdf_upsell.tdf_container .tdf_select_box,.tdf_bundle.tdf_container .tdf_select_box,#tdf_quickview.tdf_container .tdf_select_box,#tdf_sale_widget.tdf_container .tdf_select_box,#tdf_discount_widget.tdf_container .tdf_select_box,.tdf_rec_stable_2.tdf_rec .tdf_select_box,#tdf_psale.tdf_container .tdf_select_box{position:relative;width:100%;margin:0 0 8px}#tdf_currency.tdf_container .tdf_select_input,#tdf_bar.tdf_container .tdf_select_input,#tdf_wholesale.tdf_container .tdf_select_input,#tdf_modal.tdf_container .tdf_select_input,#tdf_notify.tdf_container .tdf_select_input,#tdf_upsell.tdf_container .tdf_select_input,.tdf_bundle.tdf_container .tdf_select_input,#tdf_quickview.tdf_container .tdf_select_input,#tdf_sale_widget.tdf_container .tdf_select_input,#tdf_discount_widget.tdf_container .tdf_select_input,.tdf_rec_stable_2.tdf_rec .tdf_select_input,#tdf_psale.tdf_container .tdf_select_input{cursor:pointer;position:relative;min-height:36px;padding:5px 14px 5px 10px;background:#fffefe;line-height:24px;width:100%;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;border:1px solid #c4c6d5;color:#637381;z-index:2;-webkit-appearance:none;-moz-appearance:none}#tdf_currency.tdf_container .tdf_select_input:focus,#tdf_bar.tdf_container .tdf_select_input:focus,#tdf_wholesale.tdf_container .tdf_select_input:focus,#tdf_modal.tdf_container .tdf_select_input:focus,#tdf_notify.tdf_container .tdf_select_input:focus,#tdf_upsell.tdf_container .tdf_select_input:focus,.tdf_bundle.tdf_container .tdf_select_input:focus,#tdf_quickview.tdf_container .tdf_select_input:focus,#tdf_sale_widget.tdf_container .tdf_select_input:focus,#tdf_discount_widget.tdf_container .tdf_select_input:focus,.tdf_rec_stable_2.tdf_rec .tdf_select_input:focus,#tdf_psale.tdf_container .tdf_select_input:focus{outline:none !important}#tdf_currency.tdf_container .tdf_select_backdrop,#tdf_bar.tdf_container .tdf_select_backdrop,#tdf_wholesale.tdf_container .tdf_select_backdrop,#tdf_modal.tdf_container .tdf_select_backdrop,#tdf_notify.tdf_container .tdf_select_backdrop,#tdf_upsell.tdf_container .tdf_select_backdrop,.tdf_bundle.tdf_container .tdf_select_backdrop,#tdf_quickview.tdf_container .tdf_select_backdrop,#tdf_sale_widget.tdf_container .tdf_select_backdrop,#tdf_discount_widget.tdf_container .tdf_select_backdrop,.tdf_rec_stable_2.tdf_rec .tdf_select_backdrop,#tdf_psale.tdf_container .tdf_select_backdrop{border:1px solid transparent;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;position:absolute;top:0;bottom:0;left:0;right:0}#tdf_currency.tdf_container .tdf_select_icon,#tdf_bar.tdf_container .tdf_select_icon,#tdf_wholesale.tdf_container .tdf_select_icon,#tdf_modal.tdf_container .tdf_select_icon,#tdf_notify.tdf_container .tdf_select_icon,#tdf_upsell.tdf_container .tdf_select_icon,.tdf_bundle.tdf_container .tdf_select_icon,#tdf_quickview.tdf_container .tdf_select_icon,#tdf_sale_widget.tdf_container .tdf_select_icon,#tdf_discount_widget.tdf_container .tdf_select_icon,.tdf_rec_stable_2.tdf_rec .tdf_select_icon,#tdf_psale.tdf_container .tdf_select_icon{display:inline-block;width:20px;height:20px;position:absolute;right:2px;top:50%;z-index:2;margin-top:-10px;pointer-events:none;background:url(S_PATH/fe/nfec/img/icon-select.png)}#tdf_currency.tdf_container .tdf_img,#tdf_bar.tdf_container .tdf_img,#tdf_wholesale.tdf_container .tdf_img,#tdf_modal.tdf_container .tdf_img,#tdf_notify.tdf_container .tdf_img,#tdf_upsell.tdf_container .tdf_img,.tdf_bundle.tdf_container .tdf_img,#tdf_quickview.tdf_container .tdf_img,#tdf_sale_widget.tdf_container .tdf_img,#tdf_discount_widget.tdf_container .tdf_img,.tdf_rec_stable_2.tdf_rec .tdf_img,#tdf_psale.tdf_container .tdf_img{position:relative;height:181.5px;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;background:#F9FAFB;background-size:contain;background-position:center;background-repeat:no-repeat;cursor:pointer;display:block}#tdf_currency.tdf_container div.tdf_vertical_img,#tdf_bar.tdf_container div.tdf_vertical_img,#tdf_wholesale.tdf_container div.tdf_vertical_img,#tdf_modal.tdf_container div.tdf_vertical_img,#tdf_notify.tdf_container div.tdf_vertical_img,#tdf_upsell.tdf_container div.tdf_vertical_img,.tdf_bundle.tdf_container div.tdf_vertical_img,#tdf_quickview.tdf_container div.tdf_vertical_img,#tdf_sale_widget.tdf_container div.tdf_vertical_img,#tdf_discount_widget.tdf_container div.tdf_vertical_img,.tdf_rec_stable_2.tdf_rec div.tdf_vertical_img,#tdf_psale.tdf_container div.tdf_vertical_img{height:224px}#tdf_currency.tdf_container .tdf_block,#tdf_bar.tdf_container .tdf_block,#tdf_wholesale.tdf_container .tdf_block,#tdf_modal.tdf_container .tdf_block,#tdf_notify.tdf_container .tdf_block,#tdf_upsell.tdf_container .tdf_block,.tdf_bundle.tdf_container .tdf_block,#tdf_quickview.tdf_container .tdf_block,#tdf_sale_widget.tdf_container .tdf_block,#tdf_discount_widget.tdf_container .tdf_block,.tdf_rec_stable_2.tdf_rec .tdf_block,#tdf_psale.tdf_container .tdf_block{text-decoration:none}#tdf_currency.tdf_container .tdf_horizontal_name,#tdf_currency.tdf_container .tdf_horizontal_price,#tdf_bar.tdf_container .tdf_horizontal_name,#tdf_bar.tdf_container .tdf_horizontal_price,#tdf_wholesale.tdf_container .tdf_horizontal_name,#tdf_wholesale.tdf_container .tdf_horizontal_price,#tdf_modal.tdf_container .tdf_horizontal_name,#tdf_modal.tdf_container .tdf_horizontal_price,#tdf_notify.tdf_container .tdf_horizontal_name,#tdf_notify.tdf_container .tdf_horizontal_price,#tdf_upsell.tdf_container .tdf_horizontal_name,#tdf_upsell.tdf_container .tdf_horizontal_price,.tdf_bundle.tdf_container .tdf_horizontal_name,.tdf_bundle.tdf_container .tdf_horizontal_price,#tdf_quickview.tdf_container .tdf_horizontal_name,#tdf_quickview.tdf_container .tdf_horizontal_price,#tdf_sale_widget.tdf_container .tdf_horizontal_name,#tdf_sale_widget.tdf_container .tdf_horizontal_price,#tdf_discount_widget.tdf_container .tdf_horizontal_name,#tdf_discount_widget.tdf_container .tdf_horizontal_price,.tdf_rec_stable_2.tdf_rec .tdf_horizontal_name,.tdf_rec_stable_2.tdf_rec .tdf_horizontal_price,#tdf_psale.tdf_container .tdf_horizontal_name,#tdf_psale.tdf_container .tdf_horizontal_price{margin:0 0 8px}#tdf_currency.tdf_container .tdf_horizontal_title:hover,#tdf_bar.tdf_container .tdf_horizontal_title:hover,#tdf_wholesale.tdf_container .tdf_horizontal_title:hover,#tdf_modal.tdf_container .tdf_horizontal_title:hover,#tdf_notify.tdf_container .tdf_horizontal_title:hover,#tdf_upsell.tdf_container .tdf_horizontal_title:hover,.tdf_bundle.tdf_container .tdf_horizontal_title:hover,#tdf_quickview.tdf_container .tdf_horizontal_title:hover,#tdf_sale_widget.tdf_container .tdf_horizontal_title:hover,#tdf_discount_widget.tdf_container .tdf_horizontal_title:hover,.tdf_rec_stable_2.tdf_rec .tdf_horizontal_title:hover,#tdf_psale.tdf_container .tdf_horizontal_title:hover{text-decoration:underline}#tdf_currency.tdf_container .tdf_price,#tdf_bar.tdf_container .tdf_price,#tdf_wholesale.tdf_container .tdf_price,#tdf_modal.tdf_container .tdf_price,#tdf_notify.tdf_container .tdf_price,#tdf_upsell.tdf_container .tdf_price,.tdf_bundle.tdf_container .tdf_price,#tdf_quickview.tdf_container .tdf_price,#tdf_sale_widget.tdf_container .tdf_price,#tdf_discount_widget.tdf_container .tdf_price,.tdf_rec_stable_2.tdf_rec .tdf_price,#tdf_psale.tdf_container .tdf_price{color:#637381}#tdf_currency.tdf_container .tdf_price_original,#tdf_bar.tdf_container .tdf_price_original,#tdf_wholesale.tdf_container .tdf_price_original,#tdf_modal.tdf_container .tdf_price_original,#tdf_notify.tdf_container .tdf_price_original,#tdf_upsell.tdf_container .tdf_price_original,.tdf_bundle.tdf_container .tdf_price_original,#tdf_quickview.tdf_container .tdf_price_original,#tdf_sale_widget.tdf_container .tdf_price_original,#tdf_discount_widget.tdf_container .tdf_price_original,.tdf_rec_stable_2.tdf_rec .tdf_price_original,#tdf_psale.tdf_container .tdf_price_original{color:#637381}#tdf_currency.tdf_container .tdf_price_sales .tdf_money,#tdf_bar.tdf_container .tdf_price_sales .tdf_money,#tdf_wholesale.tdf_container .tdf_price_sales .tdf_money,#tdf_modal.tdf_container .tdf_price_sales .tdf_money,#tdf_notify.tdf_container .tdf_price_sales .tdf_money,#tdf_upsell.tdf_container .tdf_price_sales .tdf_money,.tdf_bundle.tdf_container .tdf_price_sales .tdf_money,#tdf_quickview.tdf_container .tdf_price_sales .tdf_money,#tdf_sale_widget.tdf_container .tdf_price_sales .tdf_money,#tdf_discount_widget.tdf_container .tdf_price_sales .tdf_money,.tdf_rec_stable_2.tdf_rec .tdf_price_sales .tdf_money,#tdf_psale.tdf_container .tdf_price_sales .tdf_money{color:#61bd4d}#tdf_currency.tdf_container .tdf_visually_hidden,#tdf_bar.tdf_container .tdf_visually_hidden,#tdf_wholesale.tdf_container .tdf_visually_hidden,#tdf_modal.tdf_container .tdf_visually_hidden,#tdf_notify.tdf_container .tdf_visually_hidden,#tdf_upsell.tdf_container .tdf_visually_hidden,.tdf_bundle.tdf_container .tdf_visually_hidden,#tdf_quickview.tdf_container .tdf_visually_hidden,#tdf_sale_widget.tdf_container .tdf_visually_hidden,#tdf_discount_widget.tdf_container .tdf_visually_hidden,.tdf_rec_stable_2.tdf_rec .tdf_visually_hidden,#tdf_psale.tdf_container .tdf_visually_hidden{position:absolute;clip:rect(1px, 1px, 1px, 1px);padding:0;border:0;overflow:hidden}#tdf_currency.tdf_container .tdf_products_vertical_content,#tdf_bar.tdf_container .tdf_products_vertical_content,#tdf_wholesale.tdf_container .tdf_products_vertical_content,#tdf_modal.tdf_container .tdf_products_vertical_content,#tdf_notify.tdf_container .tdf_products_vertical_content,#tdf_upsell.tdf_container .tdf_products_vertical_content,.tdf_bundle.tdf_container .tdf_products_vertical_content,#tdf_quickview.tdf_container .tdf_products_vertical_content,#tdf_sale_widget.tdf_container .tdf_products_vertical_content,#tdf_discount_widget.tdf_container .tdf_products_vertical_content,.tdf_rec_stable_2.tdf_rec .tdf_products_vertical_content,#tdf_psale.tdf_container .tdf_products_vertical_content{vertical-align:top;position:relative;display:inline-block;width:200px}#tdf_currency.tdf_container .tdf_vertical_name,#tdf_currency.tdf_container .tdf_vertical_price,#tdf_bar.tdf_container .tdf_vertical_name,#tdf_bar.tdf_container .tdf_vertical_price,#tdf_wholesale.tdf_container .tdf_vertical_name,#tdf_wholesale.tdf_container .tdf_vertical_price,#tdf_modal.tdf_container .tdf_vertical_name,#tdf_modal.tdf_container .tdf_vertical_price,#tdf_notify.tdf_container .tdf_vertical_name,#tdf_notify.tdf_container .tdf_vertical_price,#tdf_upsell.tdf_container .tdf_vertical_name,#tdf_upsell.tdf_container .tdf_vertical_price,.tdf_bundle.tdf_container .tdf_vertical_name,.tdf_bundle.tdf_container .tdf_vertical_price,#tdf_quickview.tdf_container .tdf_vertical_name,#tdf_quickview.tdf_container .tdf_vertical_price,#tdf_sale_widget.tdf_container .tdf_vertical_name,#tdf_sale_widget.tdf_container .tdf_vertical_price,#tdf_discount_widget.tdf_container .tdf_vertical_name,#tdf_discount_widget.tdf_container .tdf_vertical_price,.tdf_rec_stable_2.tdf_rec .tdf_vertical_name,.tdf_rec_stable_2.tdf_rec .tdf_vertical_price,#tdf_psale.tdf_container .tdf_vertical_name,#tdf_psale.tdf_container .tdf_vertical_price{margin-top:4px;margin-bottom:4px}#tdf_currency.tdf_container .tdf_vertical_price,#tdf_bar.tdf_container .tdf_vertical_price,#tdf_wholesale.tdf_container .tdf_vertical_price,#tdf_modal.tdf_container .tdf_vertical_price,#tdf_notify.tdf_container .tdf_vertical_price,#tdf_upsell.tdf_container .tdf_vertical_price,.tdf_bundle.tdf_container .tdf_vertical_price,#tdf_quickview.tdf_container .tdf_vertical_price,#tdf_sale_widget.tdf_container .tdf_vertical_price,#tdf_discount_widget.tdf_container .tdf_vertical_price,.tdf_rec_stable_2.tdf_rec .tdf_vertical_price,#tdf_psale.tdf_container .tdf_vertical_price{white-space:normal}#tdf_currency.tdf_container h4.tdf_vertical_title,#tdf_bar.tdf_container h4.tdf_vertical_title,#tdf_wholesale.tdf_container h4.tdf_vertical_title,#tdf_modal.tdf_container h4.tdf_vertical_title,#tdf_notify.tdf_container h4.tdf_vertical_title,#tdf_upsell.tdf_container h4.tdf_vertical_title,.tdf_bundle.tdf_container h4.tdf_vertical_title,#tdf_quickview.tdf_container h4.tdf_vertical_title,#tdf_sale_widget.tdf_container h4.tdf_vertical_title,#tdf_discount_widget.tdf_container h4.tdf_vertical_title,.tdf_rec_stable_2.tdf_rec h4.tdf_vertical_title,#tdf_psale.tdf_container h4.tdf_vertical_title{-webkit-line-clamp:2;font-size:13px}#tdf_currency.tdf_container div.tdf_products_vertical_content button,#tdf_bar.tdf_container div.tdf_products_vertical_content button,#tdf_wholesale.tdf_container div.tdf_products_vertical_content button,#tdf_modal.tdf_container div.tdf_products_vertical_content button,#tdf_notify.tdf_container div.tdf_products_vertical_content button,#tdf_upsell.tdf_container div.tdf_products_vertical_content button,.tdf_bundle.tdf_container div.tdf_products_vertical_content button,#tdf_quickview.tdf_container div.tdf_products_vertical_content button,#tdf_sale_widget.tdf_container div.tdf_products_vertical_content button,#tdf_discount_widget.tdf_container div.tdf_products_vertical_content button,.tdf_rec_stable_2.tdf_rec div.tdf_products_vertical_content button,#tdf_psale.tdf_container div.tdf_products_vertical_content button{min-width:auto}#tdf_currency.tdf_container .tdf_checkbox_container,#tdf_bar.tdf_container .tdf_checkbox_container,#tdf_wholesale.tdf_container .tdf_checkbox_container,#tdf_modal.tdf_container .tdf_checkbox_container,#tdf_notify.tdf_container .tdf_checkbox_container,#tdf_upsell.tdf_container .tdf_checkbox_container,.tdf_bundle.tdf_container .tdf_checkbox_container,#tdf_quickview.tdf_container .tdf_checkbox_container,#tdf_sale_widget.tdf_container .tdf_checkbox_container,#tdf_discount_widget.tdf_container .tdf_checkbox_container,.tdf_rec_stable_2.tdf_rec .tdf_checkbox_container,#tdf_psale.tdf_container .tdf_checkbox_container{position:relative;float:left;margin-top:5px}#tdf_currency.tdf_container .tdf_checkbox_wrapper,#tdf_bar.tdf_container .tdf_checkbox_wrapper,#tdf_wholesale.tdf_container .tdf_checkbox_wrapper,#tdf_modal.tdf_container .tdf_checkbox_wrapper,#tdf_notify.tdf_container .tdf_checkbox_wrapper,#tdf_upsell.tdf_container .tdf_checkbox_wrapper,.tdf_bundle.tdf_container .tdf_checkbox_wrapper,#tdf_quickview.tdf_container .tdf_checkbox_wrapper,#tdf_sale_widget.tdf_container .tdf_checkbox_wrapper,#tdf_discount_widget.tdf_container .tdf_checkbox_wrapper,.tdf_rec_stable_2.tdf_rec .tdf_checkbox_wrapper,#tdf_psale.tdf_container .tdf_checkbox_wrapper{display:inline-block;position:relative;cursor:pointer;line-height:26px}#tdf_currency.tdf_container .tdf_checkbox,#tdf_bar.tdf_container .tdf_checkbox,#tdf_wholesale.tdf_container .tdf_checkbox,#tdf_modal.tdf_container .tdf_checkbox,#tdf_notify.tdf_container .tdf_checkbox,#tdf_upsell.tdf_container .tdf_checkbox,.tdf_bundle.tdf_container .tdf_checkbox,#tdf_quickview.tdf_container .tdf_checkbox,#tdf_sale_widget.tdf_container .tdf_checkbox,#tdf_discount_widget.tdf_container .tdf_checkbox,.tdf_rec_stable_2.tdf_rec .tdf_checkbox,#tdf_psale.tdf_container .tdf_checkbox{width:24px;height:24px;position:absolute;z-index:2;top:0;left:0;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}#tdf_currency.tdf_container .tdf_checkmark,#tdf_bar.tdf_container .tdf_checkmark,#tdf_wholesale.tdf_container .tdf_checkmark,#tdf_modal.tdf_container .tdf_checkmark,#tdf_notify.tdf_container .tdf_checkmark,#tdf_upsell.tdf_container .tdf_checkmark,.tdf_bundle.tdf_container .tdf_checkmark,#tdf_quickview.tdf_container .tdf_checkmark,#tdf_sale_widget.tdf_container .tdf_checkmark,#tdf_discount_widget.tdf_container .tdf_checkmark,.tdf_rec_stable_2.tdf_rec .tdf_checkmark,#tdf_psale.tdf_container .tdf_checkmark{position:relative;top:0;left:0;height:16px;width:16px;border:1px solid #4267b3;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;border-radius:2px;display:inline-block}#tdf_currency.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,#tdf_bar.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,#tdf_wholesale.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,#tdf_modal.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,#tdf_notify.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,#tdf_upsell.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,.tdf_bundle.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,#tdf_quickview.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,#tdf_sale_widget.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,#tdf_discount_widget.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,.tdf_rec_stable_2.tdf_rec .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark,#tdf_psale.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:focus ~ .tdf_checkmark{-webkit-box-shadow:0 0 2px #4267b3;-moz-box-shadow:0 0 2px #4267b3;box-shadow:0 0 2px #4267b3}#tdf_currency.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,#tdf_bar.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,#tdf_wholesale.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,#tdf_modal.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,#tdf_notify.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,#tdf_upsell.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,.tdf_bundle.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,#tdf_quickview.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,#tdf_sale_widget.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,#tdf_discount_widget.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,.tdf_rec_stable_2.tdf_rec .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark,#tdf_psale.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark{border-color:#4267b3}#tdf_currency.tdf_container .tdf_checkmark:after,#tdf_bar.tdf_container .tdf_checkmark:after,#tdf_wholesale.tdf_container .tdf_checkmark:after,#tdf_modal.tdf_container .tdf_checkmark:after,#tdf_notify.tdf_container .tdf_checkmark:after,#tdf_upsell.tdf_container .tdf_checkmark:after,.tdf_bundle.tdf_container .tdf_checkmark:after,#tdf_quickview.tdf_container .tdf_checkmark:after,#tdf_sale_widget.tdf_container .tdf_checkmark:after,#tdf_discount_widget.tdf_container .tdf_checkmark:after,.tdf_rec_stable_2.tdf_rec .tdf_checkmark:after,#tdf_psale.tdf_container .tdf_checkmark:after{content:"";position:absolute;display:none}#tdf_currency.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,#tdf_bar.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,#tdf_wholesale.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,#tdf_modal.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,#tdf_notify.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,#tdf_upsell.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,.tdf_bundle.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,#tdf_quickview.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,#tdf_sale_widget.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,#tdf_discount_widget.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,.tdf_rec_stable_2.tdf_rec .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after,#tdf_psale.tdf_container .tdf_checkbox_wrapper .tdf_checkbox:checked ~ .tdf_checkmark:after{display:block}#tdf_currency.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after,#tdf_bar.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after,#tdf_wholesale.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after,#tdf_modal.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after,#tdf_notify.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after,#tdf_upsell.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after,.tdf_bundle.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after,#tdf_quickview.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after,#tdf_sale_widget.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after,#tdf_discount_widget.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after,.tdf_rec_stable_2.tdf_rec .tdf_checkbox_wrapper .tdf_checkmark:after,#tdf_psale.tdf_container .tdf_checkbox_wrapper .tdf_checkmark:after{left:4.5px;top:1px;width:5px;height:9px;border:1px solid #4267b3;border-width:0 1.5px 1.5px 0;-moz-transform:rotate(45deg);-o-transform:rotate(45deg);-ms-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg)}#tdf_currency.tdf_container .tdf_share_btn,#tdf_bar.tdf_container .tdf_share_btn,#tdf_wholesale.tdf_container .tdf_share_btn,#tdf_modal.tdf_container .tdf_share_btn,#tdf_notify.tdf_container .tdf_share_btn,#tdf_upsell.tdf_container .tdf_share_btn,.tdf_bundle.tdf_container .tdf_share_btn,#tdf_quickview.tdf_container .tdf_share_btn,#tdf_sale_widget.tdf_container .tdf_share_btn,#tdf_discount_widget.tdf_container .tdf_share_btn,.tdf_rec_stable_2.tdf_rec .tdf_share_btn,#tdf_psale.tdf_container .tdf_share_btn{margin:0 12px 0 0 !important;cursor:pointer;display:inline-block;width:20px;height:20px;background-image:url(S_PATH/fe/nfec/img/social-icon.png)}#tdf_currency.tdf_container .tdf_share_fb,#tdf_bar.tdf_container .tdf_share_fb,#tdf_wholesale.tdf_container .tdf_share_fb,#tdf_modal.tdf_container .tdf_share_fb,#tdf_notify.tdf_container .tdf_share_fb,#tdf_upsell.tdf_container .tdf_share_fb,.tdf_bundle.tdf_container .tdf_share_fb,#tdf_quickview.tdf_container .tdf_share_fb,#tdf_sale_widget.tdf_container .tdf_share_fb,#tdf_discount_widget.tdf_container .tdf_share_fb,.tdf_rec_stable_2.tdf_rec .tdf_share_fb,#tdf_psale.tdf_container .tdf_share_fb{background-position:-4px -5px}#tdf_currency.tdf_container .tdf_share_tw,#tdf_bar.tdf_container .tdf_share_tw,#tdf_wholesale.tdf_container .tdf_share_tw,#tdf_modal.tdf_container .tdf_share_tw,#tdf_notify.tdf_container .tdf_share_tw,#tdf_upsell.tdf_container .tdf_share_tw,.tdf_bundle.tdf_container .tdf_share_tw,#tdf_quickview.tdf_container .tdf_share_tw,#tdf_sale_widget.tdf_container .tdf_share_tw,#tdf_discount_widget.tdf_container .tdf_share_tw,.tdf_rec_stable_2.tdf_rec .tdf_share_tw,#tdf_psale.tdf_container .tdf_share_tw{background-position:-6px -83px}#tdf_currency.tdf_container .tdf_share_pt,#tdf_bar.tdf_container .tdf_share_pt,#tdf_wholesale.tdf_container .tdf_share_pt,#tdf_modal.tdf_container .tdf_share_pt,#tdf_notify.tdf_container .tdf_share_pt,#tdf_upsell.tdf_container .tdf_share_pt,.tdf_bundle.tdf_container .tdf_share_pt,#tdf_quickview.tdf_container .tdf_share_pt,#tdf_sale_widget.tdf_container .tdf_share_pt,#tdf_discount_widget.tdf_container .tdf_share_pt,.tdf_rec_stable_2.tdf_rec .tdf_share_pt,#tdf_psale.tdf_container .tdf_share_pt{background-position:-6px -55px}#tdf_currency.tdf_container .tdf_share_in,#tdf_bar.tdf_container .tdf_share_in,#tdf_wholesale.tdf_container .tdf_share_in,#tdf_modal.tdf_container .tdf_share_in,#tdf_notify.tdf_container .tdf_share_in,#tdf_upsell.tdf_container .tdf_share_in,.tdf_bundle.tdf_container .tdf_share_in,#tdf_quickview.tdf_container .tdf_share_in,#tdf_sale_widget.tdf_container .tdf_share_in,#tdf_discount_widget.tdf_container .tdf_share_in,.tdf_rec_stable_2.tdf_rec .tdf_share_in,#tdf_psale.tdf_container .tdf_share_in{background-position:-6px -108px}#tdf_currency.tdf_container .tdf_share_google,#tdf_bar.tdf_container .tdf_share_google,#tdf_wholesale.tdf_container .tdf_share_google,#tdf_modal.tdf_container .tdf_share_google,#tdf_notify.tdf_container .tdf_share_google,#tdf_upsell.tdf_container .tdf_share_google,.tdf_bundle.tdf_container .tdf_share_google,#tdf_quickview.tdf_container .tdf_share_google,#tdf_sale_widget.tdf_container .tdf_share_google,#tdf_discount_widget.tdf_container .tdf_share_google,.tdf_rec_stable_2.tdf_rec .tdf_share_google,#tdf_psale.tdf_container .tdf_share_google{background-position:-5px -30px}#tdf_currency.tdf_container .tdf_nonpopup *,#tdf_currency.tdf_container .tdf_nonpopup *:before,#tdf_currency.tdf_container .tdf_nonpopup *:after,#tdf_bar.tdf_container .tdf_nonpopup *,#tdf_bar.tdf_container .tdf_nonpopup *:before,#tdf_bar.tdf_container .tdf_nonpopup *:after,#tdf_wholesale.tdf_container .tdf_nonpopup *,#tdf_wholesale.tdf_container .tdf_nonpopup *:before,#tdf_wholesale.tdf_container .tdf_nonpopup *:after,#tdf_modal.tdf_container .tdf_nonpopup *,#tdf_modal.tdf_container .tdf_nonpopup *:before,#tdf_modal.tdf_container .tdf_nonpopup *:after,#tdf_notify.tdf_container .tdf_nonpopup *,#tdf_notify.tdf_container .tdf_nonpopup *:before,#tdf_notify.tdf_container .tdf_nonpopup *:after,#tdf_upsell.tdf_container .tdf_nonpopup *,#tdf_upsell.tdf_container .tdf_nonpopup *:before,#tdf_upsell.tdf_container .tdf_nonpopup *:after,.tdf_bundle.tdf_container .tdf_nonpopup *,.tdf_bundle.tdf_container .tdf_nonpopup *:before,.tdf_bundle.tdf_container .tdf_nonpopup *:after,#tdf_quickview.tdf_container .tdf_nonpopup *,#tdf_quickview.tdf_container .tdf_nonpopup *:before,#tdf_quickview.tdf_container .tdf_nonpopup *:after,#tdf_sale_widget.tdf_container .tdf_nonpopup *,#tdf_sale_widget.tdf_container .tdf_nonpopup *:before,#tdf_sale_widget.tdf_container .tdf_nonpopup *:after,#tdf_discount_widget.tdf_container .tdf_nonpopup *,#tdf_discount_widget.tdf_container .tdf_nonpopup *:before,#tdf_discount_widget.tdf_container .tdf_nonpopup *:after,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup *,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup *:before,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup *:after,#tdf_psale.tdf_container .tdf_nonpopup *,#tdf_psale.tdf_container .tdf_nonpopup *:before,#tdf_psale.tdf_container .tdf_nonpopup *:after{color:#212B35}#tdf_currency.tdf_container .tdf_nonpopup button,#tdf_bar.tdf_container .tdf_nonpopup button,#tdf_wholesale.tdf_container .tdf_nonpopup button,#tdf_modal.tdf_container .tdf_nonpopup button,#tdf_notify.tdf_container .tdf_nonpopup button,#tdf_upsell.tdf_container .tdf_nonpopup button,.tdf_bundle.tdf_container .tdf_nonpopup button,#tdf_quickview.tdf_container .tdf_nonpopup button,#tdf_sale_widget.tdf_container .tdf_nonpopup button,#tdf_discount_widget.tdf_container .tdf_nonpopup button,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup button,#tdf_psale.tdf_container .tdf_nonpopup button{color:#fffffd}#tdf_currency.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money,#tdf_bar.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money,#tdf_wholesale.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money,#tdf_modal.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money,#tdf_notify.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money,#tdf_upsell.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money,.tdf_bundle.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money,#tdf_quickview.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money,#tdf_sale_widget.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money,#tdf_discount_widget.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_price_sales .tdf_money,#tdf_psale.tdf_container .tdf_nonpopup .tdf_price_sales .tdf_money{color:#61bd4e}#tdf_currency.tdf_container .tdf_nonpopup .tdf_normal_btn,#tdf_bar.tdf_container .tdf_nonpopup .tdf_normal_btn,#tdf_wholesale.tdf_container .tdf_nonpopup .tdf_normal_btn,#tdf_modal.tdf_container .tdf_nonpopup .tdf_normal_btn,#tdf_notify.tdf_container .tdf_nonpopup .tdf_normal_btn,#tdf_upsell.tdf_container .tdf_nonpopup .tdf_normal_btn,.tdf_bundle.tdf_container .tdf_nonpopup .tdf_normal_btn,#tdf_quickview.tdf_container .tdf_nonpopup .tdf_normal_btn,#tdf_sale_widget.tdf_container .tdf_nonpopup .tdf_normal_btn,#tdf_discount_widget.tdf_container .tdf_nonpopup .tdf_normal_btn,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_normal_btn,#tdf_psale.tdf_container .tdf_nonpopup .tdf_normal_btn{background-color:#4267b3}#tdf_currency.tdf_container .tdf_nonpopup .tdf_lite_btn,#tdf_bar.tdf_container .tdf_nonpopup .tdf_lite_btn,#tdf_wholesale.tdf_container .tdf_nonpopup .tdf_lite_btn,#tdf_modal.tdf_container .tdf_nonpopup .tdf_lite_btn,#tdf_notify.tdf_container .tdf_nonpopup .tdf_lite_btn,#tdf_upsell.tdf_container .tdf_nonpopup .tdf_lite_btn,.tdf_bundle.tdf_container .tdf_nonpopup .tdf_lite_btn,#tdf_quickview.tdf_container .tdf_nonpopup .tdf_lite_btn,#tdf_sale_widget.tdf_container .tdf_nonpopup .tdf_lite_btn,#tdf_discount_widget.tdf_container .tdf_nonpopup .tdf_lite_btn,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup .tdf_lite_btn,#tdf_psale.tdf_container .tdf_nonpopup .tdf_lite_btn{color:#4267b3;border:solid 1px #4267b3;font-size:16px;background-color:#fafbfd}@media screen and (max-width: 767px){#tdf_currency.tdf_container .tdf_products_vertical_content,#tdf_bar.tdf_container .tdf_products_vertical_content,#tdf_wholesale.tdf_container .tdf_products_vertical_content,#tdf_modal.tdf_container .tdf_products_vertical_content,#tdf_notify.tdf_container .tdf_products_vertical_content,#tdf_upsell.tdf_container .tdf_products_vertical_content,.tdf_bundle.tdf_container .tdf_products_vertical_content,#tdf_quickview.tdf_container .tdf_products_vertical_content,#tdf_sale_widget.tdf_container .tdf_products_vertical_content,#tdf_discount_widget.tdf_container .tdf_products_vertical_content,.tdf_rec_stable_2.tdf_rec .tdf_products_vertical_content,#tdf_psale.tdf_container .tdf_products_vertical_content{width:112px}#tdf_currency.tdf_container div.tdf_vertical_img,#tdf_bar.tdf_container div.tdf_vertical_img,#tdf_wholesale.tdf_container div.tdf_vertical_img,#tdf_modal.tdf_container div.tdf_vertical_img,#tdf_notify.tdf_container div.tdf_vertical_img,#tdf_upsell.tdf_container div.tdf_vertical_img,.tdf_bundle.tdf_container div.tdf_vertical_img,#tdf_quickview.tdf_container div.tdf_vertical_img,#tdf_sale_widget.tdf_container div.tdf_vertical_img,#tdf_discount_widget.tdf_container div.tdf_vertical_img,.tdf_rec_stable_2.tdf_rec div.tdf_vertical_img,#tdf_psale.tdf_container div.tdf_vertical_img{height:112px}#tdf_currency.tdf_container div.tdf_products_vertical_content button,#tdf_bar.tdf_container div.tdf_products_vertical_content button,#tdf_wholesale.tdf_container div.tdf_products_vertical_content button,#tdf_modal.tdf_container div.tdf_products_vertical_content button,#tdf_notify.tdf_container div.tdf_products_vertical_content button,#tdf_upsell.tdf_container div.tdf_products_vertical_content button,.tdf_bundle.tdf_container div.tdf_products_vertical_content button,#tdf_quickview.tdf_container div.tdf_products_vertical_content button,#tdf_sale_widget.tdf_container div.tdf_products_vertical_content button,#tdf_discount_widget.tdf_container div.tdf_products_vertical_content button,.tdf_rec_stable_2.tdf_rec div.tdf_products_vertical_content button,#tdf_psale.tdf_container div.tdf_products_vertical_content button{font-size:14px;bottom:0}}@media screen and (min-width: 568px){#tdf_currency.tdf_container .tdf_img,#tdf_bar.tdf_container .tdf_img,#tdf_wholesale.tdf_container .tdf_img,#tdf_modal.tdf_container .tdf_img,#tdf_notify.tdf_container .tdf_img,#tdf_upsell.tdf_container .tdf_img,.tdf_bundle.tdf_container .tdf_img,#tdf_quickview.tdf_container .tdf_img,#tdf_sale_widget.tdf_container .tdf_img,#tdf_discount_widget.tdf_container .tdf_img,.tdf_rec_stable_2.tdf_rec .tdf_img,#tdf_psale.tdf_container .tdf_img{height:252.5px}}@media screen and (min-width: 768px){#tdf_currency.tdf_container .tdf_img,#tdf_bar.tdf_container .tdf_img,#tdf_wholesale.tdf_container .tdf_img,#tdf_modal.tdf_container .tdf_img,#tdf_notify.tdf_container .tdf_img,#tdf_upsell.tdf_container .tdf_img,.tdf_bundle.tdf_container .tdf_img,#tdf_quickview.tdf_container .tdf_img,#tdf_sale_widget.tdf_container .tdf_img,#tdf_discount_widget.tdf_container .tdf_img,.tdf_rec_stable_2.tdf_rec .tdf_img,#tdf_psale.tdf_container .tdf_img{height:306.84px}#tdf_currency.tdf_container .tdf_dialog_qv,#tdf_currency.tdf_container .tdf_dialog_content,#tdf_bar.tdf_container .tdf_dialog_qv,#tdf_bar.tdf_container .tdf_dialog_content,#tdf_wholesale.tdf_container .tdf_dialog_qv,#tdf_wholesale.tdf_container .tdf_dialog_content,#tdf_modal.tdf_container .tdf_dialog_qv,#tdf_modal.tdf_container .tdf_dialog_content,#tdf_notify.tdf_container .tdf_dialog_qv,#tdf_notify.tdf_container .tdf_dialog_content,#tdf_upsell.tdf_container .tdf_dialog_qv,#tdf_upsell.tdf_container .tdf_dialog_content,.tdf_bundle.tdf_container .tdf_dialog_qv,.tdf_bundle.tdf_container .tdf_dialog_content,#tdf_quickview.tdf_container .tdf_dialog_qv,#tdf_quickview.tdf_container .tdf_dialog_content,#tdf_sale_widget.tdf_container .tdf_dialog_qv,#tdf_sale_widget.tdf_container .tdf_dialog_content,#tdf_discount_widget.tdf_container .tdf_dialog_qv,#tdf_discount_widget.tdf_container .tdf_dialog_content,.tdf_rec_stable_2.tdf_rec .tdf_dialog_qv,.tdf_rec_stable_2.tdf_rec .tdf_dialog_content,#tdf_psale.tdf_container .tdf_dialog_qv,#tdf_psale.tdf_container .tdf_dialog_content{width:90%;height:auto;margin:20px auto;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;border-radius:4px}#tdf_currency.tdf_container .tdf_normal_btn,#tdf_bar.tdf_container .tdf_normal_btn,#tdf_wholesale.tdf_container .tdf_normal_btn,#tdf_modal.tdf_container .tdf_normal_btn,#tdf_notify.tdf_container .tdf_normal_btn,#tdf_upsell.tdf_container .tdf_normal_btn,.tdf_bundle.tdf_container .tdf_normal_btn,#tdf_quickview.tdf_container .tdf_normal_btn,#tdf_sale_widget.tdf_container .tdf_normal_btn,#tdf_discount_widget.tdf_container .tdf_normal_btn,.tdf_rec_stable_2.tdf_rec .tdf_normal_btn,#tdf_psale.tdf_container .tdf_normal_btn{top:0;width:100%}#tdf_currency.tdf_container .tdf_select_box,#tdf_bar.tdf_container .tdf_select_box,#tdf_wholesale.tdf_container .tdf_select_box,#tdf_modal.tdf_container .tdf_select_box,#tdf_notify.tdf_container .tdf_select_box,#tdf_upsell.tdf_container .tdf_select_box,.tdf_bundle.tdf_container .tdf_select_box,#tdf_quickview.tdf_container .tdf_select_box,#tdf_sale_widget.tdf_container .tdf_select_box,#tdf_discount_widget.tdf_container .tdf_select_box,.tdf_rec_stable_2.tdf_rec .tdf_select_box,#tdf_psale.tdf_container .tdf_select_box{max-width:100%}#tdf_currency.tdf_container .tdf_money,#tdf_bar.tdf_container .tdf_money,#tdf_wholesale.tdf_container .tdf_money,#tdf_modal.tdf_container .tdf_money,#tdf_notify.tdf_container .tdf_money,#tdf_upsell.tdf_container .tdf_money,.tdf_bundle.tdf_container .tdf_money,#tdf_quickview.tdf_container .tdf_money,#tdf_sale_widget.tdf_container .tdf_money,#tdf_discount_widget.tdf_container .tdf_money,.tdf_rec_stable_2.tdf_rec .tdf_money,#tdf_psale.tdf_container .tdf_money{font-size:16px}#tdf_currency.tdf_container .tdf_products_vertical_content button.tdf_normal_btn,#tdf_bar.tdf_container .tdf_products_vertical_content button.tdf_normal_btn,#tdf_wholesale.tdf_container .tdf_products_vertical_content button.tdf_normal_btn,#tdf_modal.tdf_container .tdf_products_vertical_content button.tdf_normal_btn,#tdf_notify.tdf_container .tdf_products_vertical_content button.tdf_normal_btn,#tdf_upsell.tdf_container .tdf_products_vertical_content button.tdf_normal_btn,.tdf_bundle.tdf_container .tdf_products_vertical_content button.tdf_normal_btn,#tdf_quickview.tdf_container .tdf_products_vertical_content button.tdf_normal_btn,#tdf_sale_widget.tdf_container .tdf_products_vertical_content button.tdf_normal_btn,#tdf_discount_widget.tdf_container .tdf_products_vertical_content button.tdf_normal_btn,.tdf_rec_stable_2.tdf_rec .tdf_products_vertical_content button.tdf_normal_btn,#tdf_psale.tdf_container .tdf_products_vertical_content button.tdf_normal_btn{top:unset}}@media screen and (min-width: 1024px){#tdf_currency.tdf_container .tdf_money,#tdf_bar.tdf_container .tdf_money,#tdf_wholesale.tdf_container .tdf_money,#tdf_modal.tdf_container .tdf_money,#tdf_notify.tdf_container .tdf_money,#tdf_upsell.tdf_container .tdf_money,.tdf_bundle.tdf_container .tdf_money,#tdf_quickview.tdf_container .tdf_money,#tdf_sale_widget.tdf_container .tdf_money,#tdf_discount_widget.tdf_container .tdf_money,.tdf_rec_stable_2.tdf_rec .tdf_money,#tdf_psale.tdf_container .tdf_money{font-size:18px}#tdf_currency.tdf_container .tdf_dialog_qv,#tdf_bar.tdf_container .tdf_dialog_qv,#tdf_wholesale.tdf_container .tdf_dialog_qv,#tdf_modal.tdf_container .tdf_dialog_qv,#tdf_notify.tdf_container .tdf_dialog_qv,#tdf_upsell.tdf_container .tdf_dialog_qv,.tdf_bundle.tdf_container .tdf_dialog_qv,#tdf_quickview.tdf_container .tdf_dialog_qv,#tdf_sale_widget.tdf_container .tdf_dialog_qv,#tdf_discount_widget.tdf_container .tdf_dialog_qv,.tdf_rec_stable_2.tdf_rec .tdf_dialog_qv,#tdf_psale.tdf_container .tdf_dialog_qv{width:800px}#tdf_currency.tdf_container .tdf_dialog_content,#tdf_bar.tdf_container .tdf_dialog_content,#tdf_wholesale.tdf_container .tdf_dialog_content,#tdf_modal.tdf_container .tdf_dialog_content,#tdf_notify.tdf_container .tdf_dialog_content,#tdf_upsell.tdf_container .tdf_dialog_content,.tdf_bundle.tdf_container .tdf_dialog_content,#tdf_quickview.tdf_container .tdf_dialog_content,#tdf_sale_widget.tdf_container .tdf_dialog_content,#tdf_discount_widget.tdf_container .tdf_dialog_content,.tdf_rec_stable_2.tdf_rec .tdf_dialog_content,#tdf_psale.tdf_container .tdf_dialog_content{width:800px}#tdf_currency.tdf_container .tdf_img,#tdf_bar.tdf_container .tdf_img,#tdf_wholesale.tdf_container .tdf_img,#tdf_modal.tdf_container .tdf_img,#tdf_notify.tdf_container .tdf_img,#tdf_upsell.tdf_container .tdf_img,.tdf_bundle.tdf_container .tdf_img,#tdf_quickview.tdf_container .tdf_img,#tdf_sale_widget.tdf_container .tdf_img,#tdf_discount_widget.tdf_container .tdf_img,.tdf_rec_stable_2.tdf_rec .tdf_img,#tdf_psale.tdf_container .tdf_img{height:304px}#tdf_currency.tdf_container .tdf_cta_btn,#tdf_bar.tdf_container .tdf_cta_btn,#tdf_wholesale.tdf_container .tdf_cta_btn,#tdf_modal.tdf_container .tdf_cta_btn,#tdf_notify.tdf_container .tdf_cta_btn,#tdf_upsell.tdf_container .tdf_cta_btn,.tdf_bundle.tdf_container .tdf_cta_btn,#tdf_quickview.tdf_container .tdf_cta_btn,#tdf_sale_widget.tdf_container .tdf_cta_btn,#tdf_discount_widget.tdf_container .tdf_cta_btn,.tdf_rec_stable_2.tdf_rec .tdf_cta_btn,#tdf_psale.tdf_container .tdf_cta_btn{min-width:240px}}@media screen and (min-width: 1441px){#tdf_currency.tdf_container .tdf_vertical_variants button.tdf_btn_loading,#tdf_bar.tdf_container .tdf_vertical_variants button.tdf_btn_loading,#tdf_wholesale.tdf_container .tdf_vertical_variants button.tdf_btn_loading,#tdf_modal.tdf_container .tdf_vertical_variants button.tdf_btn_loading,#tdf_notify.tdf_container .tdf_vertical_variants button.tdf_btn_loading,#tdf_upsell.tdf_container .tdf_vertical_variants button.tdf_btn_loading,.tdf_bundle.tdf_container .tdf_vertical_variants button.tdf_btn_loading,#tdf_quickview.tdf_container .tdf_vertical_variants button.tdf_btn_loading,#tdf_sale_widget.tdf_container .tdf_vertical_variants button.tdf_btn_loading,#tdf_discount_widget.tdf_container .tdf_vertical_variants button.tdf_btn_loading,.tdf_rec_stable_2.tdf_rec .tdf_vertical_variants button.tdf_btn_loading,#tdf_psale.tdf_container .tdf_vertical_variants button.tdf_btn_loading{height:36px}#tdf_currency.tdf_container .tdf_dialog_qv,#tdf_currency.tdf_container .tdf_dialog_content,#tdf_bar.tdf_container .tdf_dialog_qv,#tdf_bar.tdf_container .tdf_dialog_content,#tdf_wholesale.tdf_container .tdf_dialog_qv,#tdf_wholesale.tdf_container .tdf_dialog_content,#tdf_modal.tdf_container .tdf_dialog_qv,#tdf_modal.tdf_container .tdf_dialog_content,#tdf_notify.tdf_container .tdf_dialog_qv,#tdf_notify.tdf_container .tdf_dialog_content,#tdf_upsell.tdf_container .tdf_dialog_qv,#tdf_upsell.tdf_container .tdf_dialog_content,.tdf_bundle.tdf_container .tdf_dialog_qv,.tdf_bundle.tdf_container .tdf_dialog_content,#tdf_quickview.tdf_container .tdf_dialog_qv,#tdf_quickview.tdf_container .tdf_dialog_content,#tdf_sale_widget.tdf_container .tdf_dialog_qv,#tdf_sale_widget.tdf_container .tdf_dialog_content,#tdf_discount_widget.tdf_container .tdf_dialog_qv,#tdf_discount_widget.tdf_container .tdf_dialog_content,.tdf_rec_stable_2.tdf_rec .tdf_dialog_qv,.tdf_rec_stable_2.tdf_rec .tdf_dialog_content,#tdf_psale.tdf_container .tdf_dialog_qv,#tdf_psale.tdf_container .tdf_dialog_content{width:900px}#tdf_currency.tdf_container .tdf_products_vertical_content,#tdf_bar.tdf_container .tdf_products_vertical_content,#tdf_wholesale.tdf_container .tdf_products_vertical_content,#tdf_modal.tdf_container .tdf_products_vertical_content,#tdf_notify.tdf_container .tdf_products_vertical_content,#tdf_upsell.tdf_container .tdf_products_vertical_content,.tdf_bundle.tdf_container .tdf_products_vertical_content,#tdf_quickview.tdf_container .tdf_products_vertical_content,#tdf_sale_widget.tdf_container .tdf_products_vertical_content,#tdf_discount_widget.tdf_container .tdf_products_vertical_content,.tdf_rec_stable_2.tdf_rec .tdf_products_vertical_content,#tdf_psale.tdf_container .tdf_products_vertical_content{width:224px}#tdf_currency.tdf_container .tdf_img,#tdf_bar.tdf_container .tdf_img,#tdf_wholesale.tdf_container .tdf_img,#tdf_modal.tdf_container .tdf_img,#tdf_notify.tdf_container .tdf_img,#tdf_upsell.tdf_container .tdf_img,.tdf_bundle.tdf_container .tdf_img,#tdf_quickview.tdf_container .tdf_img,#tdf_sale_widget.tdf_container .tdf_img,#tdf_discount_widget.tdf_container .tdf_img,.tdf_rec_stable_2.tdf_rec .tdf_img,#tdf_psale.tdf_container .tdf_img{height:378px}#tdf_currency.tdf_container .tdf_select_input,#tdf_bar.tdf_container .tdf_select_input,#tdf_wholesale.tdf_container .tdf_select_input,#tdf_modal.tdf_container .tdf_select_input,#tdf_notify.tdf_container .tdf_select_input,#tdf_upsell.tdf_container .tdf_select_input,.tdf_bundle.tdf_container .tdf_select_input,#tdf_quickview.tdf_container .tdf_select_input,#tdf_sale_widget.tdf_container .tdf_select_input,#tdf_discount_widget.tdf_container .tdf_select_input,.tdf_rec_stable_2.tdf_rec .tdf_select_input,#tdf_psale.tdf_container .tdf_select_input{min-height:36px}}#tdf_currency.tdf_container .tdf_btn_loading,#tdf_bar.tdf_container .tdf_btn_loading,#tdf_wholesale.tdf_container .tdf_btn_loading,#tdf_modal.tdf_container .tdf_btn_loading,#tdf_notify.tdf_container .tdf_btn_loading,#tdf_upsell.tdf_container .tdf_btn_loading,.tdf_bundle.tdf_container .tdf_btn_loading,#tdf_quickview.tdf_container .tdf_btn_loading,#tdf_sale_widget.tdf_container .tdf_btn_loading,#tdf_discount_widget.tdf_container .tdf_btn_loading,.tdf_rec_stable_2.tdf_rec .tdf_btn_loading,#tdf_psale.tdf_container .tdf_btn_loading,#tdf_discount_box.tdf_container .tdf_btn_loading{cursor:auto;opacity:.5;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);height:36px;color:transparent;background-size:120px;background-position:center;background-image:url(S_PATH/fe/nfec/img/loading1.gif);background-repeat:no-repeat}#tdf_currency.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,#tdf_bar.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,#tdf_wholesale.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,#tdf_modal.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,#tdf_notify.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,#tdf_upsell.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,.tdf_bundle.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,#tdf_quickview.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,#tdf_sale_widget.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,#tdf_discount_widget.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,.tdf_rec_stable_2.tdf_rec .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,#tdf_psale.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading,#tdf_discount_box.tdf_container .tdf_nonpopup button.tdf_normal_btn.tdf_btn_loading{color:transparent}@media screen and (min-width: 1441px){#tdf_currency.tdf_container .tdf_btn_loading,#tdf_bar.tdf_container .tdf_btn_loading,#tdf_wholesale.tdf_container .tdf_btn_loading,#tdf_modal.tdf_container .tdf_btn_loading,#tdf_notify.tdf_container .tdf_btn_loading,#tdf_upsell.tdf_container .tdf_btn_loading,.tdf_bundle.tdf_container .tdf_btn_loading,#tdf_quickview.tdf_container .tdf_btn_loading,#tdf_sale_widget.tdf_container .tdf_btn_loading,#tdf_discount_widget.tdf_container .tdf_btn_loading,.tdf_rec_stable_2.tdf_rec .tdf_btn_loading,#tdf_psale.tdf_container .tdf_btn_loading,#tdf_discount_box.tdf_container .tdf_btn_loading{height:42px}}.product-single__meta.scroll-to-fixed-fixed{position:static !important;top:auto !important}#sellify-ucd-cart-drawer,div.hs-popup-cart-sp-load{z-index:999999988 !important}.hs-bg-slide-cart{z-index:999999987 !important}.tdf_container div:empty{display:block}#tdf_loading.animated{animation-duration:5s;-webkit-animation-duration:5s;-moz-animation-duration:5s;-ms-animation-duration:5s;animation-fill-mode:both;-webkit-animation-fill-mode:both;-moz-animation-fill-mode:both;-ms-animation-fill-mode:both;user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none}#tdf_loading.progress_loader{background:#4267b3;height:3px;left:0;position:fixed;top:0;z-index:2147483647}#tdf_loading.yt_loader{animation-name:horizontalProgressBar;-webkit-animation-name:horizontalProgressBar;-moz-animation-name:horizontalProgressBar;-ms-animation-name:horizontalProgressBar;-ms-animation-timing-function:ease;-moz-animation-timing-function:ease;-webkit-animation-timing-function:ease;animation-timing-function:ease;width:0%}@-webkit-keyframes horizontalProgressBar{0%{width:0%}25%{width:22%}50%{width:55%}75%{width:83%}100%{width:90%}}@-moz-keyframes horizontalProgressBar{0%{width:0%}25%{width:22%}50%{width:55%}75%{width:83%}100%{width:90%}}@-ms-keyframes horizontalProgressBar{#tdf_loading 0%{width:0%}#tdf_loading 25%{width:22%}#tdf_loading 50%{width:55%}#tdf_loading 75%{width:83%}#tdf_loading 100%{width:90%}}@keyframes horizontalProgressBar{0%{width:0%}25%{width:22%}50%{width:55%}75%{width:83%}100%{width:90%}}#tdf_notifies.tdf_container{position:fixed;top:10px;width:100%;z-index:2147483647}#tdf_notifies.tdf_container div.tdf_notify{-webkit-box-shadow:0 2px 12px #637381;-moz-box-shadow:0 2px 12px #637381;box-shadow:0 2px 12px #637381;background-color:#fffefe;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;border-radius:4px;animation-name:slideIn;-webkit-animation-name:slideIn;-moz-animation-name:slideIn;-ms-animation-name:slideIn;animation-duration:.4s;-webkit-animation-duration:.4s;-moz-animation-duration:.4s;-ms-animation-duration:.4s}#tdf_notifies.tdf_container div.tdf_notify .tdf_notify_content{padding:20px;padding-right:50px}#tdf_notifies.tdf_container div.tdf_notify .tdf_notify_close{display:block;width:50px;float:right;height:100%;text-align:center;color:#637381;font-size:20px;font-weight:bold;text-decoration:none}#tdf_notifies.tdf_container div.tdf_notify .tdf_notify_close:hover{color:#212B36}@media screen and (min-width: 768px) and (min-height: 500px){#tdf_notifies.tdf_container{right:10px;width:360px}}#tdf_modal{display:none;position:fixed;width:100%;height:100%;top:0;left:0;z-index:2147483647;overflow-y:scroll;text-align:center;animation-name:fadeIn;-webkit-animation-name:fadeIn;-moz-animation-name:fadeIn;-ms-animation-name:fadeIn;animation-duration:.4s;-webkit-animation-duration:.4s;-moz-animation-duration:.4s;-ms-animation-duration:.4s}#tdf_modal .tdf_modal_content{position:relative;animation-name:slideIn;-webkit-animation-name:slideIn;-moz-animation-name:slideIn;-ms-animation-name:slideIn;animation-duration:.4s;-webkit-animation-duration:.4s;-moz-animation-duration:.4s;-ms-animation-duration:.4s;text-align:center;background-color:#fffefe;width:100%;max-width:480px;margin:40px auto;padding:20px;-webkit-border-radius:4px;-moz-border-radius:4px;-ms-border-radius:4px;border-radius:4px}#tdf_modal .tdf_modal_close{color:#c4c6d5;float:right;font-size:28px;font-weight:bold;width:40px;height:40px;text-align:center;line-height:40px;margin-top:-20px;margin-right:-20px;text-decoration:none}#tdf_modal .tdf_modal_close:hover,#tdf_modal .tdf_modal_close:focus{color:#000002;text-decoration:none;cursor:pointer}#tdf_modal .tdf_modal_body{position:relative;text-align:center}'),nfec.main&&nfec.main.Start&&nfec.main.Start()},!0),tdfEventHub.TriggerEventOnce("jsloaded_nfec",function(){return nfec})})();
//# sourceMappingURL=/s/files/1/0013/1642/1703/t/1/assets/ac2.js.map?v=449390
